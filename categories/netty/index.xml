<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Netty on TauZZ&#39;s Blog</title>
        <link>https://tauzi.github.io/myblog/categories/netty/</link>
        <description>Recent content in Netty on TauZZ&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Thu, 04 May 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://tauzi.github.io/myblog/categories/netty/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>nettyé¢è¯•é¢˜</title>
        <link>https://tauzi.github.io/myblog/p/netty%E9%9D%A2%E8%AF%95%E9%A2%98/</link>
        <pubDate>Thu, 04 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://tauzi.github.io/myblog/p/netty%E9%9D%A2%E8%AF%95%E9%A2%98/</guid>
        <description>&lt;h1 id=&#34;ç²¾å°½-netty-é¢è¯•é¢˜&#34;&gt;ç²¾å°½ Netty é¢è¯•é¢˜&lt;/h1&gt;
&lt;p&gt;ä»¥ä¸‹é¢è¯•é¢˜ï¼Œè½¬è½½èŠ‹é“æºç &lt;/p&gt;
&lt;h2 id=&#34;bio-æ˜¯ä»€ä¹ˆ&#34;&gt;BIO æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ¦‚å¿µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;BIO ï¼Œå…¨ç§° Block-IO ï¼Œæ˜¯ä¸€ç§&lt;strong&gt;é˜»å¡&lt;/strong&gt;Â +Â &lt;strong&gt;åŒæ­¥&lt;/strong&gt;çš„é€šä¿¡æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¼ ç»Ÿçš„é€šä¿¡æ–¹å¼ï¼Œæ¨¡å¼ç®€å•ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚ä½†å¹¶å‘å¤„ç†èƒ½åŠ›ä½ï¼Œé€šä¿¡è€—æ—¶ï¼Œä¾èµ–ç½‘é€Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;åŸç†&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡å™¨é€šè¿‡ä¸€ä¸ª Acceptor çº¿ç¨‹ï¼Œè´Ÿè´£ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚å’Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹è¿›è¡Œé“¾è·¯å¤„ç†ã€‚å…¸å‹çš„&lt;strong&gt;ä¸€è¯·æ±‚ä¸€åº”ç­”æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‹¥å®¢æˆ·ç«¯æ•°é‡å¢å¤šï¼Œé¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¼šç»™æœåŠ¡å™¨æ‰“å¼€å¾ˆå¤§çš„å‹åŠ›ã€‚åæ”¹è‰¯ä¸ºç”¨çº¿ç¨‹æ± çš„æ–¹å¼ä»£æ›¿æ–°å¢çº¿ç¨‹ï¼Œè¢«ç§°ä¸ºä¼ªå¼‚æ­¥ IO ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç å‚è§Â &lt;a class=&#34;link&#34; href=&#34;https://github.com/ITDragonBlog/daydayup/tree/master/Netty/socket-io/src/com/itdragon/bio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bio&lt;/a&gt;Â ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;å°ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;BIO æ¨¡å‹ä¸­ï¼Œé€šè¿‡ Socket å’Œ ServerSocket å®ç°å¥—æ¥å­—é€šé“çš„é€šä¿¡ã€‚é˜»å¡ï¼ŒåŒæ­¥ï¼Œå»ºç«‹è¿æ¥è€—æ—¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;nio-æ˜¯ä»€ä¹ˆ&#34;&gt;NIO æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ¦‚å¿µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;NIO ï¼Œå…¨ç§° New IO ï¼Œä¹Ÿå« Non-Block IO ï¼Œæ˜¯ä¸€ç§&lt;strong&gt;éé˜»å¡&lt;/strong&gt;Â + åŒæ­¥çš„é€šä¿¡æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%80/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆä¸€ï¼‰ä¹‹ç®€ä»‹ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;åŸç†&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;NIO ç›¸å¯¹äº BIO æ¥è¯´ä¸€å¤§è¿›æ­¥ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ Channel é€šä¿¡ã€‚NIO å¯ä»¥åœ¨ Channel è¿›è¡Œè¯»å†™æ“ä½œã€‚è¿™äº› Channel éƒ½ä¼šè¢«æ³¨å†Œåœ¨ Selector å¤šè·¯å¤ç”¨å™¨ä¸Šã€‚Selector é€šè¿‡ä¸€ä¸ªçº¿ç¨‹ä¸åœçš„è½®è¯¢è¿™äº› Channel ã€‚æ‰¾å‡ºå·²ç»å‡†å¤‡å°±ç»ªçš„ Channel æ‰§è¡Œ IO æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NIO é€šè¿‡ä¸€ä¸ªçº¿ç¨‹è½®è¯¢ï¼Œå®ç°åƒä¸‡ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¿™å°±æ˜¯éé˜»å¡ NIO çš„ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡å™¨ç«¯åªè¦æä¾›ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ Selector çš„è½®è¯¢ï¼Œå°±å¯ä»¥æ¥å…¥æˆåƒä¸Šä¸‡ä¸ªå®¢æˆ·ç«¯ï¼Œè¿™å°±æ˜¯ JDK NIO åº“çš„å·¨å¤§è¿›æ­¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%9B%9B/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆå››ï¼‰ä¹‹ Selectorã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šé“åˆ†ä¸ºä¸¤å¤§ç±»ï¼šä¸€ç±»æ˜¯ç½‘ç»œè¯»å†™ï¼ˆSelectableChannelï¼‰ï¼Œä¸€ç±»æ˜¯ç”¨äºæ–‡ä»¶æ“ä½œï¼ˆFileChannelï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å‰è€… SocketChannel å’Œ ServerSocketChannel ï¼Œéƒ½æ˜¯SelectableChannel çš„å­ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%8C/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆäºŒï¼‰ä¹‹ Channelã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BIO æ˜¯å°†æ•°æ®ç›´æ¥å†™å…¥æˆ–è¯»å–åˆ°æµ Stream å¯¹è±¡ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NIO çš„æ•°æ®æ“ä½œéƒ½æ˜¯åœ¨ Buffer ä¸­è¿›è¡Œçš„ã€‚Buffer å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚Buffer æœ€å¸¸è§çš„ç±»å‹æ˜¯ByteBufferï¼Œå¦å¤–è¿˜æœ‰ CharBufferï¼ŒShortBufferï¼ŒIntBufferï¼ŒLongBufferï¼ŒFloatBufferï¼ŒDoubleBufferã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%89/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆä¸‰ï¼‰ä¹‹ Bufferã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼“å†²åŒº Buffer ï¼šå®ƒæ˜¯ NIO ä¸ BIO çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šé“ Channel ï¼šå’Œæµ Stream ä¸åŒï¼Œé€šé“æ˜¯åŒå‘çš„ã€‚NIOå¯ä»¥é€šè¿‡ Channel è¿›è¡Œæ•°æ®çš„è¯»ã€å†™å’ŒåŒæ—¶è¯»å†™æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤šè·¯å¤ç”¨å™¨ Selector ï¼šNIO ç¼–ç¨‹çš„åŸºç¡€ã€‚å¤šè·¯å¤ç”¨å™¨æä¾›é€‰æ‹©å·²ç»å°±ç»ªçš„ä»»åŠ¡çš„èƒ½åŠ›ï¼šå°±æ˜¯ Selector ä¼šä¸æ–­åœ°è½®è¯¢æ³¨å†Œåœ¨å…¶ä¸Šçš„é€šé“ï¼ˆChannelï¼‰ï¼Œå¦‚æœæŸä¸ªé€šé“å¤„äºå°±ç»ªçŠ¶æ€ï¼Œä¼šè¢« Selector è½®è¯¢å‡ºæ¥ï¼Œç„¶åé€šè¿‡ SelectionKey å¯ä»¥å–å¾—å°±ç»ªçš„Channelé›†åˆï¼Œä»è€Œè¿›è¡Œåç»­çš„ IO æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä»£ç å‚è§Â &lt;a class=&#34;link&#34; href=&#34;https://github.com/ITDragonBlog/daydayup/tree/master/Netty/socket-io/src/com/itdragon/nio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;nio&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%94/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆäº”ï¼‰ä¹‹ç¤ºä¾‹ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;å°ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;NIO æ¨¡å‹ä¸­é€šè¿‡ SocketChannel å’Œ ServerSocketChannel å®ç°å¥—æ¥å­—é€šé“çš„é€šä¿¡ã€‚éé˜»å¡ï¼ŒåŒæ­¥ï¼Œé¿å…ä¸ºæ¯ä¸ª TCP è¿æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;ç»§ç»­æŒ–æ˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯èƒ½æœ‰èƒ–å‹å¯¹éé˜»å¡å’Œé˜»å¡ï¼ŒåŒæ­¥å’Œå¼‚æ­¥çš„å®šä¹‰æœ‰ç‚¹æ‡µé€¼ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆä¸€ï¼‰ä¹‹ç®€ä»‹ã€‹&lt;/a&gt;Â æåˆ°çš„ä¸€æ®µè¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è€è‰¿è‰¿ï¼šåœ¨ä¸€äº›æ–‡ç« ä¸­ï¼Œä¼šå°† Java NIO æè¿°æˆ&lt;strong&gt;å¼‚æ­¥&lt;/strong&gt;Â IO ï¼Œå®é™…æ˜¯ä¸å¤ªæ­£ç¡®çš„ï¼š Java NIO æ˜¯&lt;strong&gt;åŒæ­¥&lt;/strong&gt;Â IO ï¼ŒJava AIO ( ä¹Ÿç§°ä¸º NIO 2 )æ˜¯&lt;strong&gt;å¼‚æ­¥&lt;/strong&gt;Â IOã€‚å…·ä½“åŸå› ï¼Œæ¨èé˜…è¯»æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/matthew_zhang/article/details/71328697&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šå¼‚æ­¥å’Œéé˜»å¡ä¸€æ ·å—? (å†…å®¹æ¶‰åŠ BIO, NIO, AIO, Netty)ã€‹&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/skiof007/article/details/52873421&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠBIOä¸NIOã€AIOçš„åŒºåˆ«(è¿™ä¸ªå®¹æ˜“ç†è§£)ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»ç»“æ¥è¯´ï¼Œåœ¨Â &lt;strong&gt;Unix IO æ¨¡å‹&lt;/strong&gt;çš„è¯­å¢ƒä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼šæ•°æ®æ‹·è´é˜¶æ®µæ˜¯å¦éœ€è¦å®Œå…¨ç”±æ“ä½œç³»ç»Ÿå¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é˜»å¡å’Œéé˜»å¡æ“ä½œï¼šæ˜¯é’ˆå¯¹å‘èµ· IO è¯·æ±‚æ“ä½œåï¼Œæ˜¯å¦æœ‰ç«‹åˆ»è¿”å›ä¸€ä¸ªæ ‡å¿—ä¿¡æ¯è€Œä¸è®©è¯·æ±‚çº¿ç¨‹ç­‰å¾…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼ŒJava NIO æ˜¯&lt;strong&gt;åŒæ­¥&lt;/strong&gt;ä¸”éé˜»å¡çš„ IO ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å¦å¤–ï¼Œèƒ–å‹åœ¨ç…ç…ä¸‹é¢è¿™ä¸ªå›¾æ¥ç†è§£ä¸‹ï¼š&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/images/Netty/2017_10_24/01.png&#34;  title=&#34;Unix çš„ 5 ç§ IO æ¨¡å‹&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2017_10_24/01.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;Unix çš„ 5 ç§ IO æ¨¡å‹&#34;
	
	
&gt;&lt;/a&gt;Unix çš„ 5 ç§ IO æ¨¡å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;aio-æ˜¯ä»€ä¹ˆ&#34;&gt;AIO æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è‰¿è‰¿ï¼šè¿™ä¸ªé¢è¯•é¢˜ï¼Œé‡ç‚¹åœ¨äºé™ˆè¿°æˆ‘ä»¬å¯¹ BIOã€NIO çš„ç†è§£ï¼Œå¯¹äº AIO æ¥è¯´ï¼ŒåŸºæœ¬ç†è§£å³å¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ¦‚å¿µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;AIO ï¼Œå…¨ç§° Asynchronous IO ï¼Œä¹Ÿå« NIO&lt;strong&gt;2&lt;/strong&gt;Â ï¼Œæ˜¯ä¸€ç§&lt;strong&gt;éé˜»å¡&lt;/strong&gt;Â +Â &lt;strong&gt;å¼‚æ­¥&lt;/strong&gt;çš„é€šä¿¡æ¨¡å¼ã€‚åœ¨ NIO çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥äº†æ–°çš„å¼‚æ­¥é€šé“çš„æ¦‚å¿µï¼Œå¹¶æä¾›äº†å¼‚æ­¥æ–‡ä»¶é€šé“å’Œå¼‚æ­¥å¥—æ¥å­—é€šé“çš„å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŸç†ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AIO å¹¶æ²¡æœ‰é‡‡ç”¨ NIO çš„å¤šè·¯å¤ç”¨å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨å¼‚æ­¥é€šé“çš„æ¦‚å¿µã€‚å…¶ readï¼Œwrite æ–¹æ³•çš„è¿”å›ç±»å‹ï¼Œéƒ½æ˜¯ Future å¯¹è±¡ã€‚è€Œ Future æ¨¡å‹æ˜¯å¼‚æ­¥çš„ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š&lt;strong&gt;å»ä¸»å‡½æ•°ç­‰å¾…æ—¶é—´&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»£ç å‚è§Â &lt;a class=&#34;link&#34; href=&#34;https://github.com/ITDragonBlog/daydayup/tree/master/Netty/socket-io/src/com/itdragon/aio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;aio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;å°ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;AIO æ¨¡å‹ä¸­é€šè¿‡ AsynchronousSocketChannel å’Œ AsynchronousServerSocketChannel å®ç°å¥—æ¥å­—é€šé“çš„é€šä¿¡ã€‚éé˜»å¡ï¼Œå¼‚æ­¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;bionio-æœ‰ä»€ä¹ˆåŒºåˆ«&#34;&gt;BIOã€NIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;çº¿ç¨‹æ¨¡å‹ä¸åŒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BIOï¼šä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œå®¢æˆ·ç«¯æœ‰è¿æ¥è¯·æ±‚æ—¶æœåŠ¡å™¨ç«¯å°±éœ€è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚æ‰€ä»¥ï¼Œçº¿ç¨‹å¼€é”€å¤§ã€‚å¯æ”¹è‰¯ä¸ºç”¨çº¿ç¨‹æ± çš„æ–¹å¼ä»£æ›¿æ–°åˆ›å»ºçº¿ç¨‹ï¼Œè¢«ç§°ä¸ºä¼ªå¼‚æ­¥ IO ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NIOï¼šä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†å®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚éƒ½ä¼šæ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸Šï¼Œå¤šè·¯å¤ç”¨å™¨è½®è¯¢åˆ°è¿æ¥æœ‰æ–°çš„ I/O è¯·æ±‚æ—¶ï¼Œæ‰å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå¤„ç†ã€‚å¯æ”¹è‰¯ä¸ºä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªè¯·æ±‚ï¼ŒåŸºäºÂ &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/EventLoop-1-Reactor-Model/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¤š Reactor æ¨¡å‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BIO æ˜¯é¢å‘æµ( Stream )çš„ï¼Œè€Œ NIO æ˜¯é¢å‘ç¼“å†²åŒº( Buffer )çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BIO çš„å„ç§æ“ä½œæ˜¯é˜»å¡çš„ï¼Œè€Œ NIO çš„å„ç§æ“ä½œæ˜¯éé˜»å¡çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BIO çš„ Socket æ˜¯å•å‘çš„ï¼Œè€Œ NIO çš„ Channel æ˜¯åŒå‘çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯èƒ½æ–‡å­—æ¯”è¾ƒéš¾è®°ï¼Œæ•´ç†å‡ºæ¥å°±æ˜¯ä¸‹å›¾ï¼š&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/images/Netty/2017_10_24/02.png&#34;  title=&#34;BIO å¯¹æ¯” NIO å¯¹æ¯” AIO&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2017_10_24/02.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;BIO å¯¹æ¯” NIO å¯¹æ¯” AIO&#34;
	
	
&gt;&lt;/a&gt;BIO å¯¹æ¯” NIO å¯¹æ¯” AIO&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œè™½ç„¶å›¾ä¸­è¯´ NIO çš„æ€§èƒ½ä¸€èˆ¬ï¼Œä½†æ˜¯åœ¨ç»å¤§å¤šæ•°æˆ‘ä»¬æ—¥å¸¸ä¸šåŠ¡åœºæ™¯ï¼ŒNIO å’Œ AIO çš„æ€§èƒ½å·®è·å®é™…æ²¡è¿™ä¹ˆå¤§ã€‚åœ¨ Netty5 ä¸­ï¼ŒåŸºäº AIO æ”¹é€ å’Œæ”¯æŒï¼Œæœ€åå‘ç°ï¼Œæ€§èƒ½å¹¶æ²¡æœ‰æƒ³è±¡ä¸­è¿™ä¹ˆå¼ºæ‚ï¼Œæ‰€ä»¥ Netty5 è¢«åºŸå¼ƒï¼Œè€Œæ˜¯ç»§ç»­ä¿æŒ Netty4 ä¸ºä¸»ç‰ˆæœ¬ï¼Œä½¿ç”¨ NIO ä¸ºä¸»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†èƒ–å‹èƒ½æ›´å¥½çš„è®°ä½å’Œç†è§£ BIOã€NIOã€AIO çš„æµç¨‹ï¼Œèƒ–å‹å¯ä»¥åœ¨ç†è§£ä¸‹å›¾ï¼š&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/images/Netty/2017_10_24/03.png&#34;  title=&#34;BIOã€NIOã€AIO çš„æµç¨‹å›¾&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2017_10_24/03.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;BIOã€NIOã€AIO çš„æµç¨‹å›¾&#34;
	
	
&gt;&lt;/a&gt;BIOã€NIOã€AIO çš„æµç¨‹å›¾&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-netty-&#34;&gt;ä»€ä¹ˆæ˜¯ Netty ï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Netty æ˜¯ä¸€æ¬¾æä¾›å¼‚æ­¥çš„ã€äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶å’Œå·¥å…·ï¼Œç”¨ä»¥å¿«é€Ÿå¼€å‘é«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„ç½‘ç»œæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼ŒNetty æ˜¯ä¸€ä¸ªåŸºäº NIO çš„å®¢æˆ·ã€æœåŠ¡å™¨ç«¯ç¼–ç¨‹æ¡†æ¶ã€‚ä½¿ç”¨ Netty å¯ä»¥ç¡®ä¿ä½ å¿«é€Ÿå’Œç®€å•åœ°å¼€å‘å‡ºä¸€ä¸ªç½‘ç»œåº”ç”¨ï¼Œä¾‹å¦‚å®ç°äº†æŸç§åè®®çš„å®¢æˆ·ï¼ŒæœåŠ¡ç«¯åº”ç”¨ã€‚Netty ç›¸å½“ç®€åŒ–å’Œæµçº¿åŒ–äº†ç½‘ç»œåº”ç”¨çš„ç¼–ç¨‹å¼€å‘è¿‡ç¨‹ï¼Œä¾‹å¦‚ï¼ŒTCP å’Œ UDP çš„ socket æœåŠ¡å¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆä»¥ä¸Šæ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Netty å…·æœ‰å¦‚ä¸‹ç‰¹æ€§( æ‘˜è‡ªã€ŠNetty in Actionã€‹ )&lt;/p&gt;
&lt;p&gt;åˆ†ç±»&lt;/p&gt;
&lt;p&gt;Nettyçš„ç‰¹æ€§&lt;/p&gt;
&lt;p&gt;è®¾è®¡&lt;/p&gt;
&lt;p&gt;1. ç»Ÿä¸€çš„ API ï¼Œæ”¯æŒå¤šç§ä¼ è¾“ç±»å‹( é˜»å¡å’Œéé˜»å¡çš„ ) &lt;!-- raw HTML omitted --&gt; 2. ç®€å•è€Œå¼ºå¤§çš„çº¿ç¨‹æ¨¡å‹ &lt;!-- raw HTML omitted --&gt; 3. çœŸæ­£çš„æ— è¿æ¥æ•°æ®æŠ¥å¥—æ¥å­—( UDP )æ”¯æŒ &lt;!-- raw HTML omitted --&gt; 4. è¿æ¥é€»è¾‘ç»„ä»¶( ChannelHander ä¸­é¡ºåºå¤„ç†æ¶ˆæ¯ )ä»¥åŠç»„ä»¶å¤ç”¨( ä¸€ä¸ª ChannelHandel å¯ä»¥è¢«å¤šä¸ªChannelPipeLine å¤ç”¨ )&lt;/p&gt;
&lt;p&gt;æ˜“äºä½¿ç”¨&lt;/p&gt;
&lt;p&gt;1. è¯¦å®çš„ Javadoc å’Œå¤§é‡çš„ç¤ºä¾‹é›† &lt;!-- raw HTML omitted --&gt; 2. ä¸éœ€è¦è¶…è¿‡ JDK 1.6+ çš„ä¾èµ–&lt;/p&gt;
&lt;p&gt;æ€§èƒ½&lt;/p&gt;
&lt;p&gt;æ‹¥æœ‰æ¯” Java çš„æ ¸å¿ƒ API æ›´é«˜çš„ååé‡ä»¥åŠæ›´ä½çš„å»¶è¿Ÿ( å¾—ç›Šäºæ± åŒ–å’Œå¤ç”¨ )ï¼Œæ›´ä½çš„èµ„æºæ¶ˆè€—ä»¥åŠæœ€å°‘çš„å†…å­˜å¤åˆ¶&lt;/p&gt;
&lt;p&gt;å¥å£®æ€§&lt;/p&gt;
&lt;p&gt;1. ä¸ä¼šå› ä¸ºæ…¢é€Ÿã€å¿«é€Ÿæˆ–è€…è¶…è½½çš„è¿æ¥è€Œå¯¼è‡´ OutOfMemoryError &lt;!-- raw HTML omitted --&gt; 2. æ¶ˆé™¤åœ¨é«˜é€Ÿç½‘ç»œä¸­ NIO åº”ç”¨ç¨‹åºå¸¸è§çš„ä¸å…¬å¹³è¯» / å†™æ¯”ç‡&lt;/p&gt;
&lt;p&gt;å®‰å…¨æ€§&lt;/p&gt;
&lt;p&gt;å®Œæ•´çš„ SSL/TLS ä»¥åŠ StartTLs æ”¯æŒï¼Œå¯ç”¨äºå—é™ç¯å¢ƒä¸‹ï¼Œå¦‚ Applet å’Œ OSGI&lt;/p&gt;
&lt;p&gt;ç¤¾åŒºé©±åŠ¨&lt;/p&gt;
&lt;p&gt;å‘å¸ƒå¿«é€Ÿè€Œä¸”é¢‘ç¹&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©-netty-&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹© Netty ï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ç®€å•&lt;/strong&gt;ï¼šAPI ä½¿ç”¨ç®€å•ï¼Œå¼€å‘é—¨æ§›ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠŸèƒ½å¼ºå¤§&lt;/strong&gt;ï¼šé¢„ç½®äº†å¤šç§ç¼–è§£ç åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§ä¸»æµåè®®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®šåˆ¶èƒ½åŠ›å¼º&lt;/strong&gt;ï¼šå¯ä»¥é€šè¿‡ ChannelHandler å¯¹é€šä¿¡æ¡†æ¶è¿›è¡Œçµæ´»çš„æ‰©å±•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½é«˜&lt;/strong&gt;ï¼šé€šè¿‡ä¸å…¶å®ƒä¸šç•Œä¸»æµçš„ NIO æ¡†æ¶å¯¹æ¯”ï¼ŒNetty çš„ç»¼åˆæ€§èƒ½æœ€ä¼˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æˆç†Ÿç¨³å®š&lt;/strong&gt;ï¼šNetty ä¿®å¤äº†å·²ç»å‘ç°çš„æ‰€æœ‰ JDK NIO BUGï¼Œä¸šåŠ¡å¼€å‘äººå‘˜ä¸éœ€è¦å†ä¸º NIO çš„ BUG è€Œçƒ¦æ¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¤¾åŒºæ´»è·ƒ&lt;/strong&gt;ï¼šç‰ˆæœ¬è¿­ä»£å‘¨æœŸçŸ­ï¼Œå‘ç°çš„BUGå¯ä»¥è¢«åŠæ—¶ä¿®å¤ï¼ŒåŒæ—¶ï¼Œæ›´å¤šçš„æ–°åŠŸèƒ½ä¼šè¢«åŠ å…¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¡ˆä¾‹ä¸°å¯Œ&lt;/strong&gt;ï¼šç»å†äº†å¤§è§„æ¨¡çš„å•†ä¸šåº”ç”¨è€ƒéªŒï¼Œè´¨é‡å·²ç»å¾—åˆ°éªŒè¯ã€‚åœ¨äº’è”ç½‘ã€å¤§æ•°æ®ã€ç½‘ç»œæ¸¸æˆã€ä¼ä¸šåº”ç”¨ã€ç”µä¿¡è½¯ä»¶ç­‰ä¼—å¤šè¡Œä¸šå¾—åˆ°æˆåŠŸå•†ç”¨ï¼Œè¯æ˜äº†å®ƒå¯ä»¥å®Œå…¨æ»¡è¶³ä¸åŒè¡Œä¸šçš„å•†ä¸šåº”ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œè¿™ä¸ªä¹Ÿæ˜¯æˆ‘ä»¬åšæŠ€æœ¯é€‰å‹çš„ä¸€äº›å‚è€ƒç‚¹ï¼Œä¸ä»…ä»…é€‚ç”¨äº Netty ï¼Œä¹ŸåŒæ ·é€‚ç”¨äºå…¶ä»–æŠ€æœ¯æ ˆã€‚å½“ç„¶ï¼ŒğŸ˜ˆ é¢è¯•éƒ½å¯ä»¥é…±ç´«å›ç­”ï¼Œæ˜¾å¾—å¾ˆé«˜ç«¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆè¯´-netty-ä½¿ç”¨ç®€å•&#34;&gt;ä¸ºä»€ä¹ˆè¯´ Netty ä½¿ç”¨ç®€å•ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦… æˆ‘ä»¬å‡è®¾è¦æ­å»ºä¸€ä¸ª Server æœåŠ¡å™¨ï¼Œä½¿ç”¨Â &lt;strong&gt;Java NIO çš„æ­¥éª¤&lt;/strong&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»º ServerSocketChannel ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ç»‘å®šç›‘å¬ç«¯å£ï¼Œå¹¶é…ç½®ä¸ºéé˜»å¡æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;åˆ›å»º Selectorï¼Œå°†ä¹‹å‰åˆ›å»ºçš„ ServerSocketChannel æ³¨å†Œåˆ° Selector ä¸Šï¼Œç›‘å¬Â &lt;code&gt;SelectionKey.OP_ACCEPT&lt;/code&gt;Â ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å¾ªç¯æ‰§è¡ŒÂ &lt;code&gt;Selector#select()&lt;/code&gt;Â æ–¹æ³•ï¼Œè½®è¯¢å°±ç»ªçš„ Channelã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;è½®è¯¢å°±ç»ªçš„ Channel æ—¶ï¼Œå¦‚æœæ˜¯å¤„äºÂ &lt;code&gt;OP_ACCEPT&lt;/code&gt;Â çŠ¶æ€ï¼Œè¯´æ˜æ˜¯æ–°çš„å®¢æˆ·ç«¯æ¥å…¥ï¼Œè°ƒç”¨Â &lt;code&gt;ServerSocketChannel#accept()&lt;/code&gt;Â æ–¹æ³•ï¼Œæ¥æ”¶æ–°çš„å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è®¾ç½®æ–°æ¥å…¥çš„ SocketChannel ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå¹¶æ³¨å†Œåˆ° Selector ä¸Šï¼Œç›‘å¬Â &lt;code&gt;OP_READ&lt;/code&gt;Â ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;å¦‚æœè½®è¯¢çš„ Channel çŠ¶æ€æ˜¯Â &lt;code&gt;OP_READ&lt;/code&gt;Â ï¼Œè¯´æ˜æœ‰æ–°çš„å°±ç»ªæ•°æ®åŒ…éœ€è¦è¯»å–ï¼Œåˆ™æ„é€  ByteBuffer å¯¹è±¡ï¼Œè¯»å–æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;è¿™é‡Œï¼Œè§£ç æ•°æ®åŒ…çš„è¿‡ç¨‹ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–å†™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;è‰¿è‰¿ï¼šæ³¨æ„å™¢ï¼Œä¸Šè¿°æ­¥éª¤è¿˜æ˜¯æœ€ç®€çš„ Java NIO å¯åŠ¨æ­¥éª¤ï¼Œä¸åŒ…æ‹¬&lt;strong&gt;å¤š Reactor å¤šçº¿ç¨‹æ¨¡å‹&lt;/strong&gt;å™¢ï¼å¯èƒ½æœ‰èƒ–å‹ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ Reactor æ¨¡å‹ï¼Œåœ¨Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/Interview/#&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Œä»€ä¹ˆæ˜¯ Reactor æ¨¡å‹ï¼Ÿã€&lt;/a&gt;Â é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬ä¼šè¯¦ç»†è§£é‡Šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ğŸ¦… ä½¿ç”¨Â &lt;strong&gt;Netty çš„æ­¥éª¤&lt;/strong&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»º NIO çº¿ç¨‹ç»„ EventLoopGroup å’Œ ServerBootstrapã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¾ç½® ServerBootstrap çš„å±æ€§ï¼šçº¿ç¨‹ç»„ã€SO_BACKLOG é€‰é¡¹ï¼Œè®¾ç½® NioServerSocketChannel ä¸º Channel&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®¾ç½®ä¸šåŠ¡å¤„ç† Handler å’Œ ç¼–è§£ç å™¨ Codec ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»‘å®šç«¯å£ï¼Œå¯åŠ¨æœåŠ¡å™¨ç¨‹åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;åœ¨ä¸šåŠ¡å¤„ç† Handler ä¸­ï¼Œå¤„ç†å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼Œå¹¶ç»™å‡ºå“åº”ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ğŸ¦… é‚£ä¹ˆç›¸æ¯” Java NIOï¼Œä½¿ç”¨ Netty å¼€å‘ç¨‹åºï¼Œéƒ½&lt;strong&gt;ç®€åŒ–äº†å“ªäº›æ­¥éª¤&lt;/strong&gt;å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ— éœ€å…³å¿ƒÂ &lt;code&gt;OP_ACCEPT&lt;/code&gt;ã€&lt;code&gt;OP_READ&lt;/code&gt;ã€&lt;code&gt;OP_WRITE&lt;/code&gt;Â ç­‰ç­‰Â &lt;strong&gt;IO æ“ä½œ&lt;/strong&gt;ï¼ŒNetty å·²ç»å°è£…ï¼Œå¯¹æˆ‘ä»¬åœ¨ä½¿ç”¨æ˜¯é€æ˜æ— æ„Ÿçš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ boss å’Œ worker EventLoopGroup ï¼ŒNetty ç›´æ¥æä¾›&lt;strong&gt;å¤š Reactor å¤šçº¿ç¨‹æ¨¡å‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Netty ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°æœ‰ä½¿ç”¨ä¸€ä¸ªè§£ç å™¨ FixedLengthFrameDecoderï¼Œå¯ä»¥ç”¨äºå¤„ç†å®šé•¿æ¶ˆæ¯çš„é—®é¢˜ï¼Œèƒ½å¤Ÿè§£å†³Â &lt;strong&gt;TCP ç²˜åŒ…æ‹†åŒ…&lt;/strong&gt;é—®é¢˜ï¼Œååˆ†æ–¹ä¾¿ã€‚å¦‚æœä½¿ç”¨ Java NIO ï¼Œéœ€è¦æˆ‘ä»¬è‡ªè¡Œå®ç°è§£ç å™¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;ğŸ˜ˆ å¦‚æœèƒ–å‹ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨ Java NIO ç¼–å†™ä¸€ä¸ª Server ï¼Œå»ºè®®è‡ªå·±å»å®ç°ä»¥ä¸‹ã€‚ ğŸ˜ˆ å¦‚æœèƒ–å‹æ²¡æœ‰ä½¿ç”¨è¿‡ Netty ç¼–å†™ä¸€ä¸ª Server ï¼Œå»ºè®®å»å…¥é—¨ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¯´è¯´ä¸šåŠ¡ä¸­-netty-çš„ä½¿ç”¨åœºæ™¯&#34;&gt;è¯´è¯´ä¸šåŠ¡ä¸­ Netty çš„ä½¿ç”¨åœºæ™¯ï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ„å»ºé«˜æ€§èƒ½ã€ä½æ—¶å»¶çš„å„ç§ Java ä¸­é—´ä»¶ï¼ŒNetty ä¸»è¦ä½œä¸ºåŸºç¡€é€šä¿¡æ¡†æ¶æä¾›é«˜æ€§èƒ½ã€ä½æ—¶å»¶çš„é€šä¿¡æœåŠ¡ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RocketMQ ï¼Œåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dubbo ï¼ŒæœåŠ¡è°ƒç”¨æ¡†æ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Spring WebFlux ï¼ŒåŸºäºå“åº”å¼çš„ Web æ¡†æ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HDFS ï¼Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¬æœ‰æˆ–è€…ç§æœ‰åè®®æ ˆçš„åŸºç¡€é€šä¿¡æ¡†æ¶ï¼Œä¾‹å¦‚å¯ä»¥åŸºäº Netty æ„å»ºå¼‚æ­¥ã€é«˜æ€§èƒ½çš„ WebSocketã€Protobuf ç­‰åè®®çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å„é¢†åŸŸåº”ç”¨ï¼Œä¾‹å¦‚å¤§æ•°æ®ã€æ¸¸æˆç­‰ï¼ŒNetty ä½œä¸ºé«˜æ€§èƒ½çš„é€šä¿¡æ¡†æ¶ç”¨äºå†…éƒ¨å„æ¨¡å—çš„æ•°æ®åˆ†å‘ã€ä¼ è¾“å’Œæ±‡æ€»ç­‰ï¼Œå®ç°æ¨¡å—ä¹‹é—´é«˜æ€§èƒ½é€šä¿¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¯´è¯´-netty-å¦‚ä½•å®ç°é«˜æ€§èƒ½&#34;&gt;è¯´è¯´ Netty å¦‚ä½•å®ç°é«˜æ€§èƒ½ï¼Ÿ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çº¿ç¨‹æ¨¡å‹&lt;/strong&gt;Â ï¼šæ›´åŠ ä¼˜é›…çš„ Reactor æ¨¡å¼å®ç°ã€çµæ´»çš„çº¿ç¨‹æ¨¡å‹ã€åˆ©ç”¨ EventLoop ç­‰åˆ›æ–°æ€§çš„æœºåˆ¶ï¼Œå¯ä»¥éå¸¸é«˜æ•ˆåœ°ç®¡ç†æˆç™¾ä¸Šåƒçš„ Channel ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜æ± è®¾è®¡&lt;/strong&gt;Â ï¼šä½¿ç”¨æ± åŒ–çš„ Direct Buffer ç­‰æŠ€æœ¯ï¼Œåœ¨æé«˜ IO æ€§èƒ½çš„åŒæ—¶ï¼Œå‡å°‘äº†å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ã€‚å¹¶ä¸”ï¼Œå†…åƒåƒçš„å†…éƒ¨å®ç°æ˜¯ç”¨ä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ›´å¥½çš„ç®¡ç†å†…å­˜åˆ†é…æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜é›¶æ‹·è´&lt;/strong&gt;Â ï¼šä½¿ç”¨ Direct Buffer ï¼Œå¯ä»¥ä½¿ç”¨ Zero-Copy æœºåˆ¶ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Zero-Copy ï¼Œåœ¨æ“ä½œæ•°æ®æ—¶ï¼Œä¸éœ€è¦å°†æ•°æ® Buffer ä»ä¸€ä¸ªå†…å­˜åŒºåŸŸæ‹·è´åˆ°å¦ä¸€ä¸ªå†…å­˜åŒºåŸŸã€‚å› ä¸ºå°‘äº†ä¸€æ¬¡å†…å­˜çš„æ‹·è´ï¼Œå› æ­¤ CPU çš„æ•ˆç‡å°±å¾—åˆ°çš„æå‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åè®®æ”¯æŒ&lt;/strong&gt;Â ï¼šæä¾›å¯¹ Protobuf ç­‰é«˜æ€§èƒ½åºåˆ—åŒ–åè®®æ”¯æŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ›´å¤šæœ¬åœ°ä»£ç &lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›´æ¥åˆ©ç”¨ JNI è°ƒç”¨ Open SSL ç­‰æ–¹å¼ï¼Œè·å¾—æ¯” Java å†…å»º SSL å¼•æ“æ›´å¥½çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç”¨ JNI æä¾›äº† Native Socket Transport ï¼Œåœ¨ä½¿ç”¨ Epoll edge-triggered çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æœ‰ä¸€å®šçš„æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;å…¶å®ƒï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆ©ç”¨åå°„ç­‰æŠ€æœ¯ç›´æ¥æ“çºµ SelectionKey ï¼Œä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯ Java å®¹å™¨ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®ç°Â &lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000012926809&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;FastThreadLocal&lt;/a&gt;Â ç±»ï¼Œå½“è¯·æ±‚é¢‘ç¹æ—¶ï¼Œå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&amp;hellip;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤–ï¼Œæ¨èé˜…è¯»ç™½è¡£å¤§å¤§çš„ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://calvin1978.blogcn.com/articles/netty-performance.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠNettyé«˜æ€§èƒ½ç¼–ç¨‹å¤‡å¿˜å½•(ä¸Š)ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://calvin1978.blogcn.com/articles/netty-performance2.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠNettyé«˜æ€§èƒ½ç¼–ç¨‹å¤‡å¿˜å½•ï¼ˆä¸‹ï¼‰ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸‹é¢ä¸‰è¿é—®ï¼&lt;/p&gt;
&lt;p&gt;Netty æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ã€é«˜å¯é çš„ã€å¯æ‰©å±•çš„å¼‚æ­¥é€šä¿¡æ¡†æ¶ï¼Œé‚£ä¹ˆé«˜æ€§èƒ½ã€é«˜å¯é ã€å¯æ‰©å±•è®¾è®¡ä½“ç°åœ¨å“ªé‡Œå‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;netty-çš„é«˜æ€§èƒ½å¦‚ä½•ä½“ç°&#34;&gt;Netty çš„é«˜æ€§èƒ½å¦‚ä½•ä½“ç°ï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜ï¼Œå’ŒÂ &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/Interview/#&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Œè¯´è¯´ Netty å¦‚ä½•å®ç°é«˜æ€§èƒ½ï¼Ÿã€&lt;/a&gt;Â é—®é¢˜ï¼Œä¼šæœ‰ç‚¹é‡å ã€‚æ²¡äº‹ï¼Œåæ­£ç†è§£å°±å¥½ï¼Œä¹ŸèƒŒä¸ä¸‹æ¥ã€‚å“ˆå“ˆå“ˆå“ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ€§èƒ½æ˜¯è®¾è®¡å‡ºæ¥çš„ï¼Œè€Œä¸æ˜¯æµ‹è¯•å‡ºæ¥çš„ã€‚é‚£ä¹ˆï¼ŒNetty çš„æ¶æ„è®¾è®¡æ˜¯å¦‚ä½•å®ç°é«˜æ€§èƒ½çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;çº¿ç¨‹æ¨¡å‹&lt;/strong&gt;Â ï¼šé‡‡ç”¨å¼‚æ­¥éé˜»å¡çš„ I/O ç±»åº“ï¼ŒåŸºäº Reactor æ¨¡å¼å®ç°ï¼Œè§£å†³äº†ä¼ ç»ŸåŒæ­¥é˜»å¡ I/O æ¨¡å¼ä¸‹æœåŠ¡ç«¯æ— æ³•å¹³æ»‘å¤„ç†å®¢æˆ·ç«¯çº¿æ€§å¢é•¿çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å †å¤–å†…å­˜&lt;/strong&gt;Â ï¼šTCP æ¥æ”¶å’Œå‘é€ç¼“å†²åŒºé‡‡ç”¨ç›´æ¥å†…å­˜ä»£æ›¿å †å†…å­˜ï¼Œé¿å…äº†å†…å­˜å¤åˆ¶ï¼Œæå‡äº† I/O è¯»å–å’Œå†™å…¥æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜æ± è®¾è®¡&lt;/strong&gt;Â ï¼šæ”¯æŒé€šè¿‡å†…å­˜æ± çš„æ–¹å¼å¾ªç¯åˆ©ç”¨ ByteBufï¼Œé¿å…äº†é¢‘ç¹åˆ›å»ºå’Œé”€æ¯ ByteBuf å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‚æ•°é…ç½®&lt;/strong&gt;Â ï¼šå¯é…ç½®çš„ I/O çº¿ç¨‹æ•°ç›®å’Œ TCP å‚æ•°ç­‰ï¼Œä¸ºä¸åŒç”¨æˆ·æä¾›å®šåˆ¶åŒ–çš„è°ƒä¼˜å‚æ•°ï¼Œæ»¡è¶³ä¸åŒçš„æ€§èƒ½åœºæ™¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é˜Ÿåˆ—ä¼˜åŒ–&lt;/strong&gt;Â ï¼šé‡‡ç”¨ç¯å½¢æ•°ç»„ç¼“å†²åŒºï¼Œå®ç°æ— é”åŒ–å¹¶å‘ç¼–ç¨‹ï¼Œä»£æ›¿ä¼ ç»Ÿçš„çº¿ç¨‹å®‰å…¨å®¹å™¨æˆ–é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¶å‘èƒ½åŠ›&lt;/strong&gt;Â ï¼šåˆç†ä½¿ç”¨çº¿ç¨‹å®‰å…¨å®¹å™¨ã€åŸå­ç±»ç­‰ï¼Œæå‡ç³»ç»Ÿçš„å¹¶å‘èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é™ä½é”ç«äº‰&lt;/strong&gt;Â ï¼šå…³é”®èµ„æºçš„ä½¿ç”¨é‡‡ç”¨å•çº¿ç¨‹ä¸²è¡ŒåŒ–çš„æ–¹å¼ï¼Œé¿å…å¤šçº¿ç¨‹å¹¶å‘è®¿é—®å¸¦æ¥çš„é”ç«äº‰å’Œé¢å¤–çš„ CPU èµ„æºæ¶ˆè€—é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†…å­˜æ³„éœ²æ£€æµ‹&lt;/strong&gt;Â ï¼šé€šè¿‡å¼•ç”¨è®¡æ•°å™¨åŠæ—¶åœ°é‡Šæ”¾ä¸å†è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œç»†ç²’åº¦çš„å†…å­˜ç®¡ç†é™ä½äº† GC çš„é¢‘ç‡ï¼Œå‡å°‘é¢‘ç¹ GC å¸¦æ¥çš„æ—¶å»¶å¢å¤§å’Œ CPU æŸè€—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/ByteBuf-1-3-ByteBuf-resource-leak-detector/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Buffer ä¹‹ ByteBufï¼ˆä¸‰ï¼‰å†…å­˜æ³„éœ²æ£€æµ‹ã€‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;netty-çš„é«˜å¯é å¦‚ä½•ä½“ç°&#34;&gt;Netty çš„é«˜å¯é å¦‚ä½•ä½“ç°ï¼Ÿ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é“¾è·¯æœ‰æ•ˆæ€§æ£€æµ‹&lt;/strong&gt;ï¼šç”±äºé•¿è¿æ¥ä¸éœ€è¦æ¯æ¬¡å‘é€æ¶ˆæ¯éƒ½åˆ›å»ºé“¾è·¯ï¼Œä¹Ÿä¸éœ€è¦åœ¨æ¶ˆæ¯å®Œæˆäº¤äº’æ—¶å…³é—­é“¾è·¯ï¼Œå› æ­¤ç›¸å¯¹äºçŸ­è¿æ¥æ€§èƒ½æ›´é«˜ã€‚ä¸ºäº†ä¿è¯é•¿è¿æ¥çš„é“¾è·¯æœ‰æ•ˆæ€§ï¼Œå¾€å¾€éœ€è¦é€šè¿‡å¿ƒè·³æœºåˆ¶å‘¨æœŸæ€§åœ°è¿›è¡Œé“¾è·¯æ£€æµ‹ã€‚ä½¿ç”¨å¿ƒè·³æœºåˆ¶çš„åŸå› æ˜¯ï¼Œé¿å…åœ¨ç³»ç»Ÿç©ºé—²æ—¶å› ç½‘ç»œé—ªæ–­è€Œæ–­å¼€è¿æ¥ï¼Œä¹‹ååˆé‡åˆ°æµ·é‡ä¸šåŠ¡å†²å‡»å¯¼è‡´æ¶ˆæ¯ç§¯å‹æ— æ³•å¤„ç†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å‘¨æœŸæ€§åœ°å¯¹é“¾è·¯è¿›è¡Œæœ‰æ•ˆæ€§æ£€æµ‹ï¼Œä¸€æ—¦å‘ç°é—®é¢˜ï¼Œå¯ä»¥åŠæ—¶å…³é—­é“¾è·¯ï¼Œé‡å»º TCP è¿æ¥ã€‚ä¸ºäº†æ”¯æŒå¿ƒè·³ï¼ŒNetty æä¾›äº†ä¸¤ç§é“¾è·¯ç©ºé—²æ£€æµ‹æœºåˆ¶ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¯»ç©ºé—²è¶…æ—¶æœºåˆ¶ï¼šè¿ç»­ T å‘¨æœŸæ²¡æœ‰æ¶ˆæ¯å¯è¯»æ—¶ï¼Œå‘é€å¿ƒè·³æ¶ˆæ¯ï¼Œè¿›è¡Œé“¾è·¯æ£€æµ‹ã€‚å¦‚æœè¿ç»­ N ä¸ªå‘¨æœŸæ²¡æœ‰è¯»å–åˆ°å¿ƒè·³æ¶ˆæ¯ï¼Œå¯ä»¥ä¸»åŠ¨å…³é—­é“¾è·¯ï¼Œé‡å»ºè¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å†™ç©ºé—²è¶…æ—¶æœºåˆ¶ï¼šè¿ç»­ T å‘¨æœŸæ²¡æœ‰æ¶ˆæ¯éœ€è¦å‘é€æ—¶ï¼Œå‘é€å¿ƒè·³æ¶ˆæ¯ï¼Œè¿›è¡Œé“¾è·¯æ£€æµ‹ã€‚å¦‚æœè¿ç»­ N ä¸ªå‘¨æœŸæ²¡æœ‰è¯»å–å¯¹æ–¹å‘å›çš„å¿ƒè·³æ¶ˆæ¯ï¼Œå¯ä»¥ä¸»åŠ¨å…³é—­é“¾è·¯ï¼Œé‡å»ºè¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/ChannelHandler-5-idle/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” ChannelHandlerï¼ˆäº”ï¼‰ä¹‹ IdleStateHandlerã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;å†…å­˜ä¿æŠ¤æœºåˆ¶&lt;/strong&gt;ï¼šNetty æä¾›å¤šç§æœºåˆ¶å¯¹å†…å­˜è¿›è¡Œä¿æŠ¤ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡å¯¹è±¡å¼•ç”¨è®¡æ•°å™¨å¯¹ ByteBuf è¿›è¡Œç»†ç²’åº¦çš„å†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼Œå¯¹éæ³•çš„å¯¹è±¡å¼•ç”¨è¿›è¡Œæ£€æµ‹å’Œä¿æŠ¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯è®¾ç½®çš„å†…å­˜å®¹é‡ä¸Šé™ï¼ŒåŒ…æ‹¬ ByteBufã€çº¿ç¨‹æ± çº¿ç¨‹æ•°ç­‰ï¼Œé¿å…å¼‚å¸¸è¯·æ±‚è€—å…‰å†…å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜é›…åœæœº&lt;/strong&gt;ï¼šä¼˜é›…åœæœºåŠŸèƒ½æŒ‡çš„æ˜¯å½“ç³»ç»Ÿæ¨å‡ºæ—¶ï¼ŒJVM é€šè¿‡æ³¨å†Œçš„ Shutdown Hook æ‹¦æˆªåˆ°é€€å‡ºä¿¡å·é‡ï¼Œç„¶åæ‰§è¡Œæ¨å‡ºæ“ä½œï¼Œé‡Šæ”¾ç›¸å…³æ¨¡å—çš„èµ„æºå ç”¨ï¼Œå°†ç¼“å†²åŒºçš„æ¶ˆæ¯å¤„ç†å®Œæˆæˆ–æ¸…ç©ºï¼Œå°†å¾…åˆ·æ–°çš„æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜å’Œæ•°æ®åº“ä¸­ï¼Œç­‰åˆ°èµ„æºå›æ”¶å’Œç¼“å†²åŒºæ¶ˆæ¯å¤„ç†å®Œæˆä¹‹åï¼Œå†é€€å‡ºã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/EventLoop-8-EventLoop-shutdown/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” EventLoopï¼ˆå…«ï¼‰ä¹‹ EventLoop ä¼˜é›…å…³é—­ã€‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;netty-çš„å¯æ‰©å±•å¦‚ä½•ä½“ç°&#34;&gt;Netty çš„å¯æ‰©å±•å¦‚ä½•ä½“ç°ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¯å®šåˆ¶ã€æ˜“æ‰©å±•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è´£ä»»é“¾æ¨¡å¼&lt;/strong&gt;Â ï¼šChannelPipeline åŸºäºè´£ä»»é“¾æ¨¡å¼å¼€å‘ï¼Œä¾¿äºä¸šåŠ¡é€»è¾‘çš„æ‹¦æˆªã€å®šåˆ¶å’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºäºæ¥å£çš„å¼€å‘&lt;/strong&gt;Â ï¼šå…³é”®çš„ç±»åº“éƒ½æä¾›äº†æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œä¾¿äºç”¨æˆ·è‡ªå®šä¹‰å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æä¾›å¤§é‡çš„å·¥å‚ç±»&lt;/strong&gt;Â ï¼šé€šè¿‡é‡è½½è¿™äº›å·¥å‚ç±»ï¼Œå¯ä»¥æŒ‰éœ€åˆ›å»ºå‡ºç”¨æˆ·éœ€è¦çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æä¾›å¤§é‡ç³»ç»Ÿå‚æ•°&lt;/strong&gt;Â ï¼šä¾›ç”¨æˆ·æŒ‰éœ€è®¾ç½®ï¼Œå¢å¼ºç³»ç»Ÿçš„åœºæ™¯å®šåˆ¶æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;è‰¿è‰¿ï¼šè¯´ä¸ªé¢˜å¤–è¯ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œä»»ä½•çš„æŠ€æœ¯çš„ç ”ç©¶ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å»æ€è€ƒï¼Œå®ƒçš„é«˜æ€§èƒ½æ˜¯æ€ä¹ˆä½“ç°çš„ï¼Œå®ƒçš„å¯é æ€§æ˜¯æ€ä¹ˆä½“ç°çš„ï¼Œå®ƒçš„å¯æ‹“å±•æ˜¯æ€ä¹ˆä½“ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æœ‰è¿‘ä¹‰è¯ï¼Œæ‰€ä»¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é«˜æ€§èƒ½ =&amp;gt; é«˜å¹¶å‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯é æ€§ =&amp;gt; é«˜å¯ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯æ‹“å±• =&amp;gt; é«˜æ‹“å±•&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹å¦‚è¯´ï¼ŒMySQL å¦‚ä½•å®ç°é«˜æ€§èƒ½ï¼ŒMySQL å¦‚ä½•æ­å»ºé«˜å¯ç”¨ï¼ŒğŸ˜ˆ MySQL å¦‚ä½•åšæ‹“å±•è²Œä¼¼æš‚æ—¶æ²¡ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ç®€å•ä»‹ç»-netty-çš„æ ¸å¿ƒç»„ä»¶&#34;&gt;ç®€å•ä»‹ç» Netty çš„æ ¸å¿ƒç»„ä»¶ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Netty æœ‰å¦‚ä¸‹å…­ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Bootstrap &amp;amp; ServerBootstrap&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Channel&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ChannelFuture&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;EventLoop &amp;amp; EventLoopGroup&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ChannelHandler&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ChannelPipeline&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¦ç»†çš„ï¼Œè¯·ç›´æ¥é˜…è¯»Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/intro-2/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” Netty ç®€ä»‹ï¼ˆäºŒï¼‰ä¹‹æ ¸å¿ƒç»„ä»¶ã€‹&lt;/a&gt;Â ä¸€æ–‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¯´è¯´-netty-çš„é€»è¾‘æ¶æ„&#34;&gt;è¯´è¯´ Netty çš„é€»è¾‘æ¶æ„ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Netty é‡‡ç”¨äº†å…¸å‹çš„&lt;strong&gt;ä¸‰å±‚ç½‘ç»œæ¶æ„&lt;/strong&gt;è¿›è¡Œè®¾è®¡å’Œå¼€å‘ï¼Œå…¶é€»è¾‘æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/85d98e3cb0e6e39f80d02234e039a4dd&#34;  title=&#34;Netty é€»è¾‘æ¶æ„å›¾&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;http://static.iocoder.cn/85d98e3cb0e6e39f80d02234e039a4dd&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;Netty é€»è¾‘æ¶æ„å›¾&#34;
	
	
&gt;&lt;/a&gt;Netty é€»è¾‘æ¶æ„å›¾&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è‰¿è‰¿ï¼šæ³¨æ„ï¼Œè¿™ä¸ªå›¾æ˜¯è‡ªä¸‹å‘ä¸Šçœ‹ã€‚å“ˆå“ˆå“ˆ~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Reactor é€šä¿¡è°ƒåº¦å±‚&lt;/strong&gt;ï¼šç”±ä¸€ç³»åˆ—è¾…åŠ©ç±»ç»„æˆï¼ŒåŒ…æ‹¬ Reactor çº¿ç¨‹ NioEventLoop åŠå…¶çˆ¶ç±»ï¼ŒNioSocketChannel å’Œ NioServerSocketChannel ç­‰ç­‰ã€‚è¯¥å±‚çš„èŒè´£å°±æ˜¯ç›‘å¬ç½‘ç»œçš„è¯»å†™å’Œè¿æ¥æ“ä½œï¼Œè´Ÿè´£å°†ç½‘ç»œå±‚çš„æ•°æ®è¯»åˆ°å†…å­˜ç¼“å†²åŒºï¼Œç„¶åè§¦å‘å„è‡ªç½‘ç»œäº‹ä»¶ï¼Œä¾‹å¦‚è¿æ¥åˆ›å»ºã€è¿æ¥æ¿€æ´»ã€è¯»äº‹ä»¶ã€å†™äº‹ä»¶ç­‰ã€‚å°†è¿™äº›äº‹ä»¶è§¦å‘åˆ° pipeline ä¸­ï¼Œç”± pipeline ç®¡ç†çš„èŒè´£é“¾æ¥è¿›è¡Œåç»­çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èŒè´£é“¾ ChannelPipeline&lt;/strong&gt;ï¼šè´Ÿè´£äº‹ä»¶åœ¨èŒè´£é“¾ä¸­çš„æœ‰åºä¼ æ’­ï¼Œä»¥åŠè´Ÿè´£åŠ¨æ€åœ°ç¼–æ’èŒè´£é“¾ã€‚èŒè´£é“¾å¯ä»¥é€‰æ‹©ç›‘å¬å’Œå¤„ç†è‡ªå·±å…³å¿ƒçš„äº‹ä»¶ï¼Œæ‹¦æˆªå¤„ç†å’Œå‘åä¼ æ’­äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸šåŠ¡é€»è¾‘ç¼–æ’å±‚&lt;/strong&gt;ï¼šä¸šåŠ¡é€»è¾‘ç¼–æ’å±‚é€šå¸¸æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯çº¯ç²¹çš„ä¸šåŠ¡é€»è¾‘ç¼–æ’ï¼Œä¸€ç±»æ˜¯åº”ç”¨å±‚åè®®æ’ä»¶ï¼Œç”¨äºç‰¹å®šåè®®ç›¸å…³çš„ä¼šè¯å’Œé“¾è·¯ç®¡ç†ã€‚ç”±äºåº”ç”¨å±‚åè®®æ ˆå¾€å¾€æ˜¯å¼€å‘ä¸€æ¬¡åˆ°å¤„è¿è¡Œï¼Œå¹¶ä¸”å˜åŠ¨è¾ƒå°ï¼Œæ•…è€Œå°†åº”ç”¨åè®®åˆ° POJO çš„è½¬å˜å’Œä¸Šå±‚ä¸šåŠ¡æ”¾åˆ°ä¸åŒçš„ ChannelHandler ä¸­ï¼Œå°±å¯ä»¥å®ç°åè®®å±‚å’Œä¸šåŠ¡é€»è¾‘å±‚çš„éš”ç¦»ï¼Œå®ç°æ¶æ„å±‚é¢çš„åˆ†å±‚éš”ç¦»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-reactor-æ¨¡å‹&#34;&gt;ä»€ä¹ˆæ˜¯ Reactor æ¨¡å‹ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ç›´æ¥é˜…è¯»Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/EventLoop-1-Reactor-Model/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” EventLoopï¼ˆä¸€ï¼‰ä¹‹ Reactor æ¨¡å‹ã€‹&lt;/a&gt;Â ä¸€æ–‡ã€‚&lt;/p&gt;
&lt;p&gt;è®¤çœŸä»”ç»†è¯»ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜é¢‘é¢è¯•é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¯·ä»‹ç»-netty-çš„çº¿ç¨‹æ¨¡å‹&#34;&gt;è¯·ä»‹ç» Netty çš„çº¿ç¨‹æ¨¡å‹ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¿˜æ˜¯é˜…è¯»Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/EventLoop-1-Reactor-Model/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” EventLoopï¼ˆä¸€ï¼‰ä¹‹ Reactor æ¨¡å‹ã€‹&lt;/a&gt;Â ä¸€æ–‡ã€‚&lt;/p&gt;
&lt;p&gt;è®¤çœŸä»”ç»†è¯»ï¼Œè¿™çœŸçš„çœŸçš„çœŸçš„æ˜¯ä¸€ä¸ªé«˜é¢‘é¢è¯•é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯ä¸šåŠ¡çº¿ç¨‹æ± &#34;&gt;ä»€ä¹ˆæ˜¯ä¸šåŠ¡çº¿ç¨‹æ± ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/Interview/#&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Œä»€ä¹ˆæ˜¯ Reactor æ¨¡å‹ï¼Ÿã€&lt;/a&gt;Â é—®é¢˜ä¸­ï¼Œæ— è®ºæ˜¯é‚£ç§ç±»å‹çš„ Reactor æ¨¡å‹ï¼Œéƒ½éœ€è¦åœ¨ Reactor æ‰€åœ¨çš„çº¿ç¨‹ä¸­ï¼Œè¿›è¡Œè¯»å†™æ“ä½œã€‚é‚£ä¹ˆæ­¤æ—¶å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬è¯»å–åˆ°æ•°æ®ï¼Œéœ€è¦è¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œå¹¶ä¸”è¿™ä¸ªä¸šåŠ¡é€»è¾‘éœ€è¦å¯¹æ•°æ®åº“ã€ç¼“å­˜ç­‰ç­‰è¿›è¡Œæ“ä½œï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå‡è®¾è¿™ä¸ªæ•°æ®åº“æ“ä½œéœ€è¦ 5 ms ï¼Œé‚£å°±æ„å‘³ç€è¿™ä¸ª Reactor çº¿ç¨‹åœ¨è¿™ 5 ms æ— æ³•è¿›è¡Œæ³¨å†Œåœ¨è¿™ä¸ª Reactor çš„ Channel è¿›è¡Œè¯»å†™æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šä¸ª Channel çš„æ‰€æœ‰è¯»å†™æ“ä½œéƒ½å˜æˆäº†ä¸²è¡Œã€‚åŠ¿å¿…ï¼Œè¿™æ ·çš„æ•ˆç‡ä¼šéå¸¸éå¸¸éå¸¸çš„ä½ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;è§£å†³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæ€ä¹ˆè§£å†³å‘¢ï¼Ÿåˆ›å»ºä¸šåŠ¡çº¿ç¨‹æ± ï¼Œå°†è¯»å–åˆ°çš„æ•°æ®ï¼Œæäº¤åˆ°ä¸šåŠ¡çº¿ç¨‹æ± ä¸­è¿›è¡Œå¤„ç†ã€‚è¿™æ ·ï¼ŒReactor çš„ Channel å°±ä¸ä¼šè¢«é˜»å¡ï¼Œè€Œ Channel çš„æ‰€æœ‰è¯»å†™æ“ä½œéƒ½å˜æˆäº†å¹¶è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ¡ˆä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœèƒ–å‹ç†Ÿæ‚‰ Dubbo æ¡†æ¶ï¼Œå°±ä¼šå‘ç°Â &lt;a class=&#34;link&#34; href=&#34;http://dubbo.apache.org/zh-cn/docs/user/demos/thread-model.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠDubbo ç”¨æˆ·æŒ‡å— â€”â€” çº¿ç¨‹æ¨¡å‹ã€‹&lt;/a&gt;Â ã€‚ğŸ˜ˆ è®¤çœŸè¯»ä¸‹ï¼Œå¯ä»¥è·Ÿé¢è¯•å®˜å¹ä¸€å¹å•¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;tcp-ç²˜åŒ…--æ‹†åŒ…çš„åŸå› åº”è¯¥è¿™ä¹ˆè§£å†³&#34;&gt;TCP ç²˜åŒ… / æ‹†åŒ…çš„åŸå› ï¼Ÿåº”è¯¥è¿™ä¹ˆè§£å†³ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ¦‚å¿µ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TCP æ˜¯ä»¥æµçš„æ–¹å¼æ¥å¤„ç†æ•°æ®ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´ç²˜åŒ… / æ‹†åŒ…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‹†åŒ…ï¼šä¸€ä¸ªå®Œæ•´çš„åŒ…å¯èƒ½ä¼šè¢« TCP æ‹†åˆ†æˆå¤šä¸ªåŒ…è¿›è¡Œå‘é€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç²˜åŒ…ï¼šä¹Ÿå¯èƒ½æŠŠå°çš„å°è£…æˆä¸€ä¸ªå¤§çš„æ•°æ®åŒ…å‘é€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;åŸå› &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºå†™å…¥çš„å­—èŠ‚å¤§å°å¤§äºå¥—æ¥å­—å‘é€ç¼“å†²åŒºçš„å¤§å°ï¼Œä¼šå‘ç”Ÿ&lt;strong&gt;æ‹†åŒ…&lt;/strong&gt;ç°è±¡ã€‚è€Œåº”ç”¨ç¨‹åºå†™å…¥æ•°æ®å°äºå¥—æ¥å­—ç¼“å†²åŒºå¤§å°ï¼Œç½‘å¡å°†åº”ç”¨å¤šæ¬¡å†™å…¥çš„æ•°æ®å‘é€åˆ°ç½‘ç»œä¸Šï¼Œè¿™å°†ä¼šå‘ç”Ÿ&lt;strong&gt;ç²˜åŒ…&lt;/strong&gt;ç°è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¾…å‘é€æ•°æ®å¤§äº MSSï¼ˆæœ€å¤§æŠ¥æ–‡é•¿åº¦ï¼‰ï¼ŒTCP åœ¨ä¼ è¾“å‰å°†è¿›è¡Œ&lt;strong&gt;æ‹†åŒ…&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥å¤ªç½‘å¸§çš„ payloadï¼ˆå‡€è·ï¼‰å¤§äº MTUï¼ˆé»˜è®¤ä¸º 1500 å­—èŠ‚ï¼‰è¿›è¡Œ IP åˆ†ç‰‡&lt;strong&gt;æ‹†åŒ…&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¥æ”¶æ•°æ®ç«¯çš„åº”ç”¨å±‚æ²¡æœ‰åŠæ—¶è¯»å–æ¥æ”¶ç¼“å†²åŒºä¸­çš„æ•°æ®ï¼Œå°†å‘ç”Ÿ&lt;strong&gt;ç²˜åŒ…&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;è§£å†³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ Netty ä¸­ï¼Œæä¾›äº†å¤šä¸ª Decoder è§£æç±»ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;â‘  FixedLengthFrameDecoder ï¼ŒåŸºäº&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;æ¶ˆæ¯è¿›è¡Œç²˜åŒ…æ‹†åŒ…å¤„ç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â‘¡ LengthFieldBasedFrameDecoder ï¼ŒåŸºäº&lt;strong&gt;æ¶ˆæ¯å¤´æŒ‡å®šæ¶ˆæ¯é•¿åº¦&lt;/strong&gt;è¿›è¡Œç²˜åŒ…æ‹†åŒ…å¤„ç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â‘¢ LineBasedFrameDecoder ï¼ŒåŸºäº&lt;strong&gt;æ¢è¡Œ&lt;/strong&gt;æ¥è¿›è¡Œæ¶ˆæ¯ç²˜åŒ…æ‹†åŒ…å¤„ç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â‘£ DelimiterBasedFrameDecoder ï¼ŒåŸºäº&lt;strong&gt;æŒ‡å®šæ¶ˆæ¯è¾¹ç•Œæ–¹å¼&lt;/strong&gt;è¿›è¡Œç²˜åŒ…æ‹†åŒ…å¤„ç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œä¸Šè¿°å››ä¸ª FrameDecoder å®ç°å¯ä»¥è¿›è¡Œè§„æ•´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;â‘  æ˜¯ â‘¡ çš„ç‰¹ä¾‹ï¼Œ&lt;strong&gt;å›ºå®šé•¿åº¦&lt;/strong&gt;æ˜¯&lt;strong&gt;æ¶ˆæ¯å¤´æŒ‡å®šæ¶ˆæ¯é•¿åº¦&lt;/strong&gt;çš„ä¸€ç§å½¢å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;â‘¢ æ˜¯ â‘£ çš„ç‰¹ä¾‹ï¼Œ&lt;strong&gt;æ¢è¡Œ&lt;/strong&gt;æ˜¯äº&lt;strong&gt;æŒ‡å®šæ¶ˆæ¯è¾¹ç•Œæ–¹å¼&lt;/strong&gt;çš„ä¸€ç§å½¢å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥çœ‹çœ‹å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/Codec-1-1-ByteToMessageDecoder-core-impl/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Codec ä¹‹ ByteToMessageDecoderï¼ˆä¸€ï¼‰Cumulatorã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/Codec-1-2-ByteToMessageDecoder-FrameDecoder/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Codec ä¹‹ ByteToMessageDecoderï¼ˆäºŒï¼‰FrameDecoderã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äº†è§£å“ªå‡ ç§åºåˆ—åŒ–åè®®&#34;&gt;äº†è§£å“ªå‡ ç§åºåˆ—åŒ–åè®®ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ¦‚å¿µ&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åºåˆ—åŒ–ï¼ˆç¼–ç ï¼‰ï¼Œæ˜¯å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶å½¢å¼ï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ï¼Œä¸»è¦ç”¨äºç½‘ç»œä¼ è¾“ã€æ•°æ®æŒä¹…åŒ–ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ååºåˆ—åŒ–ï¼ˆè§£ç ï¼‰ï¼Œåˆ™æ˜¯å°†ä»ç½‘ç»œã€ç£ç›˜ç­‰è¯»å–çš„å­—èŠ‚æ•°ç»„è¿˜åŸæˆåŸå§‹å¯¹è±¡ï¼Œä¸»è¦ç”¨äºç½‘ç»œä¼ è¾“å¯¹è±¡çš„è§£ç ï¼Œä»¥ä¾¿å®Œæˆè¿œç¨‹è°ƒç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;é€‰å‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é€‰æ‹©åºåˆ—åŒ–åè®®çš„é€‰æ‹©ï¼Œä¸»è¦è€ƒè™‘ä»¥ä¸‹ä¸‰ä¸ªå› ç´ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åºåˆ—åŒ–åçš„&lt;strong&gt;å­—èŠ‚å¤§å°&lt;/strong&gt;ã€‚æ›´å°‘çš„å­—èŠ‚æ•°ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œå¸¦å®½ã€ç£ç›˜çš„å ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åºåˆ—åŒ–çš„&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ã€‚å¯¹ CPUã€å†…å­˜èµ„æºå ç”¨æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ˜¯å¦æ”¯æŒ&lt;strong&gt;è·¨è¯­è¨€&lt;/strong&gt;ã€‚ä¾‹å¦‚ï¼Œå¼‚æ„ç³»ç»Ÿçš„å¯¹æ¥å’Œå¼€å‘è¯­è¨€åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;æ–¹æ¡ˆ&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœå¯¹åºåˆ—åŒ–å·¥å…·äº†è§£ä¸å¤šçš„èƒ–å‹ï¼Œå¯èƒ½ä¸€çœ‹æœ‰è¿™ä¹ˆå¤šä¼˜ç¼ºç‚¹ä¼šæ¯”è¾ƒæ‡µé€¼ï¼Œå¯ä»¥å…ˆè®°å¾—æœ‰å“ªäº›åºåˆ—åŒ–å·¥å…·ï¼Œç„¶ååœ¨æ…¢æ…¢ç†Ÿæ‚‰å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;é‡ç‚¹ï¼Œè¿˜æ˜¯çŸ¥é“ã€&lt;strong&gt;é€‰å‹&lt;/strong&gt;ã€‘çš„è€ƒè™‘ç‚¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;ã€é‡ç‚¹ã€‘Java é»˜è®¤æä¾›çš„åºåˆ—åŒ–&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ— æ³•è·¨è¯­è¨€ï¼›åºåˆ—åŒ–åçš„å­—èŠ‚å¤§å°å¤ªå¤§ï¼›åºåˆ—åŒ–çš„æ€§èƒ½å·®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;ã€é‡ç‚¹ã€‘XML ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šäººæœºå¯è¯»æ€§å¥½ï¼Œå¯æŒ‡å®šå…ƒç´ æˆ–ç‰¹æ€§çš„åç§°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šåºåˆ—åŒ–æ•°æ®åªåŒ…å«æ•°æ®æœ¬èº«ä»¥åŠç±»çš„ç»“æ„ï¼Œä¸åŒ…æ‹¬ç±»å‹æ ‡è¯†å’Œç¨‹åºé›†ä¿¡æ¯ï¼›åªèƒ½åºåˆ—åŒ–å…¬å…±å±æ€§å’Œå­—æ®µï¼›ä¸èƒ½åºåˆ—åŒ–æ–¹æ³•ï¼›æ–‡ä»¶åºå¤§ï¼Œæ–‡ä»¶æ ¼å¼å¤æ‚ï¼Œä¼ è¾“å å¸¦å®½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼šå½“åšé…ç½®æ–‡ä»¶å­˜å‚¨æ•°æ®ï¼Œå®æ—¶æ•°æ®è½¬æ¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;ã€é‡ç‚¹ã€‘JSON ï¼Œæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šå…¼å®¹æ€§é«˜ã€æ•°æ®æ ¼å¼æ¯”è¾ƒç®€å•ï¼Œæ˜“äºè¯»å†™ã€åºåˆ—åŒ–åæ•°æ®è¾ƒå°ï¼Œå¯æ‰©å±•æ€§å¥½ï¼Œå…¼å®¹æ€§å¥½ã€‚ä¸ XML ç›¸æ¯”ï¼Œå…¶åè®®æ¯”è¾ƒç®€å•ï¼Œè§£æé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šæ•°æ®çš„æè¿°æ€§æ¯” XML å·®ã€ä¸é€‚åˆæ€§èƒ½è¦æ±‚ä¸º ms çº§åˆ«çš„æƒ…å†µã€é¢å¤–ç©ºé—´å¼€é”€æ¯”è¾ƒå¤§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼ˆå¯æ›¿ä»£ XML ï¼‰ï¼šè·¨é˜²ç«å¢™è®¿é—®ã€å¯è°ƒå¼æ€§è¦æ±‚é«˜ã€åŸºäºRestful API è¯·æ±‚ã€ä¼ è¾“æ•°æ®é‡ç›¸å¯¹å°ï¼Œå®æ—¶æ€§è¦æ±‚ç›¸å¯¹ä½ï¼ˆä¾‹å¦‚ç§’çº§åˆ«ï¼‰çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;ã€äº†è§£ã€‘Thrift ï¼Œä¸ä»…æ˜¯åºåˆ—åŒ–åè®®ï¼Œè¿˜æ˜¯ä¸€ä¸ª RPC æ¡†æ¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šåºåˆ—åŒ–åçš„ä½“ç§¯å°, é€Ÿåº¦å¿«ã€æ”¯æŒå¤šç§è¯­è¨€å’Œä¸°å¯Œçš„æ•°æ®ç±»å‹ã€å¯¹äºæ•°æ®å­—æ®µçš„å¢åˆ å…·æœ‰è¾ƒå¼ºçš„å…¼å®¹æ€§ã€æ”¯æŒäºŒè¿›åˆ¶å‹ç¼©ç¼–ç ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šä½¿ç”¨è€…è¾ƒå°‘ã€è·¨é˜²ç«å¢™è®¿é—®æ—¶ï¼Œä¸å®‰å…¨ã€ä¸å…·æœ‰å¯è¯»æ€§ï¼Œè°ƒè¯•ä»£ç æ—¶ç›¸å¯¹å›°éš¾ã€ä¸èƒ½ä¸å…¶ä»–ä¼ è¾“å±‚åè®®å…±åŒä½¿ç”¨ï¼ˆä¾‹å¦‚ HTTPï¼‰ã€æ— æ³•æ”¯æŒå‘æŒä¹…å±‚ç›´æ¥è¯»å†™æ•°æ®ï¼Œå³ä¸é€‚åˆåšæ•°æ®æŒä¹…åŒ–åºåˆ—åŒ–åè®®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„ RPC è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;ã€äº†è§£ã€‘Avro ï¼ŒHadoop çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œè§£å†³äº†JSONçš„å†—é•¿å’Œæ²¡æœ‰IDLçš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šæ”¯æŒä¸°å¯Œçš„æ•°æ®ç±»å‹ã€ç®€å•çš„åŠ¨æ€è¯­è¨€ç»“åˆåŠŸèƒ½ã€å…·æœ‰è‡ªæˆ‘æè¿°å±æ€§ã€æé«˜äº†æ•°æ®è§£æé€Ÿåº¦ã€å¿«é€Ÿå¯å‹ç¼©çš„äºŒè¿›åˆ¶æ•°æ®å½¢å¼ã€å¯ä»¥å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ RPCã€æ”¯æŒè·¨ç¼–ç¨‹è¯­è¨€å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šå¯¹äºä¹ æƒ¯äºé™æ€ç±»å‹è¯­è¨€çš„ç”¨æˆ·ä¸ç›´è§‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼šåœ¨ Hadoop ä¸­åš Hiveã€Pig å’Œ MapReduce çš„æŒä¹…åŒ–æ•°æ®æ ¼å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;11&#34;&gt;
&lt;li&gt;ã€é‡ç‚¹ã€‘Protobuf ï¼Œå°†æ•°æ®ç»“æ„ä»¥Â &lt;code&gt;.proto&lt;/code&gt;Â æ–‡ä»¶è¿›è¡Œæè¿°ï¼Œé€šè¿‡ä»£ç ç”Ÿæˆå·¥å…·å¯ä»¥ç”Ÿæˆå¯¹åº”æ•°æ®ç»“æ„çš„ POJO å¯¹è±¡å’Œ Protobuf ç›¸å…³çš„æ–¹æ³•å’Œå±æ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šåºåˆ—åŒ–åç æµå°ï¼Œæ€§èƒ½é«˜ã€ç»“æ„åŒ–æ•°æ®å­˜å‚¨æ ¼å¼ï¼ˆXML JSONç­‰ï¼‰ã€é€šè¿‡æ ‡è¯†å­—æ®µçš„é¡ºåºï¼Œå¯ä»¥å®ç°åè®®çš„å‰å‘å…¼å®¹ã€ç»“æ„åŒ–çš„æ–‡æ¡£æ›´å®¹æ˜“ç®¡ç†å’Œç»´æŠ¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¼ºç‚¹ï¼šéœ€è¦ä¾èµ–äºå·¥å…·ç”Ÿæˆä»£ç ã€æ”¯æŒçš„è¯­è¨€ç›¸å¯¹è¾ƒå°‘ï¼Œå®˜æ–¹åªæ”¯æŒJava ã€C++ã€pythonã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€‚ç”¨åœºæ™¯ï¼šå¯¹æ€§èƒ½è¦æ±‚é«˜çš„ RPC è°ƒç”¨ã€å…·æœ‰è‰¯å¥½çš„è·¨é˜²ç«å¢™çš„è®¿é—®å±æ€§ã€é€‚åˆåº”ç”¨å±‚å¯¹è±¡çš„æŒä¹…åŒ–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;13&#34;&gt;
&lt;li&gt;å…¶å®ƒ&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›®å‰ï¼Œé˜¿é‡Œ RPC æ¡†æ¶ Dubbo çš„å¯é€‰åºåˆ—åŒ–åè®®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›®å‰ï¼Œé˜¿é‡Œ RPC æ¡†æ¶ Dubbo çš„å¯é€‰åºåˆ—åŒ–åè®®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›®å‰ï¼Œé˜¿é‡Œ RPC æ¡†æ¶ Dubbo çš„&lt;strong&gt;é»˜è®¤&lt;/strong&gt;åºåˆ—åŒ–åè®®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›®å‰ï¼Œå¾®åš RPC æ¡†æ¶ Motan åœ¨ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã€é‡ç‚¹ã€‘Protostuff ï¼ŒåŸºäº Protobuf åè®®ï¼Œä½†ä¸éœ€è¦é…ç½®proto æ–‡ä»¶ï¼Œç›´æ¥å¯¼åŒ…å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã€äº†è§£ã€‘Jboss Marshaling ï¼Œå¯ä»¥ç›´æ¥åºåˆ—åŒ– Java ç±»ï¼Œ æ— é¡»å®Â &lt;code&gt;java.io.Serializable&lt;/code&gt;Â æ¥å£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã€äº†è§£ã€‘Message Pack ï¼Œä¸€ä¸ªé«˜æ•ˆçš„äºŒè¿›åˆ¶åºåˆ—åŒ–æ ¼å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã€é‡ç‚¹ã€‘&lt;a class=&#34;link&#34; href=&#34;https://www.oschina.net/p/hessian&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Hessian&lt;/a&gt;Â ï¼Œé‡‡ç”¨äºŒè¿›åˆ¶åè®®çš„è½»é‡çº§ remoting on http æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã€é‡è¦ã€‘kryo ï¼Œæ˜¯ä¸€ä¸ªå¿«é€Ÿé«˜æ•ˆçš„Javaå¯¹è±¡å›¾å½¢åºåˆ—åŒ–æ¡†æ¶ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯æ€§èƒ½ã€é«˜æ•ˆå’Œæ˜“ç”¨ã€‚è¯¥é¡¹ç›®ç”¨æ¥åºåˆ—åŒ–å¯¹è±¡åˆ°æ–‡ä»¶ã€æ•°æ®åº“æˆ–è€…ç½‘ç»œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã€é‡è¦ã€‘FST ï¼Œfast-serialization æ˜¯é‡æ–°å®ç°çš„ Java å¿«é€Ÿå¯¹è±¡åºåˆ—åŒ–çš„å¼€å‘åŒ…ã€‚åºåˆ—åŒ–é€Ÿåº¦æ›´å¿«ï¼ˆ2-10å€ï¼‰ã€ä½“ç§¯æ›´å°ï¼Œè€Œä¸”å…¼å®¹ JDK åŸç”Ÿçš„åºåˆ—åŒ–ã€‚è¦æ±‚ JDK 1.7 æ”¯æŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;netty-çš„é›¶æ‹·è´å®ç°&#34;&gt;Netty çš„é›¶æ‹·è´å®ç°ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Netty çš„é›¶æ‹·è´å®ç°ï¼Œæ˜¯ä½“ç°åœ¨å¤šæ–¹é¢çš„ï¼Œä¸»è¦å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ã€é‡ç‚¹ã€‘Netty çš„æ¥æ”¶å’Œå‘é€ ByteBuffer é‡‡ç”¨å †å¤–ç›´æ¥å†…å­˜Â &lt;strong&gt;Direct Buffer&lt;/strong&gt;Â ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨å †å¤–ç›´æ¥å†…å­˜è¿›è¡Œ Socket è¯»å†™ï¼Œä¸éœ€è¦è¿›è¡Œå­—èŠ‚ç¼“å†²åŒºçš„äºŒæ¬¡æ‹·è´ï¼›ä½¿ç”¨å †å†…å†…å­˜ä¼šå¤šäº†ä¸€æ¬¡å†…å­˜æ‹·è´ï¼ŒJVM ä¼šå°†å †å†…å­˜ Buffer æ‹·è´ä¸€ä»½åˆ°ç›´æ¥å†…å­˜ä¸­ï¼Œç„¶åæ‰å†™å…¥ Socket ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Netty åˆ›å»ºçš„ ByteBuffer ç±»å‹ï¼Œç”± ChannelConfig é…ç½®ã€‚è€Œ ChannelConfig é…ç½®çš„ ByteBufAllocator é»˜è®¤åˆ›å»º Direct Buffer ç±»å‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;strong&gt;CompositeByteBuf&lt;/strong&gt;Â ç±»ï¼Œå¯ä»¥å°†å¤šä¸ª ByteBuf åˆå¹¶ä¸ºä¸€ä¸ªé€»è¾‘ä¸Šçš„ ByteBuf ï¼Œé¿å…äº†ä¼ ç»Ÿé€šè¿‡å†…å­˜æ‹·è´çš„æ–¹å¼å°†å‡ ä¸ªå° Buffer åˆå¹¶æˆä¸€ä¸ªå¤§çš„ Buffer ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#addComponents(...)&lt;/code&gt;Â æ–¹æ³•ï¼Œå¯å°† header ä¸ body åˆå¹¶ä¸ºä¸€ä¸ªé€»è¾‘ä¸Šçš„ ByteBuf ã€‚è¿™ä¸¤ä¸ª ByteBuf åœ¨CompositeByteBuf å†…éƒ¨éƒ½æ˜¯å•ç‹¬å­˜åœ¨çš„ï¼Œå³ CompositeByteBuf åªæ˜¯é€»è¾‘ä¸Šæ˜¯ä¸€ä¸ªæ•´ä½“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;é€šè¿‡Â &lt;strong&gt;FileRegion&lt;/strong&gt;Â åŒ…è£…çš„ FileChannel ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;#tranferTo(...)&lt;/code&gt;Â æ–¹æ³•ï¼Œå®ç°æ–‡ä»¶ä¼ è¾“, å¯ä»¥ç›´æ¥å°†æ–‡ä»¶ç¼“å†²åŒºçš„æ•°æ®å‘é€åˆ°ç›®æ ‡ Channel ï¼Œé¿å…äº†ä¼ ç»Ÿé€šè¿‡å¾ªç¯ write æ–¹å¼ï¼Œå¯¼è‡´çš„å†…å­˜æ‹·è´é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;é€šè¿‡Â &lt;strong&gt;wrap&lt;/strong&gt;Â æ–¹æ³•, æˆ‘ä»¬å¯ä»¥å°†Â &lt;code&gt;byte[]&lt;/code&gt;Â æ•°ç»„ã€ByteBufã€ByteBuffer ç­‰åŒ…è£…æˆä¸€ä¸ª Netty ByteBuf å¯¹è±¡, è¿›è€Œé¿å…äº†æ‹·è´æ“ä½œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;åŸç”Ÿçš„-nio-å­˜åœ¨-epoll-bug-æ˜¯ä»€ä¹ˆnetty-æ˜¯æ€ä¹ˆè§£å†³çš„&#34;&gt;åŸç”Ÿçš„ NIO å­˜åœ¨ Epoll Bug æ˜¯ä»€ä¹ˆï¼ŸNetty æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;Java NIO Epoll BUG&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Java NIO Epoll ä¼šå¯¼è‡´ Selector ç©ºè½®è¯¢ï¼Œæœ€ç»ˆå¯¼è‡´ CPU 100% ã€‚&lt;/p&gt;
&lt;p&gt;å®˜æ–¹å£°ç§°åœ¨ JDK 1.6 ç‰ˆæœ¬çš„ update18 ä¿®å¤äº†è¯¥é—®é¢˜ï¼Œä½†æ˜¯ç›´åˆ° JDK 1.7 ç‰ˆæœ¬è¯¥é—®é¢˜ä»æ—§å­˜åœ¨ï¼Œåªä¸è¿‡è¯¥ BUG å‘ç”Ÿæ¦‚ç‡é™ä½äº†ä¸€äº›è€Œå·²ï¼Œå®ƒå¹¶æ²¡æœ‰å¾—åˆ°æ ¹æœ¬æ€§è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;Netty è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹ Selector çš„ select æ“ä½œå‘¨æœŸè¿›è¡Œ&lt;strong&gt;ç»Ÿè®¡&lt;/strong&gt;ï¼Œæ¯å®Œæˆä¸€æ¬¡&lt;strong&gt;ç©º&lt;/strong&gt;çš„ select æ“ä½œè¿›è¡Œä¸€æ¬¡è®¡æ•°ï¼Œè‹¥åœ¨æŸä¸ªå‘¨æœŸå†…è¿ç»­å‘ç”Ÿ N æ¬¡ç©ºè½®è¯¢ï¼Œåˆ™åˆ¤æ–­è§¦å‘äº† Epoll æ­»å¾ªç¯ Bug ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è‰¿è‰¿ï¼šæ­¤å¤„&lt;strong&gt;ç©º&lt;/strong&gt;çš„ select æ“ä½œçš„å®šä¹‰æ˜¯ï¼Œselect æ“ä½œæ‰§è¡Œäº† 0 æ¯«ç§’ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ­¤æ—¶ï¼ŒNettyÂ &lt;strong&gt;é‡å»º&lt;/strong&gt;Â Selector æ¥è§£å†³ã€‚åˆ¤æ–­æ˜¯å¦æ˜¯å…¶ä»–çº¿ç¨‹å‘èµ·çš„é‡å»ºè¯·æ±‚ï¼Œè‹¥ä¸æ˜¯åˆ™å°†åŸ SocketChannel ä»æ—§çš„ Selector ä¸Šå–æ¶ˆæ³¨å†Œï¼Œç„¶åé‡æ–°æ³¨å†Œåˆ°æ–°çš„ Selector ä¸Šï¼Œæœ€åå°†åŸæ¥çš„ Selector å…³é—­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-netty-ç©ºé—²æ£€æµ‹&#34;&gt;ä»€ä¹ˆæ˜¯ Netty ç©ºé—²æ£€æµ‹ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åœ¨ Netty ä¸­ï¼Œæä¾›äº† IdleStateHandler ç±»ï¼Œæ­£å¦‚å…¶åï¼Œç©ºé—²çŠ¶æ€å¤„ç†å™¨ï¼Œç”¨äºæ£€æµ‹è¿æ¥çš„è¯»å†™æ˜¯å¦å¤„äºç©ºé—²çŠ¶æ€ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ä¼šè§¦å‘ IdleStateEvent ã€‚&lt;/p&gt;
&lt;p&gt;IdleStateHandler ç›®å‰æä¾›ä¸‰ç§ç±»å‹çš„å¿ƒè·³æ£€æµ‹ï¼Œé€šè¿‡æ„é€ æ–¹æ³•æ¥è®¾ç½®ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// IdleStateHandler.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public IdleStateHandler(  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int readerIdleTimeSeconds,  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int writerIdleTimeSeconds,  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int allIdleTimeSeconds) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; this(readerIdleTimeSeconds, writerIdleTimeSeconds, allIdleTimeSeconds,  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; TimeUnit.SECONDS);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;readerIdleTimeSeconds&lt;/code&gt;Â å‚æ•°ï¼šä¸ºè¯»è¶…æ—¶æ—¶é—´ï¼Œå³æµ‹è¯•ç«¯ä¸€å®šæ—¶é—´å†…æœªæ¥å—åˆ°è¢«æµ‹è¯•ç«¯æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;writerIdleTimeSeconds&lt;/code&gt;Â å‚æ•°ï¼šä¸ºå†™è¶…æ—¶æ—¶é—´ï¼Œå³æµ‹è¯•ç«¯ä¸€å®šæ—¶é—´å†…å‘è¢«æµ‹è¯•ç«¯å‘é€æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;allIdleTimeSeconds&lt;/code&gt;Â å‚æ•°ï¼šä¸ºè¯»æˆ–å†™è¶…æ—¶æ—¶é—´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;å¦å¤–ï¼Œæˆ‘ä»¬ä¼šåœ¨ç½‘ç»œä¸Šçœ‹åˆ°ç±»ä¼¼ã€ŠIdleStateHandler å¿ƒè·³æœºåˆ¶ã€‹è¿™æ ·æ ‡é¢˜çš„æ–‡ç« ï¼Œå®é™…ä¸Šç©ºé—²æ£€æµ‹å’Œå¿ƒè·³æœºåˆ¶æ˜¯&lt;strong&gt;ä¸¤ä»¶äº‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åªæ˜¯è¯´ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ IdleStateHandler çš„ç›®çš„ï¼Œå°±æ˜¯æ£€æµ‹åˆ°è¿æ¥å¤„äºç©ºé—²ï¼Œé€šè¿‡å¿ƒè·³åˆ¤æ–­å…¶æ˜¯å¦è¿˜æ˜¯&lt;strong&gt;æœ‰æ•ˆçš„è¿æ¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è™½ç„¶è¯´ï¼ŒTCP åè®®å±‚æä¾›äº† Keeplive æœºåˆ¶ï¼Œä½†æ˜¯è¯¥æœºåˆ¶é»˜è®¤çš„å¿ƒè·³æ—¶é—´æ˜¯ 2 å°æ—¶ï¼Œä¾èµ–æ“ä½œç³»ç»Ÿå®ç°ä¸å¤Ÿçµæ´»ã€‚å› è€Œï¼Œæˆ‘ä»¬æ‰åœ¨åº”ç”¨å±‚ä¸Šï¼Œè‡ªå·±å®ç°å¿ƒè·³æœºåˆ¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…·ä½“çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„é—®é¢˜Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/Interview/#&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŒNetty å¦‚ä½•å®ç°é‡è¿ï¼Ÿã€&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;h2 id=&#34;netty-å¦‚ä½•å®ç°é‡è¿&#34;&gt;Netty å¦‚ä½•å®ç°é‡è¿ï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å®¢æˆ·ç«¯ï¼Œé€šè¿‡ IdleStateHandler å®ç°å®šæ—¶æ£€æµ‹æ˜¯å¦ç©ºé—²ï¼Œä¾‹å¦‚è¯´ 15 ç§’ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœç©ºé—²ï¼Œåˆ™å‘æœåŠ¡ç«¯å‘èµ·å¿ƒè·³ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœå¤šæ¬¡å¿ƒè·³å¤±è´¥ï¼Œåˆ™å…³é—­å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œç„¶åé‡æ–°å‘èµ·è¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡ç«¯ï¼Œé€šè¿‡ IdleStateHandler å®ç°å®šæ—¶æ£€æµ‹å®¢æˆ·ç«¯æ˜¯å¦ç©ºé—²ï¼Œä¾‹å¦‚è¯´ 90 ç§’ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæ£€æµ‹åˆ°ç©ºé—²ï¼Œåˆ™å…³é—­å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ³¨æ„ï¼Œå¦‚æœæ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„å¿ƒè·³è¯·æ±‚ï¼Œè¦åé¦ˆä¸€ä¸ªå¿ƒè·³å“åº”ç»™å®¢æˆ·ç«¯ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä½¿å®¢æˆ·ç«¯çŸ¥é“è‡ªå·±å¿ƒè·³æˆåŠŸã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚ä¸‹è‰¿è‰¿åœ¨è‡ªå·±çš„Â &lt;a class=&#34;link&#34; href=&#34;https://github.com/YunaiV/TaroRPC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;TaroRPC&lt;/a&gt;Â ä¸­æä¾›çš„ä¸€ä¸ªç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/YunaiV/TaroRPC/blob/master/transport/transport-netty4/src/main/java/cn/iocoder/taro/transport/netty4/NettyClient.java&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NettyClient.java&lt;/a&gt;Â ä¸­ï¼Œè®¾ç½® IdleStateHandler å’Œ ClientHeartbeatHandlerã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// NettyHandler.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.addLast(&amp;#34;idleState&amp;#34;, new IdleStateHandler(TaroConstants.TRANSPORT\_CLIENT\_IDLE, TaroConstants.TRANSPORT\_CLIENT\_IDLE, 0, TimeUnit.MILLISECONDS))  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.addLast(&amp;#34;heartbeat&amp;#34;, new ClientHeartbeatHandler())  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/YunaiV/TaroRPC/blob/master/transport/transport-netty4/src/main/java/cn/iocoder/taro/transport/netty4/NettyServer.java&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;NettyServer.java&lt;/a&gt;Â ä¸­ï¼Œè®¾ç½® IdleStateHandler å’Œ ServerHeartbeatHandlerã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// NettyServer.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.addLast(&amp;#34;idleState&amp;#34;, new IdleStateHandler(0, 0, TaroConstants.TRANSPORT\_SERVER\_IDLE, TimeUnit.MILLISECONDS))  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.addLast(&amp;#34;heartbeat&amp;#34;, new ServerHeartbeatHandler())  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/YunaiV/TaroRPC/blob/master/transport/transport-netty4/src/main/java/cn/iocoder/taro/transport/netty4/heartbeat/ClientHeartbeatHandler.java&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ClientHeartbeatHandler.java&lt;/a&gt;Â ä¸­ï¼Œç¢°åˆ°ç©ºé—²ï¼Œåˆ™å‘èµ·å¿ƒè·³ã€‚ä¸è¿‡ï¼Œå¦‚ä½•é‡è¿ï¼Œæš‚æ—¶æ²¡æœ‰å®ç°ã€‚éœ€è¦è€ƒè™‘ï¼Œé‡æ–°å‘èµ·è¿æ¥å¯èƒ½ä¼šå¤±è´¥çš„æƒ…å†µã€‚å…·ä½“çš„ï¼Œå¯ä»¥çœ‹çœ‹Â &lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/linuu/article/details/51509847&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šä¸€èµ·å­¦Nettyï¼ˆåå››ï¼‰ä¹‹ Nettyç”Ÿäº§çº§çš„å¿ƒè·³å’Œé‡è¿æœºåˆ¶ã€‹&lt;/a&gt;Â æ–‡ç« ä¸­çš„ï¼ŒConnectionWatchdog çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/YunaiV/TaroRPC/blob/6ce2af911ccec9ed5dc75c7f3ebda9c758272f3b/transport/transport-netty4/src/main/java/cn/iocoder/taro/transport/netty4/heartbeat/ServerHeartbeatHandler.java&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ServerHeartbeatHandler.java&lt;/a&gt;Â ä¸­ï¼Œæ£€æµ‹åˆ°å®¢æˆ·ç«¯ç©ºé—²ï¼Œåˆ™ç›´æ¥å…³é—­è¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;netty-è‡ªå·±å®ç°çš„-bytebuf-æœ‰ä»€ä¹ˆä¼˜ç‚¹&#34;&gt;Netty è‡ªå·±å®ç°çš„ ByteBuf æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¦‚ä¸‹æ˜¯Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/ByteBuf-1-1-ByteBuf-intro/#&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠNetty å®æˆ˜ã€‹&lt;/a&gt;Â å¯¹å®ƒçš„&lt;strong&gt;ä¼˜ç‚¹æ€»&lt;/strong&gt;ç»“ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A01. å®ƒå¯ä»¥è¢«ç”¨æˆ·è‡ªå®šä¹‰çš„&lt;strong&gt;ç¼“å†²åŒºç±»å‹&lt;/strong&gt;æ‰©å±•&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A02. é€šè¿‡å†…ç½®çš„ç¬¦åˆç¼“å†²åŒºç±»å‹å®ç°äº†é€æ˜çš„&lt;strong&gt;é›¶æ‹·è´&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A03. å®¹é‡å¯ä»¥&lt;strong&gt;æŒ‰éœ€å¢é•¿&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A04. åœ¨è¯»å’Œå†™è¿™ä¸¤ç§æ¨¡å¼ä¹‹é—´åˆ‡æ¢ä¸éœ€è¦è°ƒç”¨Â &lt;code&gt;#flip()&lt;/code&gt;Â æ–¹æ³•&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A05. è¯»å’Œå†™ä½¿ç”¨äº†&lt;strong&gt;ä¸åŒçš„ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A06. æ”¯æŒæ–¹æ³•çš„&lt;strong&gt;é“¾å¼&lt;/strong&gt;è°ƒç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A07. æ”¯æŒå¼•ç”¨è®¡æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A08. æ”¯æŒ&lt;strong&gt;æ± åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ç‰¹åˆ«æ˜¯ç¬¬ A04 è¿™ç‚¹ï¼Œç›¸ä¿¡å¾ˆå¤šèƒ–å‹éƒ½è¢« NIO ByteBuffer åäººç±»çš„è¯»æ¨¡å¼å’Œå†™æ¨¡å¼ç»™å‘å“­äº†ã€‚åœ¨Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆä¸‰ï¼‰ä¹‹ Bufferã€‹&lt;/a&gt;Â ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿåæ§½è¿‡äº†ã€‚ğŸ˜ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æƒ³è¦è¿›ä¸€æ­¥æ·±å…¥çš„ï¼Œå¯ä»¥çœ‹çœ‹Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/ByteBuf-1-1-ByteBuf-intro/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Buffer ä¹‹ ByteBufï¼ˆä¸€ï¼‰ç®€ä»‹ã€‹&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;h2 id=&#34;netty-ä¸ºä»€ä¹ˆè¦å®ç°å†…å­˜ç®¡ç†&#34;&gt;Netty ä¸ºä»€ä¹ˆè¦å®ç°å†…å­˜ç®¡ç†ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;è€è‰¿è‰¿çš„ç†è§£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ Netty ä¸­ï¼ŒIO è¯»å†™å¿…å®šæ˜¯éå¸¸é¢‘ç¹çš„æ“ä½œï¼Œè€Œè€ƒè™‘åˆ°æ›´é«˜æ•ˆçš„ç½‘ç»œä¼ è¾“æ€§èƒ½ï¼ŒDirect ByteBuffer å¿…ç„¶æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚ä½†æ˜¯ Direct ByteBuffer çš„ç”³è¯·å’Œé‡Šæ”¾æ˜¯é«˜æˆæœ¬çš„æ“ä½œï¼Œé‚£ä¹ˆè¿›è¡Œ&lt;strong&gt;æ± åŒ–&lt;/strong&gt;ç®¡ç†ï¼Œå¤šæ¬¡é‡ç”¨æ˜¯æ¯”è¾ƒæœ‰æ•ˆçš„æ–¹å¼ã€‚ä½†æ˜¯ï¼Œä¸åŒäºä¸€èˆ¬äºæˆ‘ä»¬å¸¸è§çš„å¯¹è±¡æ± ã€è¿æ¥æ± ç­‰&lt;strong&gt;æ± åŒ–&lt;/strong&gt;çš„æ¡ˆä¾‹ï¼ŒByteBuffer æ˜¯æœ‰&lt;strong&gt;å¤§å°&lt;/strong&gt;ä¸€è¯´ã€‚åˆä½†æ˜¯ï¼Œç”³è¯·å¤šå¤§çš„ Direct ByteBuffer è¿›è¡Œæ± åŒ–åˆä¼šæ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå¤ªå¤§ä¼šæµªè´¹å†…å­˜ï¼Œå¤ªå°åˆä¼šå‡ºç°é¢‘ç¹çš„æ‰©å®¹å’Œå†…å­˜å¤åˆ¶ï¼ï¼ï¼æ‰€ä»¥å‘¢ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªåˆé€‚çš„å†…å­˜ç®¡ç†ç®—æ³•ï¼Œè§£å†³&lt;strong&gt;é«˜æ•ˆåˆ†é…å†…å­˜&lt;/strong&gt;çš„åŒæ—¶åˆè§£å†³&lt;strong&gt;å†…å­˜ç¢ç‰‡åŒ–&lt;/strong&gt;çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;å®˜æ–¹çš„è¯´æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;FROMÂ &lt;a class=&#34;link&#34; href=&#34;https://skyao.gitbooks.io/learning-netty/content/buffer/pooled_buffer.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠNetty å­¦ä¹ ç¬”è®° â€”â€” Pooled bufferã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Netty 4.x å¢åŠ äº† Pooled Bufferï¼Œå®ç°äº†é«˜æ€§èƒ½çš„ buffer æ± ï¼Œåˆ†é…ç­–ç•¥åˆ™æ˜¯ç»“åˆäº† buddy allocation å’Œ slab allocation çš„Â &lt;strong&gt;jemalloc&lt;/strong&gt;Â å˜ç§ï¼Œä»£ç åœ¨&lt;code&gt;io.netty.buffer.PoolArena&lt;/code&gt;Â ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å®˜æ–¹è¯´æä¾›äº†ä»¥ä¸‹ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¢‘ç¹åˆ†é…ã€é‡Šæ”¾ buffer æ—¶å‡å°‘äº† GC å‹åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ–æ–° buffer æ—¶å‡å°‘å†…å­˜å¸¦å®½æ¶ˆè€—( åˆå§‹åŒ–æ—¶ä¸å¯é¿å…çš„è¦ç»™bufferæ•°ç»„èµ‹åˆå§‹å€¼ )ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŠæ—¶çš„é‡Šæ”¾ direct buffer ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ğŸ¦…Â &lt;strong&gt;hushi55 å¤§ä½¬çš„ç†è§£&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;C/C++ å’Œ java ä¸­æœ‰ä¸ªå›´åŸï¼ŒåŸé‡Œçš„æƒ³å‡ºæ¥ï¼ŒåŸå¤–çš„æƒ³è¿›å»ï¼**&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªå›´åŸå°±æ˜¯è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Netty 4 buffer ä»‹ç»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Netty4 å¸¦æ¥ä¸€ä¸ªä¸ä¼—ä¸åŒçš„ç‰¹ç‚¹æ˜¯å…¶ ByteBuf çš„å®ç°ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œé€šè¿‡ç»´æŠ¤ä¸¤ä¸ªç‹¬ç«‹çš„è¯»å†™æŒ‡é’ˆï¼Œ è¦æ¯”Â &lt;code&gt;io.netty.buffer.ByteBuf&lt;/code&gt;Â ç®€å•ä¸å°‘ï¼Œä¹Ÿä¼šæ›´é«˜æ•ˆä¸€äº›ã€‚ä¸è¿‡ï¼ŒNetty çš„ ByteBuf å¸¦ç»™æˆ‘ä»¬çš„æœ€å¤§ä¸åŒï¼Œå°±æ˜¯ä»–ä¸å†åŸºäºä¼ ç»Ÿ JVM çš„ GC æ¨¡å¼ï¼Œç›¸åï¼Œå®ƒé‡‡ç”¨äº†ç±»ä¼¼äº C++ ä¸­çš„ malloc/free çš„æœºåˆ¶ï¼Œéœ€è¦å¼€å‘äººå‘˜æ¥æ‰‹åŠ¨ç®¡ç†å›æ”¶ä¸é‡Šæ”¾ã€‚ä»æ‰‹åŠ¨å†…å­˜ç®¡ç†ä¸Šå‡åˆ°GCï¼Œæ˜¯ä¸€ä¸ªå†å²çš„å·¨å¤§è¿›æ­¥ï¼Œ ä¸è¿‡ï¼Œåœ¨20å¹´åï¼Œå±…ç„¶æœ‰æ›²çº¿çš„å›å½’åˆ°äº†æ‰‹åŠ¨å†…å­˜ç®¡ç†æ¨¡å¼ï¼Œæ­£å°è¯äº†é©¬å…‹æ€å“²å­¦è§‚ï¼šÂ &lt;strong&gt;ç¤¾ä¼šæ€»æ˜¯åœ¨èºæ—‹å¼å‰è¿›çš„ï¼Œæ²¡æœ‰æ°¸è¿œçš„æœ€å¥½ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â‘  GC å†…å­˜ç®¡ç†åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;çš„ç¡®ï¼Œå°±å†…å­˜ç®¡ç†è€Œè¨€ï¼ŒGCå¸¦ç»™æˆ‘ä»¬çš„ä»·å€¼æ˜¯ä¸è¨€è€Œå–»çš„ï¼Œä¸ä»…å¤§å¤§çš„é™ä½äº†ç¨‹åºå‘˜çš„å¿ƒæ™ºåŒ…è¢±ï¼Œ è€Œä¸”ï¼Œä¹Ÿæå¤§çš„å‡å°‘äº†å†…å­˜ç®¡ç†å¸¦æ¥çš„ Crash å›°æ‰°ï¼Œä¸ºå‡½æ•°å¼ç¼–ç¨‹ï¼ˆå¤§é‡çš„ä¸´æ—¶å¯¹è±¡ï¼‰ã€è„šæœ¬è¯­è¨€ç¼–ç¨‹å¸¦æ¥äº†æ˜¥å¤©ã€‚ å¹¶ä¸”ï¼Œé«˜æ•ˆçš„GCç®—æ³•ä¹Ÿè®©å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç¨‹åºå¯ä»¥æœ‰æ›´é«˜çš„æ‰§è¡Œæ•ˆç‡ã€‚ ä¸è¿‡ï¼Œä¹Ÿæœ‰å¾ˆå¤šçš„æƒ…å†µï¼Œå¯èƒ½æ˜¯æ‰‹å·¥å†…å­˜ç®¡ç†æ›´ä¸ºåˆé€‚çš„ã€‚è­¬å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¯¹äºç±»ä¼¼äºä¸šåŠ¡é€»è¾‘ç›¸å¯¹ç®€å•ï¼Œè­¬å¦‚ç½‘ç»œè·¯ç”±è½¬å‘å‹åº”ç”¨ï¼ˆå¾ˆå¤šerlangåº”ç”¨å…¶å®æ˜¯è¿™ç§ç±»å‹ï¼‰ï¼Œ ä½†æ˜¯ QPS éå¸¸é«˜ï¼Œæ¯”å¦‚1Mçº§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨æ¯æ¬¡å¤„ç†ä¸­å³ä¾¿äº§ç”Ÿ1Kçš„åƒåœ¾ï¼Œéƒ½ä¼šå¯¼è‡´é¢‘ç¹çš„GCäº§ç”Ÿã€‚ åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œerlang çš„æŒ‰è¿›ç¨‹å›æ”¶æ¨¡å¼ï¼Œæˆ–è€…æ˜¯ C/C++ çš„æ‰‹å·¥å›æ”¶æœºåˆ¶ï¼Œæ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cache å‹åº”ç”¨ï¼Œç”±äºå¯¹è±¡çš„å­˜åœ¨å‘¨æœŸå¤ªé•¿ï¼ŒGC åŸºæœ¬ä¸Šå°±å˜å¾—æ²¡æœ‰ä»·å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œç†è®ºä¸Šï¼Œå°´å°¬çš„GCå®é™…ä¸Šæ¯”è¾ƒé€‚åˆäºå¤„ç†ä»‹äºè¿™ 2 è€…ä¹‹é—´çš„æƒ…å†µï¼š å¯¹è±¡åˆ†é…çš„é¢‘ç¹ç¨‹åº¦ç›¸æ¯”æ•°æ®å¤„ç†çš„æ—¶é—´è¦å°‘å¾—å¤šçš„ï¼Œä½†åˆæ˜¯ç›¸å¯¹çŸ­æš‚çš„ï¼Œ å…¸å‹çš„ï¼Œå¯¹äºOLTPå‹çš„æœåŠ¡ï¼Œå¤„ç†èƒ½åŠ›åœ¨ 1K QPS é‡çº§ï¼Œæ¯ä¸ªè¯·æ±‚çš„å¯¹è±¡åˆ†é…åœ¨ 10K-50K é‡çº§ï¼Œ èƒ½å¤Ÿåœ¨ 5-10s çš„æ—¶é—´å†…è¿›è¡Œä¸€ æ¬¡younger GC ï¼Œæ¯æ¬¡GCçš„æ—¶é—´å¯ä»¥æ§åˆ¶åœ¨ 10ms æ°´å¹³ä¸Šï¼Œ è¿™ç±»çš„åº”ç”¨ï¼Œå®åœ¨æ˜¯å¤ªé€‚åˆ GC è¡Œçš„æ¨¡å¼äº†ï¼Œè€Œä¸”ç»“åˆ Java é«˜æ•ˆçš„åˆ†ä»£ GC ï¼Œç®€ç›´å°±æ˜¯ä¸€ä¸ªç†æƒ³æ­é…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â‘¡ å½±å“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Netty 4 å¼•å…¥äº†æ‰‹å·¥å†…å­˜çš„æ¨¡å¼ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯ä¸€å¤§åˆ›æ–°ï¼Œè¿™ç§æ¨¡å¼ç”šè‡³äºä¼šå»¶å±•ï¼Œ åº”ç”¨åˆ° Cache åº”ç”¨ä¸­ã€‚å®é™…ä¸Šï¼Œç»“åˆ JVM çš„è¯¸å¤šä¼˜ç§€ç‰¹æ€§ï¼Œå¦‚æœç”¨ Java æ¥å®ç°ä¸€ä¸ª Redis å‹ Cacheã€ æˆ–è€… In-memory SQL Engineï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª Mongo DBï¼Œæˆ‘è§‰å¾—ç›¸æ¯” C/C++ è€Œè¨€ï¼Œéƒ½è¦æ›´ç®€å•å¾ˆå¤šã€‚ å®é™…ä¸Šï¼ŒJVM ä¹Ÿå·²ç»æä¾›äº†æ‰“é€šè¿™ç§æŠ€æœ¯çš„æœºåˆ¶ï¼Œå°±æ˜¯ Direct Memory å’Œ Unsafe å¯¹è±¡ã€‚ åŸºäºè¿™ä¸ªåŸºç¡€ï¼Œæˆ‘ä»¬å¯ä»¥åƒ C è¯­è¨€ä¸€æ ·ç›´æ¥æ“ä½œå†…å­˜ã€‚å®é™…ä¸Šï¼ŒNetty4 çš„ ByteBuf ä¹Ÿæ˜¯åŸºäºè¿™ä¸ªåŸºç¡€çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ›´å¤šè¯¦ç»†çš„å†…å®¹ï¼Œèƒ–å‹å¯ä»¥çœ‹çœ‹Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/ByteBuf-3-1-Jemalloc-intro/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Buffer ä¹‹ Jemallocï¼ˆä¸€ï¼‰ç®€ä»‹ã€‹&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;h2 id=&#34;netty-å¦‚ä½•å®å¿ƒå†…å­˜ç®¡ç†&#34;&gt;Netty å¦‚ä½•å®å¿ƒå†…å­˜ç®¡ç†ï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸ªé¢˜ç›®ï¼Œç®€å•äº†è§£å³å¯ï¼Œå¦‚æœæ·±å…¥ï¼Œå°±è¦å»çœ‹Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/categories/Netty/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Bufferã€‹&lt;/a&gt;Â ç›¸å…³çš„æºç ã€‚è€Œä¸”ï¼Œçœ‹å®Œå°±å¿˜è®°ï¼Œæ¯”è¾ƒéš¾å’Œå¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œçœ‹æ‡‚é‚£ä¸€åˆ»ï¼Œä¹è¶£æ— ç©·ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Netty å†…å­˜ç®¡ç†æœºåˆ¶ï¼ŒåŸºäºÂ &lt;a class=&#34;link&#34; href=&#34;http://www.cnhalo.net/2016/06/13/memory-optimize/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Jemalloc&lt;/a&gt;Â ç®—æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆä¼šé¢„ç”³è¯·ä¸€å¤§å—å†…å­˜Â &lt;strong&gt;Arena&lt;/strong&gt;Â ï¼ŒArena ç”±è®¸å¤š Chunk ç»„æˆï¼Œè€Œæ¯ä¸ª Chunk é»˜è®¤ç”±2048ä¸ªpageç»„æˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Chunk&lt;/strong&gt;Â é€šè¿‡Â &lt;strong&gt;AVL&lt;/strong&gt;Â æ ‘çš„å½¢å¼ç»„ç»‡Â &lt;strong&gt;Page&lt;/strong&gt;Â ï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ª Page ï¼Œè€Œä¸­é—´èŠ‚ç‚¹è¡¨ç¤ºå†…å­˜åŒºåŸŸï¼ŒèŠ‚ç‚¹è‡ªå·±è®°å½•å®ƒåœ¨æ•´ä¸ª Arena ä¸­çš„åç§»åœ°å€ã€‚å½“åŒºåŸŸè¢«åˆ†é…å‡ºå»åï¼Œä¸­é—´èŠ‚ç‚¹ä¸Šçš„æ ‡è®°ä½ä¼šè¢«æ ‡è®°ï¼Œè¿™æ ·å°±è¡¨ç¤ºè¿™ä¸ªä¸­é—´èŠ‚ç‚¹ä»¥ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å·²è¢«åˆ†é…äº†ã€‚å¤§äº 8k çš„å†…å­˜åˆ†é…åœ¨Â &lt;strong&gt;PoolChunkList&lt;/strong&gt;Â ä¸­ï¼Œè€ŒÂ &lt;strong&gt;PoolSubpage&lt;/strong&gt;Â ç”¨äºåˆ†é…å°äº 8k çš„å†…å­˜ï¼Œå®ƒä¼šæŠŠä¸€ä¸ª page åˆ†å‰²æˆå¤šæ®µï¼Œè¿›è¡Œå†…å­˜åˆ†é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-netty-çš„å†…å­˜æ³„éœ²æ£€æµ‹æ˜¯å¦‚ä½•è¿›è¡Œå®ç°çš„&#34;&gt;ä»€ä¹ˆæ˜¯ Netty çš„å†…å­˜æ³„éœ²æ£€æµ‹ï¼Ÿæ˜¯å¦‚ä½•è¿›è¡Œå®ç°çš„ï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;è‰¿è‰¿ï¼šè¿™æ˜¯ä¸€é“æ¯”è¾ƒå¤æ‚çš„é¢è¯•é¢˜ï¼Œå¯ä»¥æŒ‘æˆ˜ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¨èé˜…è¯»å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://calvin1978.blogcn.com/articles/netty-leak.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠNetty ä¹‹æœ‰æ•ˆè§„é¿å†…å­˜æ³„æ¼ã€‹&lt;/a&gt;Â ä»åŸç†å±‚é¢è§£é‡Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/ByteBuf-1-3-ByteBuf-resource-leak-detector/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç è§£æ â€”â€” Buffer ä¹‹ ByteBufï¼ˆä¸‰ï¼‰å†…å­˜æ³„éœ²æ£€æµ‹ã€‹&lt;/a&gt;Â ä»æºç å±‚é¢è§£è¯»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦å¤–ï¼ŒNetty çš„å†…å­˜æ³„éœ²æ£€æµ‹çš„å®ç°ï¼Œæ˜¯å¯¹ WeakReference å’Œ ReferenceQueue å¾ˆå¥½çš„å­¦ä¹ ã€‚ä¹‹å‰å¾ˆå¤šèƒ–å‹åœ¨çœ‹äº†Â &lt;a class=&#34;link&#34; href=&#34;http://www.iocoder.cn/Fight/Four-reference-types-in-Java&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠJava ä¸­çš„å››ç§å¼•ç”¨ç±»å‹ã€‹&lt;/a&gt;Â ä¹‹åï¼Œæ˜¯ä¸å¤ªç†è§£ Java çš„å››ç§å¼•ç”¨çš„å…·ä½“ä½¿ç”¨åœºæ™¯ï¼Œè¿™ä¸å°±æ¥äº†ä¹ˆã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>nettyæºç åˆ†æäºŒ</title>
        <link>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%8C/</link>
        <pubDate>Thu, 04 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%8C/</guid>
        <description>&lt;p&gt;ç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆäºŒï¼‰ä¹‹ Channel&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¦‚è¿°
åœ¨ Java NIO ä¸­ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„ IO æ“ä½œéƒ½æ˜¯ä» Channel å¼€å§‹ã€‚æ•°æ®å¯ä»¥ä» Channel è¯»å–åˆ° Buffer ä¸­ï¼Œä¹Ÿå¯ä»¥ä» Buffer å†™åˆ° Channel ä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Buffer &amp;lt;=&amp;gt; Channel
Buffer &amp;lt;=&amp;gt; Channel&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;NIO Channel å¯¹æ¯” Java Stream
NIO Channel ç±»ä¼¼ Java Stream ï¼Œä½†åˆæœ‰å‡ ç‚¹ä¸åŒï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹äºåŒä¸€ä¸ª Channel ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®ƒè¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘å®ƒå†™å…¥æ•°æ®ã€‚è€Œå¯¹äºåŒä¸€ä¸ª Stream ï¼Œé€šç•…è¦ä¹ˆåªèƒ½è¯»ï¼Œè¦ä¹ˆåªèƒ½å†™ï¼ŒäºŒé€‰ä¸€( æœ‰äº›æ–‡ç« ä¹Ÿæè¿°æˆâ€œå•å‘â€ï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ„æ€ )ã€‚
Channel å¯ä»¥éé˜»å¡çš„è¯»å†™ IO æ“ä½œï¼Œè€Œ Stream åªèƒ½é˜»å¡çš„è¯»å†™ IO æ“ä½œã€‚
Channel å¿…é¡»é…åˆ Buffer ä½¿ç”¨ï¼Œæ€»æ˜¯å…ˆè¯»å–åˆ°ä¸€ä¸ª Buffer ä¸­ï¼Œåˆæˆ–è€…æ˜¯å‘ä¸€ä¸ª Buffer å†™å…¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ— æ³•ç»•è¿‡ Buffer ï¼Œç›´æ¥å‘ Channel å†™å…¥æ•°æ®ã€‚
3. Channel çš„å®ç°
Channel åœ¨ Java ä¸­ï¼Œä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œjava.nio.channels.Channel ï¼Œå®šä¹‰äº† IO æ“ä½œçš„è¿æ¥ä¸å…³é—­ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;public interface Channel extends Closeable {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/**
 * åˆ¤æ–­æ­¤é€šé“æ˜¯å¦å¤„äºæ‰“å¼€çŠ¶æ€ã€‚ 
 */
public boolean isOpen();

/**
 *å…³é—­æ­¤é€šé“ã€‚
 */
public void close() throws IOException;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
Channel æœ‰éå¸¸å¤šçš„å®ç°ç±»ï¼Œæœ€ä¸ºé‡è¦çš„å››ä¸ª Channel å®ç°ç±»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;SocketChannel ï¼šä¸€ä¸ªå®¢æˆ·ç«¯ç”¨æ¥å‘èµ· TCP çš„ Channel ã€‚
ServerSocketChannel ï¼šä¸€ä¸ªæœåŠ¡ç«¯ç”¨æ¥ç›‘å¬æ–°è¿›æ¥çš„è¿æ¥çš„ TCP çš„ Channel ã€‚å¯¹äºæ¯ä¸€ä¸ªæ–°è¿›æ¥çš„è¿æ¥ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ SocketChannel ã€‚
DatagramChannel ï¼šé€šè¿‡ UDP è¯»å†™æ•°æ®ã€‚
FileChannel ï¼šä»æ–‡ä»¶ä¸­ï¼Œè¯»å†™æ•°æ®ã€‚
è€è‰¿è‰¿ï¼šå› ä¸º ã€ŠJava NIO ç³»åˆ—æ•™ç¨‹ã€‹ å¯¹ä¸Šè¿°çš„ Channel è§£é‡Šçš„éå¸¸ä¸é”™ï¼Œæˆ‘å°±ç›´æ¥å¼•ç”¨å•¦ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä½¿ç”¨ Netty æ—¶ï¼Œä¸»è¦ä½¿ç”¨ TCP åè®®ï¼Œæ‰€ä»¥èƒ–å‹å¯ä»¥åªçœ‹ ã€Œ3.2 SocketChannelã€ å’Œ ã€Œ3.1 ServerSocketChannelã€ ã€‚&lt;/p&gt;
&lt;p&gt;3.1 ServerSocketChannel
ã€ŠJava NIOç³»åˆ—æ•™ç¨‹ï¼ˆä¹ï¼‰ ServerSocketChannelã€‹&lt;/p&gt;
&lt;p&gt;3.2 SocketChannel
ã€ŠJava NIO ç³»åˆ—æ•™ç¨‹ï¼ˆå…«ï¼‰ SocketChannelã€‹&lt;/p&gt;
&lt;p&gt;3.3 DatagramChannel
ã€ŠJava NIOç³»åˆ—æ•™ç¨‹ï¼ˆåï¼‰ Java NIO DatagramChannelã€‹&lt;/p&gt;
&lt;p&gt;3.4 FileChannel
ã€ŠJava NIOç³»åˆ—æ•™ç¨‹ï¼ˆä¸ƒï¼‰ FileChannelã€‹&lt;/p&gt;
</description>
        </item>
        <item>
        <title>nettyæºç åˆ†æä¸‰</title>
        <link>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%89/</link>
        <pubDate>Thu, 04 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%89/</guid>
        <description>&lt;h1 id=&#34;1-æ¦‚è¿°&#34;&gt;1. æ¦‚è¿°&lt;/h1&gt;
&lt;p&gt;ä¸€ä¸ª Buffer ï¼Œæœ¬è´¨ä¸Šæ˜¯å†…å­˜ä¸­çš„ä¸€å—ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®å†™å…¥è¿™å—å†…å­˜ï¼Œä¹‹åä»è¿™å—å†…å­˜è·å–æ•°æ®ã€‚é€šè¿‡å°†è¿™å—å†…å­˜å°è£…æˆ NIO Buffer å¯¹è±¡ï¼Œå¹¶æä¾›äº†ä¸€ç»„å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹è¯¥å—å†…å­˜çš„è¯»å†™ã€‚&lt;/p&gt;
&lt;p&gt;Buffer åœ¨Â &lt;code&gt;java.nio&lt;/code&gt;Â åŒ…ä¸­å®ç°ï¼Œè¢«å®šä¹‰æˆ&lt;strong&gt;æŠ½è±¡ç±»&lt;/strong&gt;ï¼Œä»è€Œå®ç°ä¸€ç»„å¸¸ç”¨çš„æ–¹æ³•ã€‚æ•´ä½“ç±»å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/images/Netty/2018_02_10/01.png&#34;  title=&#34;ç±»å›¾&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2018_02_10/01.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;ç±»å›¾&#34;
	
	
&gt;&lt;/a&gt;ç±»å›¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥å°† Buffer ç†è§£ä¸º&lt;strong&gt;ä¸€ä¸ªæ•°ç»„çš„å°è£…&lt;/strong&gt;ï¼Œä¾‹å¦‚ IntBufferã€CharBufferã€ByteBuffer ç­‰åˆ†åˆ«å¯¹åº”Â &lt;code&gt;int[]&lt;/code&gt;ã€&lt;code&gt;char[]&lt;/code&gt;ã€&lt;code&gt;byte[]&lt;/code&gt;Â ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MappedByteBuffer ç”¨äºå®ç°å†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œä¸æ˜¯æœ¬æ–‡å…³æ³¨çš„é‡ç‚¹ã€‚å› æ­¤ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥è‡ªå·± Google äº†è§£ï¼Œè¿˜æ˜¯è›®æœ‰è¶£çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer2-e59fbae69cace5b19ee680a7-2-åŸºæœ¬å±æ€§2-åŸºæœ¬å±æ€§&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#2-%E5%9F%BA%E6%9C%AC%E5%B1%9E%E6%80%A7&#34;  title=&#34;2. åŸºæœ¬å±æ€§&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2. åŸºæœ¬å±æ€§&lt;/h1&gt;
&lt;p&gt;Buffer ä¸­æœ‰Â &lt;strong&gt;4&lt;/strong&gt;Â ä¸ªéå¸¸é‡è¦çš„å±æ€§ï¼š&lt;code&gt;capacity&lt;/code&gt;ã€&lt;code&gt;limit&lt;/code&gt;ã€&lt;code&gt;position&lt;/code&gt;ã€&lt;code&gt;mark&lt;/code&gt;Â ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract class Buffer {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // Invariants: mark &amp;lt;= position &amp;lt;= limit &amp;lt;= capacity  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; private int mark = -1;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; private int position = 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; private int limit;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; private int capacity;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // Used only by direct buffers  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // NOTE: hoisted here for speed in JNI GetDirectBufferAddress  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; long address;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; Buffer(int mark, int pos, int lim, int cap) { Â  Â  Â  // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (cap &amp;lt; 0)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IllegalArgumentException(&amp;#34;Negative capacity: &amp;#34; \+ cap);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; this.capacity = cap;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; limit(lim);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position(pos);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (mark &amp;gt;= 0) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (mark &amp;gt; pos)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IllegalArgumentException(&amp;#34;mark &amp;gt; position: (&amp;#34;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; \+ mark + &amp;#34; \&amp;gt; &amp;#34; \+ pos + &amp;#34;)&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; this.mark = mark;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // ... çœç•¥å…·ä½“æ–¹æ³•çš„ä»£ç   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;capacity&lt;/code&gt;Â å±æ€§ï¼Œå®¹é‡ï¼ŒBuffer èƒ½å®¹çº³çš„æ•°æ®å…ƒç´ çš„&lt;strong&gt;æœ€å¤§å€¼&lt;/strong&gt;ã€‚è¿™ä¸€å®¹é‡åœ¨ Buffer åˆ›å»ºæ—¶è¢«èµ‹å€¼ï¼Œå¹¶ä¸”&lt;strong&gt;æ°¸è¿œä¸èƒ½è¢«ä¿®æ”¹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Buffer åˆ†æˆ&lt;strong&gt;å†™æ¨¡å¼&lt;/strong&gt;å’Œ&lt;strong&gt;è¯»æ¨¡å¼&lt;/strong&gt;ä¸¤ç§æƒ…å†µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/images/Netty/2018_02_10/02.png&#34;  title=&#34;å†™æ¨¡å¼ v.s. è¯»æ¨¡å¼&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2018_02_10/02.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;å†™æ¨¡å¼ v.s. è¯»æ¨¡å¼&#34;
	
	
&gt;&lt;/a&gt;å†™æ¨¡å¼ v.s. è¯»æ¨¡å¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ç§æ¨¡å¼ä¸‹ï¼Œ&lt;code&gt;position&lt;/code&gt;Â å’ŒÂ &lt;code&gt;limit&lt;/code&gt;Â å±æ€§åˆ†åˆ«ä»£è¡¨ä¸åŒçš„å«ä¹‰ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥åˆ†åˆ«çœ‹çœ‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;position&lt;/code&gt;Â å±æ€§ï¼Œä½ç½®ï¼Œåˆå§‹å€¼ä¸º 0 ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†™&lt;/strong&gt;æ¨¡å¼ä¸‹ï¼Œæ¯å¾€ Buffer ä¸­å†™å…¥ä¸€ä¸ªå€¼ï¼Œ&lt;code&gt;position&lt;/code&gt;Â å°±è‡ªåŠ¨åŠ  1 ï¼Œä»£è¡¨ä¸‹ä¸€æ¬¡çš„å†™å…¥ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»&lt;/strong&gt;æ¨¡å¼ä¸‹ï¼Œæ¯ä» Buffer ä¸­è¯»å–ä¸€ä¸ªå€¼ï¼Œ&lt;code&gt;position&lt;/code&gt;Â å°±è‡ªåŠ¨åŠ  1 ï¼Œä»£è¡¨ä¸‹ä¸€æ¬¡çš„è¯»å–ä½ç½®ã€‚(Â &lt;em&gt;å’Œå†™æ¨¡å¼ç±»ä¼¼&lt;/em&gt;Â )&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;limit&lt;/code&gt;Â å±æ€§ï¼Œä¸Šé™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†™&lt;/strong&gt;æ¨¡å¼ä¸‹ï¼Œä»£è¡¨æœ€å¤§èƒ½å†™å…¥çš„æ•°æ®ä¸Šé™ä½ç½®ï¼Œè¿™ä¸ªæ—¶å€™Â &lt;code&gt;limit&lt;/code&gt;Â ç­‰äºÂ &lt;code&gt;capacity&lt;/code&gt;Â ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»&lt;/strong&gt;æ¨¡å¼ä¸‹ï¼Œåœ¨ Buffer å®Œæˆæ‰€æœ‰æ•°æ®å†™å…¥åï¼Œé€šè¿‡è°ƒç”¨Â &lt;code&gt;#flip()&lt;/code&gt;Â æ–¹æ³•ï¼Œåˆ‡æ¢åˆ°&lt;strong&gt;è¯»&lt;/strong&gt;æ¨¡å¼ã€‚æ­¤æ—¶ï¼Œ&lt;code&gt;limit&lt;/code&gt;Â ç­‰äº Buffer ä¸­å®é™…çš„æ•°æ®å¤§å°ã€‚å› ä¸º Buffer ä¸ä¸€å®šè¢«å†™æ»¡ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨Â &lt;code&gt;capacity&lt;/code&gt;Â ä½œä¸ºå®é™…çš„æ•°æ®å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;mark&lt;/code&gt;Â å±æ€§ï¼Œæ ‡è®°ï¼Œé€šè¿‡Â &lt;code&gt;#mark()&lt;/code&gt;Â æ–¹æ³•ï¼Œè®°å½•å½“å‰Â &lt;code&gt;position&lt;/code&gt;Â ï¼›é€šè¿‡Â &lt;code&gt;reset()&lt;/code&gt;Â æ–¹æ³•ï¼Œæ¢å¤Â &lt;code&gt;position&lt;/code&gt;Â ä¸ºæ ‡è®°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å†™&lt;/strong&gt;æ¨¡å¼ä¸‹ï¼Œæ ‡è®°ä¸Šä¸€æ¬¡å†™ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»&lt;/strong&gt;æ¨¡å¼ä¸‹ï¼Œæ ‡è®°ä¸Šä¸€æ¬¡è¯»ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»ä»£ç æ³¨é‡Šä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå››ä¸ªå±æ€§æ€»æ˜¯éµå¾ªå¦‚ä¸‹å¤§å°å…³ç³»ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mark &amp;lt;= position &amp;lt;= limit &amp;lt;= capacity  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;å†™åˆ°æ­¤å¤„ï¼Œå¿ä¸ä½åæ§½äº†ä¸‹ï¼ŒBuffer çš„è¯»æ¨¡å¼å’Œå†™æ¨¡å¼ï¼Œæˆ‘è®¤ä¸ºæ˜¯æœ‰ä¸€ç‚¹â€œ&lt;strong&gt;ç³Ÿç³•&lt;/strong&gt;â€ã€‚ç›¸ä¿¡å¤§å¤šæ•°äººåœ¨ç†è§£çš„æ—¶å€™ï¼Œéƒ½ä¼šå¼€å§‹ä¸€è„¸æ‡µé€¼çš„çŠ¶æ€ã€‚ç›¸æ¯”è¾ƒæ¥è¯´ï¼ŒNetty çš„ ByteBuf å°±&lt;strong&gt;ä¼˜é›…&lt;/strong&gt;çš„éå¸¸å¤šï¼ŒåŸºæœ¬å±æ€§è®¾è®¡å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0 &amp;lt;= readerIndex &amp;lt;= writerIndex &amp;lt;= capacity  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;é€šè¿‡Â &lt;code&gt;readerIndex&lt;/code&gt;Â å’ŒÂ &lt;code&gt;writerIndex&lt;/code&gt;Â ä¸¤ä¸ªå±æ€§ï¼Œé¿å…å‡ºç°è¯»æ¨¡å¼å’Œå†™æ¨¡å¼çš„åˆ‡æ¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer3-e5889be5bbba-buffer-3-åˆ›å»º-buffer3-åˆ›å»º-buffer&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#3-%E5%88%9B%E5%BB%BA-Buffer&#34;  title=&#34;3. åˆ›å»º Buffer&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3. åˆ›å»º Buffer&lt;/h1&gt;
&lt;p&gt;â‘  æ¯ä¸ª Buffer å®ç°ç±»ï¼Œéƒ½æä¾›äº†Â &lt;code&gt;#allocate(int capacity)&lt;/code&gt;Â é™æ€æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿ&lt;strong&gt;å®ä¾‹åŒ–&lt;/strong&gt;ä¸€ä¸ª Buffer å¯¹è±¡ã€‚ä»¥ ByteBuffer ä¸¾ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ByteBuffer.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static ByteBuffer allocate(int capacity) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (capacity &amp;lt; 0)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IllegalArgumentException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return new HeapByteBuffer(capacity, capacity);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;ByteBuffer å®é™…æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œè¿”å›çš„æ˜¯å®ƒçš„&lt;strong&gt;åŸºäºå †å†…( Non-Direct )å†…å­˜&lt;/strong&gt;çš„å®ç°ç±» HeapByteBuffer çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;â‘¡ æ¯ä¸ª Buffer å®ç°ç±»ï¼Œéƒ½æä¾›äº†Â &lt;code&gt;#wrap(array)&lt;/code&gt;Â é™æ€æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬å°†å…¶å¯¹åº”çš„æ•°ç»„&lt;strong&gt;åŒ…è£…&lt;/strong&gt;æˆä¸€ä¸ª Buffer å¯¹è±¡ã€‚è¿˜æ˜¯ä»¥ ByteBuffer ä¸¾ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ByteBuffer.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static ByteBuffer wrap(byte\[\] array, int offset, int length){  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; try {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return new HeapByteBuffer(array, offset, length);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } catch (IllegalArgumentException x) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IndexOutOfBoundsException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static ByteBuffer wrap(byte\[\] array) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return wrap(array, 0, array.length);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;å’ŒÂ &lt;code&gt;#allocate(int capacity)&lt;/code&gt;Â é™æ€æ–¹æ³•&lt;strong&gt;ä¸€æ ·&lt;/strong&gt;ï¼Œè¿”å›çš„ä¹Ÿæ˜¯ HeapByteBuffer çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;â‘¢ æ¯ä¸ª Buffer å®ç°ç±»ï¼Œéƒ½æä¾›äº†Â &lt;code&gt;#allocateDirect(int capacity)&lt;/code&gt;Â é™æ€æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿ&lt;strong&gt;å®ä¾‹åŒ–&lt;/strong&gt;ä¸€ä¸ª Buffer å¯¹è±¡ã€‚ä»¥ ByteBuffer ä¸¾ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ByteBuffer.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static ByteBuffer allocateDirect(int capacity) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return new DirectByteBuffer(capacity);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;å’ŒÂ &lt;code&gt;#allocate(int capacity)&lt;/code&gt;Â é™æ€æ–¹æ³•&lt;strong&gt;ä¸ä¸€æ ·&lt;/strong&gt;ï¼Œè¿”å›çš„æ˜¯å®ƒçš„&lt;strong&gt;åŸºäºå †å¤–( Direct )å†…å­˜&lt;/strong&gt;çš„å®ç°ç±» DirectByteBuffer çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-3-buffer3-1-e585b3e4ba8e-direct-buffer-e5928c-non-direct-buffer-e79a84e58cbae588ab-31-å…³äº-direct-buffer-å’Œ-non-direct-buffer-çš„åŒºåˆ«31-å…³äº-direct-buffer-å’Œ-non-direct-buffer-çš„åŒºåˆ«&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#3-1-%E5%85%B3%E4%BA%8E-Direct-Buffer-%E5%92%8C-Non-Direct-Buffer-%E7%9A%84%E5%8C%BA%E5%88%AB&#34;  title=&#34;3.1 å…³äº Direct Buffer å’Œ Non-Direct Buffer çš„åŒºåˆ«&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.1 å…³äº Direct Buffer å’Œ Non-Direct Buffer çš„åŒºåˆ«&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;FROMÂ &lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000006824155&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠJava NIO çš„å‰ç”Ÿä»Šä¸– ä¹‹ä¸‰ NIO Buffer è¯¦è§£ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Direct Buffer:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‰€åˆ†é…çš„å†…å­˜ä¸åœ¨ JVM å †ä¸Š, ä¸å— GC çš„ç®¡ç†.(ä½†æ˜¯ Direct Buffer çš„ Java å¯¹è±¡æ˜¯ç”± GC ç®¡ç†çš„, å› æ­¤å½“å‘ç”Ÿ GC, å¯¹è±¡è¢«å›æ”¶æ—¶, Direct Buffer ä¹Ÿä¼šè¢«é‡Šæ”¾)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› ä¸º Direct Buffer ä¸åœ¨ JVM å †ä¸Šåˆ†é…, å› æ­¤ Direct Buffer å¯¹åº”ç”¨ç¨‹åºçš„å†…å­˜å ç”¨çš„å½±å“å°±ä¸é‚£ä¹ˆæ˜æ˜¾(å®é™…ä¸Šè¿˜æ˜¯å ç”¨äº†è¿™ä¹ˆå¤šå†…å­˜, ä½†æ˜¯ JVM ä¸å¥½ç»Ÿè®¡åˆ°é JVM ç®¡ç†çš„å†…å­˜.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”³è¯·å’Œé‡Šæ”¾ Direct Buffer çš„å¼€é”€æ¯”è¾ƒå¤§. å› æ­¤æ­£ç¡®çš„ä½¿ç”¨ Direct Buffer çš„æ–¹å¼æ˜¯åœ¨åˆå§‹åŒ–æ—¶ç”³è¯·ä¸€ä¸ª Buffer, ç„¶åä¸æ–­å¤ç”¨æ­¤ buffer, åœ¨ç¨‹åºç»“æŸåæ‰é‡Šæ”¾æ­¤ buffer.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ Direct Buffer æ—¶, å½“è¿›è¡Œä¸€äº›åº•å±‚çš„ç³»ç»Ÿ IO æ“ä½œæ—¶, æ•ˆç‡ä¼šæ¯”è¾ƒé«˜, å› ä¸ºæ­¤æ—¶ JVM ä¸éœ€è¦æ‹·è´ buffer ä¸­çš„å†…å­˜åˆ°ä¸­é—´ä¸´æ—¶ç¼“å†²åŒºä¸­.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Non-Direct Buffer:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›´æ¥åœ¨ JVM å †ä¸Šè¿›è¡Œå†…å­˜çš„åˆ†é…, æœ¬è´¨ä¸Šæ˜¯ byte[] æ•°ç»„çš„å°è£….&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› ä¸º Non-Direct Buffer åœ¨ JVM å †ä¸­, å› æ­¤å½“è¿›è¡Œæ“ä½œç³»ç»Ÿåº•å±‚ IO æ“ä½œä¸­æ—¶, ä¼šå°†æ­¤ buffer çš„å†…å­˜å¤åˆ¶åˆ°ä¸­é—´ä¸´æ—¶ç¼“å†²åŒºä¸­. å› æ­¤ Non-Direct Buffer çš„æ•ˆç‡å°±è¾ƒä½.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¬”è€…ä¹‹å‰ç ”ç©¶ JVM å†…å­˜æ—¶ï¼Œä¹Ÿæ•´ç†è¿‡ä¸€ä¸ªè„‘å›¾ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹å¯ä»¥ä¸‹è½½ï¼š&lt;a class=&#34;link&#34; href=&#34;http://static.iocoder.cn/Java%E5%86%85%E5%AD%98.xmind&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä¼ é€é—¨&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer4-e59091-buffer-e58699e585a5e695b0e68dae-4-å‘-buffer-å†™å…¥æ•°æ®4-å‘-buffer-å†™å…¥æ•°æ®&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#4-%E5%90%91-Buffer-%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE&#34;  title=&#34;4. å‘ Buffer å†™å…¥æ•°æ®&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;4. å‘ Buffer å†™å…¥æ•°æ®&lt;/h1&gt;
&lt;p&gt;æ¯ä¸ª Buffer å®ç°ç±»ï¼Œéƒ½æä¾›äº†Â &lt;code&gt;#put(...)&lt;/code&gt;Â æ–¹æ³•ï¼Œå‘ Buffer å†™å…¥æ•°æ®ã€‚ä»¥ ByteBuffer ä¸¾ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// å†™å…¥ byte  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract ByteBuffer put(byte b);   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract ByteBuffer put(int index, byte b);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// å†™å…¥ byte æ•°ç»„  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final ByteBuffer put(byte\[\] src) { ... }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public ByteBuffer put(byte\[\] src, int offset, int length) {...}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ... çœç•¥ï¼Œè¿˜æœ‰å…¶ä»– put æ–¹æ³•  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯¹äº Buffer æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æ“ä½œå°±æ˜¯ï¼Œæˆ‘ä»¬è¦è®²æ¥è‡ª Channel çš„æ•°æ®å†™å…¥åˆ° Buffer ä¸­ã€‚åœ¨ç³»ç»Ÿå±‚é¢ä¸Šï¼Œè¿™ä¸ªæ“ä½œæˆ‘ä»¬ç§°ä¸º&lt;strong&gt;è¯»æ“ä½œ&lt;/strong&gt;ï¼Œå› ä¸ºæ•°æ®æ˜¯ä»å¤–éƒ¨( æ–‡ä»¶æˆ–è€…ç½‘ç»œç­‰ )è¯»å–åˆ°å†…å­˜ä¸­ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;int num = channel.read(buffer);  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸Šè¿°æ–¹æ³•ä¼šè¿”å›ä» Channel ä¸­å†™å…¥åˆ° Buffer çš„æ•°æ®å¤§å°ã€‚å¯¹åº”æ–¹æ³•çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public interface ReadableByteChannel extends Channel {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; public int read(ByteBuffer dst) throws IOException;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼Œé€šå¸¸åœ¨è¯´ NIO çš„è¯»æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´çš„æ˜¯ä» Channel ä¸­è¯»æ•°æ®åˆ° Buffer ä¸­ï¼Œå¯¹åº”çš„æ˜¯å¯¹ Buffer çš„å†™å…¥æ“ä½œï¼Œåˆå­¦è€…éœ€è¦ç†æ¸…æ¥šè¿™ä¸ªã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer5-e4bb8e-buffer-e8afbbe58f96e695b0e68dae-5-ä»-buffer-è¯»å–æ•°æ®5-ä»-buffer-è¯»å–æ•°æ®&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#5-%E4%BB%8E-Buffer-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE&#34;  title=&#34;5. ä» Buffer è¯»å–æ•°æ®&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;5. ä» Buffer è¯»å–æ•°æ®&lt;/h1&gt;
&lt;p&gt;æ¯ä¸ª Buffer å®ç°ç±»ï¼Œéƒ½æä¾›äº†Â &lt;code&gt;#get(...)&lt;/code&gt;Â æ–¹æ³•ï¼Œä» Buffer è¯»å–æ•°æ®ã€‚ä»¥ ByteBuffer ä¸¾ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// è¯»å– byte  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract byte get();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract byte get(int index);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// è¯»å– byte æ•°ç»„  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public ByteBuffer get(byte\[\] dst, int offset, int length) {...}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public ByteBuffer get(byte\[\] dst) {...}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ... çœç•¥ï¼Œè¿˜æœ‰å…¶ä»– get æ–¹æ³•  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯¹äº Buffer æ¥è¯´ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„æ“ä½œå°±æ˜¯ï¼Œæˆ‘ä»¬è¦è®²æ¥å‘ Channel çš„å†™å…¥ Buffer ä¸­çš„æ•°æ®ã€‚åœ¨ç³»ç»Ÿå±‚é¢ä¸Šï¼Œè¿™ä¸ªæ“ä½œæˆ‘ä»¬ç§°ä¸º&lt;strong&gt;å†™æ“ä½œ&lt;/strong&gt;ï¼Œå› ä¸ºæ•°æ®æ˜¯ä»å†…å­˜ä¸­å†™å…¥åˆ°å¤–éƒ¨( æ–‡ä»¶æˆ–è€…ç½‘ç»œç­‰ )ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;int num = channel.write(buffer);  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸Šè¿°æ–¹æ³•ä¼šè¿”å›å‘ Channel ä¸­å†™å…¥ Buffer çš„æ•°æ®å¤§å°ã€‚å¯¹åº”æ–¹æ³•çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public interface WritableByteChannel extends Channel {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; public int write(ByteBuffer src) throws IOException;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer6-rewind-v-s-flip-v-s-clear-6-rewind-vs-flip-vs-clear6-rewind-vs-flip-vs-clear&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#6-rewind-v-s-flip-v-s-clear&#34;  title=&#34;6. rewind() v.s. flip() v.s. clear()&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;6. rewind() v.s. flip() v.s. clear()&lt;/h1&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-3-buffer6-1-flip-61-flip61-flip&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#6-1-flip&#34;  title=&#34;6.1 flip&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;6.1 flip&lt;/h2&gt;
&lt;p&gt;å¦‚æœè¦è¯»å– Buffer ä¸­çš„æ•°æ®ï¼Œéœ€è¦åˆ‡æ¢æ¨¡å¼ï¼Œ&lt;strong&gt;ä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼&lt;/strong&gt;ã€‚å¯¹åº”çš„ä¸ºÂ &lt;code&gt;#flip()&lt;/code&gt;Â æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer flip() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; limit = position; // è®¾ç½®è¯»å–ä¸Šé™  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position = 0; // é‡ç½® position  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; mark = -1; // æ¸…ç©º mark  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ç¤ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;buf.put(magic); Â  Â // Prepend header  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;in.read(buf); Â  Â  Â // Read data into rest of buffer  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;buf.flip(); Â  Â  Â  Â // Flip buffer  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;channel.write(buf); Â  Â // Write header + data to channel  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;httpsvipiocodercnnettynio-3-buffer6-2-rewind-62-rewind62-rewind&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#6-2-rewind&#34;  title=&#34;6.2 rewind&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;6.2 rewind&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;#rewind()&lt;/code&gt;Â æ–¹æ³•ï¼Œå¯ä»¥&lt;strong&gt;é‡ç½®&lt;/strong&gt;Â &lt;code&gt;position&lt;/code&gt;Â çš„å€¼ä¸º 0 ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°&lt;strong&gt;è¯»å–å’Œå†™å…¥&lt;/strong&gt;Â Buffer äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•ä¸»è¦é’ˆå¯¹äº&lt;strong&gt;è¯»æ¨¡å¼&lt;/strong&gt;ï¼Œæ‰€ä»¥å¯ä»¥ç¿»è¯‘ä¸ºâ€œå€’å¸¦â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå’Œæˆ‘ä»¬å½“å¹´çš„ç£å¸¦å€’å›å»æ˜¯ä¸€ä¸ªæ„æ€ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer rewind() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position = 0; // é‡ç½® position  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; mark = -1; // æ¸…ç©º mark  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;ä»ä»£ç ä¸Šï¼Œå’ŒÂ &lt;code&gt;#flip()&lt;/code&gt;Â ç›¸æ¯”ï¼Œéå¸¸ç±»ä¼¼ï¼Œé™¤äº†å°‘äº†ç¬¬ä¸€è¡Œçš„Â &lt;code&gt;limit = position&lt;/code&gt;Â çš„ä»£ç å—ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨ç¤ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;channel.write(buf); Â  Â // Write remaining data  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;buf.rewind(); Â  Â  Â // Rewind buffer  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;buf.get(array); Â  Â // Copy data into array  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;httpsvipiocodercnnettynio-3-buffer6-3-clear-63-clear63-clear&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#6-3-clear&#34;  title=&#34;6.3 clear&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;6.3 clear&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;#clear()&lt;/code&gt;Â æ–¹æ³•ï¼Œå¯ä»¥â€œ&lt;strong&gt;é‡ç½®&lt;/strong&gt;â€ Buffer çš„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°&lt;strong&gt;è¯»å–å’Œå†™å…¥&lt;/strong&gt;Â Buffer äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•ä¸»è¦é’ˆå¯¹äº&lt;strong&gt;å†™æ¨¡å¼&lt;/strong&gt;ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer clear() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position = 0; // é‡ç½® position  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; limit = capacity; // æ¢å¤ limit ä¸º capacity  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; mark = -1; // æ¸…ç©º mark  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä»æºç ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒBuffer çš„æ•°æ®å®é™…å¹¶æœªæ¸…ç†æ‰ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¯»æ¨¡å¼ä¸‹ï¼Œå°½é‡ä¸è¦è°ƒç”¨Â &lt;code&gt;#clear()&lt;/code&gt;Â æ–¹æ³•ï¼Œå› ä¸ºÂ &lt;code&gt;limit&lt;/code&gt;Â å¯èƒ½ä¼šè¢«é”™è¯¯çš„èµ‹å€¼ä¸ºÂ &lt;code&gt;capacity&lt;/code&gt;Â ã€‚ç›¸æ¯”æ¥è¯´ï¼Œè°ƒç”¨Â &lt;code&gt;#rewind()&lt;/code&gt;Â æ›´åˆç†ï¼Œå¦‚æœæœ‰é‡è¯»çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨ç¤ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;buf.clear(); Â  Â  // Prepare buffer for reading  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;in.read(buf); Â  Â // Read data  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer7-mark-e690ade9858d-reset-7-mark-æ­é…-reset7-mark-æ­é…-reset&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#7-mark-%E6%90%AD%E9%85%8D-reset&#34;  title=&#34;7. mark() æ­é… reset()&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;7. mark() æ­é… reset()&lt;/h1&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-3-buffer7-1-mark-71-mark71-mark&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#7-1-mark&#34;  title=&#34;7.1 mark&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;7.1 mark&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;#mark()&lt;/code&gt;Â æ–¹æ³•ï¼Œä¿å­˜å½“å‰çš„Â &lt;code&gt;position&lt;/code&gt;Â åˆ°Â &lt;code&gt;mark&lt;/code&gt;Â ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer mark() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; mark = position;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;httpsvipiocodercnnettynio-3-buffer7-2-reset-72-reset72-reset&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#7-2-reset&#34;  title=&#34;7.2 reset&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;7.2 reset&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;#reset()&lt;/code&gt;Â æ–¹æ³•ï¼Œæ¢å¤å½“å‰çš„Â &lt;code&gt;postion&lt;/code&gt;Â ä¸ºÂ &lt;code&gt;mark&lt;/code&gt;Â ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer reset() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int m = mark;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (m &amp;lt; 0)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new InvalidMarkException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position = m;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;httpsvipiocodercnnettynio-3-buffer8-e585b6e5ae83e696b9e6b395-8-å…¶å®ƒæ–¹æ³•8-å…¶å®ƒæ–¹æ³•&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-3-buffer/#8-%E5%85%B6%E5%AE%83%E6%96%B9%E6%B3%95&#34;  title=&#34;8. å…¶å®ƒæ–¹æ³•&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;8. å…¶å®ƒæ–¹æ³•&lt;/h1&gt;
&lt;p&gt;Buffer ä¸­è¿˜æœ‰å…¶å®ƒæ–¹æ³•ï¼Œæ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥èƒ–å‹è‡ªå·±ç ”ç©¶å™¢ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;111
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== capacity ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final int capacity() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return capacity;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== position ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final int position() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return position;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer position(int newPosition) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if ((newPosition &amp;gt; limit) || (newPosition &amp;lt; 0))  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IllegalArgumentException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position = newPosition;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (mark &amp;gt; position) mark = -1;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== limit ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final int limit() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return limit;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final Buffer limit(int newLimit) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if ((newLimit &amp;gt; capacity) || (newLimit &amp;lt; 0))  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IllegalArgumentException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; limit = newLimit;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (position &amp;gt; limit) position = limit;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (mark &amp;gt; limit) mark = -1;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return this;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== mark ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int markValue() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return mark;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final void discardMark() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; mark = -1;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== æ•°ç»„ç›¸å…³ ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final int remaining() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return limit - position;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final boolean hasRemaining() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return position &amp;lt; limit;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract boolean hasArray();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract Object array();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract int arrayOffset();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract boolean isDirect();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== ä¸‹ä¸€ä¸ªè¯» / å†™ position ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int nextGetIndex() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (position &amp;gt;= limit)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new BufferUnderflowException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return position++;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int nextGetIndex(int nb) { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (limit - position &amp;lt; nb)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new BufferUnderflowException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int p = position;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position += nb;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return p;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int nextPutIndex() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (position &amp;gt;= limit)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new BufferOverflowException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return position++;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int nextPutIndex(int nb) { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (limit - position &amp;lt; nb)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new BufferOverflowException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int p = position;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position += nb;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return p;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int checkIndex(int i) { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if ((i &amp;lt; 0) || (i &amp;gt;= limit))  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IndexOutOfBoundsException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return i;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final int checkIndex(int i, int nb) { Â  Â  Â  Â  Â  Â  Â  // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if ((i &amp;lt; 0) || (nb &amp;gt; limit - i))  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IndexOutOfBoundsException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return i;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// ========== å…¶å®ƒæ–¹æ³• ==========  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;final void truncate() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; mark = -1;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; position = 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; limit = 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; capacity = 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;static void checkBounds(int off, int len, int size) { // package-private  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if ((off | len | (off + len) | (size - (off + len))) &amp;lt; 0)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new IndexOutOfBoundsException();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>nettyæºç åˆ†æå››</title>
        <link>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%9B%9B/</link>
        <pubDate>Thu, 04 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E5%9B%9B/</guid>
        <description>&lt;p&gt;Selector ï¼Œ ä¸€èˆ¬ç§°ä¸º&lt;strong&gt;é€‰æ‹©å™¨&lt;/strong&gt;ã€‚å®ƒæ˜¯ Java NIO æ ¸å¿ƒç»„ä»¶ä¸­çš„ä¸€ä¸ªï¼Œç”¨äºè½®è¯¢ä¸€ä¸ªæˆ–å¤šä¸ª NIO Channel çš„çŠ¶æ€æ˜¯å¦å¤„äºå¯è¯»ã€å¯å†™ã€‚å¦‚æ­¤ï¼Œä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥ç®¡ç†å¤šä¸ª Channel ï¼Œä¹Ÿå°±è¯´å¯ä»¥ç®¡ç†å¤šä¸ªç½‘ç»œè¿æ¥ã€‚ä¹Ÿå› æ­¤ï¼ŒSelector ä¹Ÿè¢«ç§°ä¸º&lt;strong&gt;å¤šè·¯å¤ç”¨å™¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆ Selector æ˜¯å¦‚ä½•è½®è¯¢çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦å°† Channel æ³¨å†Œåˆ° Selector ä¸­ï¼Œè¿™æ · Selector æ‰çŸ¥é“å“ªäº› Channel æ˜¯å®ƒéœ€è¦ç®¡ç†çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¹‹åï¼ŒSelector ä¼šä¸æ–­åœ°è½®è¯¢æ³¨å†Œåœ¨å…¶ä¸Šçš„ Channel ã€‚å¦‚æœæŸä¸ª Channel ä¸Šé¢å‘ç”Ÿäº†è¯»æˆ–è€…å†™äº‹ä»¶ï¼Œè¿™ä¸ª Channel å°±å¤„äºå°±ç»ªçŠ¶æ€ï¼Œä¼šè¢« Selector è½®è¯¢å‡ºæ¥ï¼Œç„¶åé€šè¿‡ SelectionKey å¯ä»¥è·å–å°±ç»ª Channel çš„é›†åˆï¼Œè¿›è¡Œåç»­çš„ I/O æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹å›¾æ˜¯ä¸€ä¸ª Selector ç®¡ç†ä¸‰ä¸ª Channel çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2018_02_15/01.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;Selector &amp;lt;=&amp;gt; Channel&#34;
	
	
&gt;&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector2-e4bc98e7bcbae782b9-2-ä¼˜ç¼ºç‚¹2-ä¼˜ç¼ºç‚¹&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#2-%E4%BC%98%E7%BC%BA%E7%82%B9&#34;  title=&#34;2. ä¼˜ç¼ºç‚¹&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2. ä¼˜ç¼ºç‚¹&lt;/h1&gt;
&lt;p&gt;â‘ Â &lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹&lt;strong&gt;èƒ½å¤Ÿ&lt;/strong&gt;å¤„ç†å¤šä¸ª Channel çš„ä¼˜ç‚¹æ˜¯ï¼Œåªéœ€è¦æ›´å°‘çš„çº¿ç¨‹æ¥å¤„ç† Channel ã€‚äº‹å®ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†æ‰€æœ‰çš„ Channel ã€‚å¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œçº¿ç¨‹ä¹‹é—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€å¾ˆå¤§ï¼Œè€Œä¸”æ¯ä¸ªçº¿ç¨‹éƒ½è¦å ç”¨ç³»ç»Ÿçš„ä¸€äº›èµ„æº( ä¾‹å¦‚ CPUã€å†…å­˜ )ã€‚å› æ­¤ï¼Œä½¿ç”¨çš„çº¿ç¨‹è¶Šå°‘è¶Šå¥½ã€‚&lt;/p&gt;
&lt;p&gt;â‘¡Â &lt;strong&gt;ç¼ºç‚¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨äº†å¤šä¸ª Channel ï¼Œå› æ­¤ä¼šé€ æˆæ¯ä¸ª Channel å¤„ç†æ•ˆç‡çš„é™ä½ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼ŒNetty åœ¨è®¾è®¡å®ç°ä¸Šï¼Œé€šè¿‡ n ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ª Channel ï¼Œä»è€Œå¾ˆå¥½çš„è§£å†³äº†è¿™æ ·çš„ç¼ºç‚¹ã€‚å…¶ä¸­ï¼Œn çš„æŒ‡çš„æ˜¯æœ‰é™çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸º CPU * 2 ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector3-selector-e7b1bbe59bbe-3-selector-ç±»å›¾3-selector-ç±»å›¾&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#3-Selector-%E7%B1%BB%E5%9B%BE&#34;  title=&#34;3. Selector ç±»å›¾&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3. Selector ç±»å›¾&lt;/h1&gt;
&lt;p&gt;Selector åœ¨Â &lt;code&gt;java.nio&lt;/code&gt;Â åŒ…ä¸­ï¼Œè¢«å®šä¹‰æˆ&lt;strong&gt;æŠ½è±¡ç±»&lt;/strong&gt;ï¼Œæ•´ä½“å®ç°ç±»å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://static.iocoder.cn/images/Netty/2018_02_15/02.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;Selector ç±»å›¾&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Selector çš„å®ç°ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œæ„Ÿå…´è¶£çš„èƒ–å‹å¯ä»¥çœ‹çœ‹å å°ç‹¼çš„Â &lt;a class=&#34;link&#34; href=&#34;https://www.jianshu.com/p/0d497fe5484a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šæ·±å…¥æµ…å‡ºNIOä¹‹Selectorå®ç°åŸç†ã€‹&lt;/a&gt;Â ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector3-e5889be5bbba-selector-3-åˆ›å»º-selector3-åˆ›å»º-selector&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#3-%E5%88%9B%E5%BB%BA-Selector&#34;  title=&#34;3. åˆ›å»º Selector&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3. åˆ›å»º Selector&lt;/h1&gt;
&lt;p&gt;é€šè¿‡Â &lt;code&gt;#open()&lt;/code&gt;Â æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª Selector å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Selector selector = Selector.open();  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector4-e6b3a8e5868c-chanel-e588b0-selector-e4b8ad-4-æ³¨å†Œ-chanel-åˆ°-selector-ä¸­4-æ³¨å†Œ-chanel-åˆ°-selector-ä¸­&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#4-%E6%B3%A8%E5%86%8C-Chanel-%E5%88%B0-Selector-%E4%B8%AD&#34;  title=&#34;4. æ³¨å†Œ Chanel åˆ° Selector ä¸­&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;4. æ³¨å†Œ Chanel åˆ° Selector ä¸­&lt;/h1&gt;
&lt;p&gt;ä¸ºäº†è®© Selector èƒ½å¤Ÿç®¡ç† Channel ï¼Œæˆ‘ä»¬éœ€è¦å°† Channel æ³¨å†Œåˆ° Selector ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;channel.configureBlocking(false); // &amp;lt;1&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SelectionKey key = channel.register(selector, SelectionKey.OP_READ);  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼Œå¦‚æœä¸€ä¸ª Channel è¦æ³¨å†Œåˆ° Selector ä¸­ï¼Œé‚£ä¹ˆè¯¥ Channel å¿…é¡»æ˜¯&lt;strong&gt;éé˜»å¡&lt;/strong&gt;ï¼Œæ‰€ä»¥Â &lt;code&gt;&amp;lt;1&amp;gt;&lt;/code&gt;Â å¤„çš„Â &lt;code&gt;channel.configureBlocking(false);&lt;/code&gt;Â ä»£ç å—ã€‚ä¹Ÿå› æ­¤ï¼ŒFileChannel æ˜¯ä¸èƒ½å¤Ÿæ³¨å†Œåˆ° Channel ä¸­çš„ï¼Œå› ä¸ºå®ƒæ˜¯&lt;strong&gt;é˜»å¡&lt;/strong&gt;çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨Â &lt;code&gt;#register(Selector selector, int interestSet)&lt;/code&gt;Â æ–¹æ³•çš„&lt;strong&gt;ç¬¬äºŒä¸ªå‚æ•°&lt;/strong&gt;ï¼Œè¡¨ç¤ºä¸€ä¸ªâ€œinterest é›†åˆâ€ï¼Œæ„æ€æ˜¯é€šè¿‡ Selector ç›‘å¬ Channel æ—¶ï¼Œå¯¹&lt;strong&gt;å“ªäº›&lt;/strong&gt;( å¯ä»¥æ˜¯å¤šä¸ª )äº‹ä»¶æ„Ÿå…´è¶£ã€‚å¯ä»¥ç›‘å¬å››ç§ä¸åŒç±»å‹çš„äº‹ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;Channel è§¦å‘äº†ä¸€ä¸ªäº‹ä»¶ï¼Œæ„æ€æ˜¯è¯¥äº‹ä»¶å·²ç»å°±ç»ªï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Connect ï¼šè¿æ¥å®Œæˆäº‹ä»¶( TCP è¿æ¥ )ï¼Œä»…é€‚ç”¨äºå®¢æˆ·ç«¯ï¼Œå¯¹åº”Â &lt;code&gt;SelectionKey.OP_CONNECT&lt;/code&gt;Â ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Accept ï¼šæ¥å—æ–°è¿æ¥äº‹ä»¶ï¼Œä»…é€‚ç”¨äºæœåŠ¡ç«¯ï¼Œå¯¹åº”Â &lt;code&gt;SelectionKey.OP_ACCEPT&lt;/code&gt;Â ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Read ï¼šè¯»äº‹ä»¶ï¼Œé€‚ç”¨äºä¸¤ç«¯ï¼Œå¯¹åº”Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â ï¼Œè¡¨ç¤º Buffer å¯è¯»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Write ï¼šå†™æ—¶é—´ï¼Œé€‚ç”¨äºä¸¤ç«¯ï¼Œå¯¹åº”Â &lt;code&gt;SelectionKey.OP_WRITE&lt;/code&gt;Â ï¼Œè¡¨ç¤º Buffer å¯å†™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ª Client Channel Channel æˆåŠŸè¿æ¥åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œç§°ä¸ºâ€œè¿æ¥å°±ç»ªâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ª Server Socket Channel å‡†å¤‡å¥½æ¥æ”¶æ–°è¿›å…¥çš„è¿æ¥ï¼Œç§°ä¸ºâ€œæ¥æ”¶å°±ç»ªâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªæœ‰æ•°æ®å¯è¯»çš„ Channel ï¼Œå¯ä»¥è¯´æ˜¯â€œè¯»å°±ç»ªâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªç­‰å¾…å†™æ•°æ®çš„ Channel ï¼Œå¯ä»¥è¯´æ˜¯â€œå†™å°±ç»ªâ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;å› ä¸º Selector å¯ä»¥å¯¹ Channel çš„&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;äº‹ä»¶æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬æƒ³è¦æ³¨å†Œ Channel çš„å¤šä¸ªäº‹ä»¶åˆ° Selector ä¸­æ—¶ï¼Œå¯ä»¥ä½¿ç”¨&lt;strong&gt;æˆ–è¿ç®—&lt;/strong&gt;Â &lt;code&gt;|&lt;/code&gt;Â æ¥ç»„åˆå¤šä¸ªäº‹ä»¶ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;int interestSet = SelectionKey.OP\_READ | SelectionKey.OP\_WRITE;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¼šæœ‰&lt;strong&gt;æ”¹å˜&lt;/strong&gt;Â Selector å¯¹ Channel æ„Ÿå…´è¶£çš„äº‹ä»¶é›†åˆï¼Œå¯ä»¥é€šè¿‡å†æ¬¡è°ƒç”¨Â &lt;code&gt;#register(Selector selector, int interestSet)&lt;/code&gt;Â æ–¹æ³•æ¥è¿›è¡Œå˜æ›´ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;channel.register(selector, SelectionKey.OP_READ);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;channel.register(selector, SelectionKey.OP\_READ | SelectionKey.OP\_WRITE);  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åˆå§‹æ—¶ï¼ŒSelector ä»…å¯¹ Channel çš„Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿®æ”¹åï¼ŒSelector ä»…å¯¹ Channel çš„Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â å’ŒÂ &lt;code&gt;SelectionKey.OP_WRITE)&lt;/code&gt;Â äº‹ä»¶&lt;strong&gt;éƒ½&lt;/strong&gt;æ„Ÿå…´è¶£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector5-selectionkey-e7b1bb-5-selectionkey-ç±»5-selectionkey-ç±»&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#5-SelectionKey-%E7%B1%BB&#34;  title=&#34;5. SelectionKey ç±»&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;5. SelectionKey ç±»&lt;/h1&gt;
&lt;p&gt;ä¸Šä¸€å°èŠ‚, å½“æˆ‘ä»¬è°ƒç”¨ Channel çš„Â &lt;code&gt;#register(...)&lt;/code&gt;Â æ–¹æ³•ï¼Œå‘ Selector æ³¨å†Œä¸€ä¸ª Channel åï¼Œä¼šè¿”å›ä¸€ä¸ª SelectionKey å¯¹è±¡ã€‚é‚£ä¹ˆ SelectionKey æ˜¯ä»€ä¹ˆå‘¢ï¼ŸSelectionKey åœ¨Â &lt;code&gt;java.nio.channels&lt;/code&gt;Â åŒ…ä¸‹ï¼Œè¢«å®šä¹‰æˆä¸€ä¸ª&lt;strong&gt;æŠ½è±¡ç±»&lt;/strong&gt;ï¼Œè¡¨ç¤ºä¸€ä¸ª Channel å’Œä¸€ä¸ª Selector çš„æ³¨å†Œå…³ç³»ï¼ŒåŒ…å«å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;interest set ï¼šæ„Ÿå…´è¶£çš„äº‹ä»¶é›†åˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ready set ï¼šå°±ç»ªçš„äº‹ä»¶é›†åˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Channel&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Selector&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;attachment ï¼š_å¯é€‰çš„_é™„åŠ å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-4-selector5-1-interest-set-51-interest-set51-interest-set&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#5-1-interest-set&#34;  title=&#34;5.1 interest set&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;5.1 interest set&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è°ƒç”¨Â &lt;code&gt;#interestOps()&lt;/code&gt;Â æ–¹æ³•ï¼Œè¿”å›æ„Ÿå…´è¶£çš„äº‹ä»¶é›†åˆã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;int interestSet = selectionKey.interestOps();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// åˆ¤æ–­å¯¹å“ªäº›äº‹ä»¶æ„Ÿå…´è¶£  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boolean isInterestedInAccept Â = interestSet &amp;amp; SelectionKey.OP_ACCEPT != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boolean isInterestedInConnect = interestSet &amp;amp; SelectionKey.OP_CONNECT != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boolean isInterestedInRead Â  Â = interestSet &amp;amp; SelectionKey.OP_READ != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boolean isInterestedInWrite Â  = interestSet &amp;amp; SelectionKey.OP_WRITE != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å…¶ä¸­æ¯ä¸ªäº‹ä»¶ Key åœ¨ SelectionKey ä¸­æšä¸¾ï¼Œé€šè¿‡ä½( bit ) è¡¨ç¤ºã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// Â SelectionKey.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static final int OP_READ = 1 &amp;lt;&amp;lt; 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static final int OP_WRITE = 1 &amp;lt;&amp;lt; 2;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static final int OP_CONNECT = 1 &amp;lt;&amp;lt; 3;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static final int OP_ACCEPT = 1 &amp;lt;&amp;lt; 4;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œåœ¨ä¸Šè¿°ç¤ºä¾‹çš„ååŠæ®µçš„ä»£ç ï¼Œå¯ä»¥é€šè¿‡ä¸è¿ç®—Â &lt;code&gt;&amp;amp;&lt;/code&gt;Â æ¥åˆ¤æ–­æ˜¯å¦å¯¹æŒ‡å®šäº‹ä»¶æ„Ÿå…´è¶£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-4-selector5-2-ready-set-52-ready-set52-ready-set&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#5-2-ready-set&#34;  title=&#34;5.2 ready set&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;5.2 ready set&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è°ƒç”¨Â &lt;code&gt;#readyOps()&lt;/code&gt;Â æ–¹æ³•ï¼Œè¿”å›å°±ç»ªçš„äº‹ä»¶é›†åˆã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;int readySet = selectionKey.readyOps();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// åˆ¤æ–­å“ªäº›äº‹ä»¶å·²å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;selectionKey.isAcceptable();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;selectionKey.isConnectable();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;selectionKey.isReadable();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;selectionKey.isWritable();  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç›¸æ¯” interest set æ¥è¯´ï¼Œready set å·²ç»å†…ç½®äº†åˆ¤æ–­äº‹ä»¶çš„æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// SelectionKey.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final boolean isReadable() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return (readyOps() &amp;amp; OP_READ) != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final boolean isWritable() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return (readyOps() &amp;amp; OP_WRITE) != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final boolean isConnectable() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return (readyOps() &amp;amp; OP_CONNECT) != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public final boolean isAcceptable() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return (readyOps() &amp;amp; OP_ACCEPT) != 0;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-4-selector5-3-attachment-53-attachment53-attachment&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#5-3-attachment&#34;  title=&#34;5.3 attachment&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;5.3 attachment&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è°ƒç”¨Â &lt;code&gt;#attach(Object ob)&lt;/code&gt;Â æ–¹æ³•ï¼Œå¯ä»¥å‘ SelectionKey æ·»åŠ é™„åŠ å¯¹è±¡ï¼›é€šè¿‡è°ƒç”¨Â &lt;code&gt;#attachment()&lt;/code&gt;Â æ–¹æ³•ï¼Œå¯ä»¥è·å¾— SelectionKey è·å¾—é™„åŠ å¯¹è±¡ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;selectionKey.attach(theObject);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Object attachedObj = selectionKey.attachment();  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆè·å¾—åœ¨æ³¨å†Œæ—¶ï¼Œç›´æ¥æ·»åŠ é™„åŠ å¯¹è±¡ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SelectionKey key = channel.register(selector, SelectionKey.OP_READ, theObject);  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector6-e9809ae8bf87-selector-e98089e68ba9-channel-6-é€šè¿‡-selector-é€‰æ‹©-channel6-é€šè¿‡-selector-é€‰æ‹©-channel&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#6-%E9%80%9A%E8%BF%87-Selector-%E9%80%89%E6%8B%A9-Channel&#34;  title=&#34;6. é€šè¿‡ Selector é€‰æ‹© Channel&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;6. é€šè¿‡ Selector é€‰æ‹© Channel&lt;/h1&gt;
&lt;p&gt;åœ¨ Selector ä¸­ï¼Œæä¾›ä¸‰ç§ç±»å‹çš„é€‰æ‹©( select )æ–¹æ³•ï¼Œè¿”å›å½“å‰æœ‰æ„Ÿå…´è¶£äº‹ä»¶å‡†å¤‡å°±ç»ªçš„ ChannelÂ &lt;strong&gt;æ•°é‡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// Selector.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// é˜»å¡åˆ°è‡³å°‘æœ‰ä¸€ä¸ª Channel åœ¨ä½ æ³¨å†Œçš„äº‹ä»¶ä¸Šå°±ç»ªäº†ã€‚  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract int select() throws IOException;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// åœ¨ `#select()` æ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œå¢åŠ è¶…æ—¶æœºåˆ¶ã€‚  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract int select(long timeout) throws IOException;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// å’Œ `#select()` æ–¹æ³•ä¸åŒï¼Œç«‹å³è¿”å›æ•°é‡ï¼Œè€Œä¸é˜»å¡ã€‚  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public abstract int selectNow() throws IOException;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æœ‰ä¸€ç‚¹&lt;strong&gt;éå¸¸éœ€è¦æ³¨æ„&lt;/strong&gt;ï¼šselect æ–¹æ³•è¿”å›çš„Â &lt;code&gt;int&lt;/code&gt;Â å€¼ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘ Channel å·²ç»å°±ç»ªã€‚äº¦å³ï¼Œ&lt;strong&gt;è‡ªä¸Šæ¬¡è°ƒç”¨ select æ–¹æ³•åæœ‰å¤šå°‘ Channel å˜æˆå°±ç»ªçŠ¶æ€&lt;/strong&gt;ã€‚å¦‚æœè°ƒç”¨ select æ–¹æ³•ï¼Œå› ä¸ºæœ‰ä¸€ä¸ª Channel å˜æˆå°±ç»ªçŠ¶æ€åˆ™è¿”å›äº† 1 ï¼›è‹¥å†æ¬¡è°ƒç”¨ select æ–¹æ³•ï¼Œå¦‚æœå¦ä¸€ä¸ª Channel å°±ç»ªäº†ï¼Œå®ƒä¼šå†æ¬¡è¿”å›1ã€‚å¦‚æœå¯¹ç¬¬ä¸€ä¸ªå°±ç»ªçš„ Channel æ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œç°åœ¨å°±æœ‰ä¸¤ä¸ªå°±ç»ªçš„ Channel ï¼Œ&lt;strong&gt;ä½†åœ¨æ¯æ¬¡ select æ–¹æ³•è°ƒç”¨ä¹‹é—´ï¼Œåªæœ‰ä¸€ä¸ª Channel å°±ç»ªäº†ï¼Œæ‰€ä»¥æ‰è¿”å› 1&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector7-e88eb7e58f96e58fafe6938de4bd9ce79a84-channel-7-è·å–å¯æ“ä½œçš„-channel7-è·å–å¯æ“ä½œçš„-channel&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#7-%E8%8E%B7%E5%8F%96%E5%8F%AF%E6%93%8D%E4%BD%9C%E7%9A%84-Channel&#34;  title=&#34;7. è·å–å¯æ“ä½œçš„ Channel&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;7. è·å–å¯æ“ä½œçš„ Channel&lt;/h1&gt;
&lt;p&gt;ä¸€æ—¦è°ƒç”¨äº† select æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼è¡¨æ˜æœ‰ä¸€ä¸ªæˆ–æ›´å¤šä¸ª Channel å°±ç»ªäº†ï¼Œç„¶åå¯ä»¥é€šè¿‡è°ƒç”¨Selector çš„Â &lt;code&gt;#selectedKeys()&lt;/code&gt;Â æ–¹æ³•ï¼Œè®¿é—®â€œå·²é€‰æ‹©é”®é›†( selected key set )â€ä¸­çš„&lt;strong&gt;å°±ç»ª&lt;/strong&gt;Â Channel ã€‚ç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Set selectedKeys = selector.selectedKeys();  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ³¨æ„ï¼Œå½“æœ‰&lt;strong&gt;æ–°å¢å°±ç»ª&lt;/strong&gt;çš„ Channel ï¼Œéœ€è¦å…ˆè°ƒç”¨ select æ–¹æ³•ï¼Œæ‰ä¼šæ·»åŠ åˆ°â€œå·²é€‰æ‹©é”®é›†( selected key set )â€ä¸­ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨Â &lt;code&gt;#selectedKeys()&lt;/code&gt;Â æ–¹æ³•ï¼Œæ˜¯æ— æ³•è·å¾—å®ƒä»¬å¯¹åº”çš„ SelectionKey ä»¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector8-e594a4e98692-selector-e98089e68ba9-8-å”¤é†’-selector-é€‰æ‹©8-å”¤é†’-selector-é€‰æ‹©&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#8-%E5%94%A4%E9%86%92-Selector-%E9%80%89%E6%8B%A9&#34;  title=&#34;8. å”¤é†’ Selector é€‰æ‹©&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;8. å”¤é†’ Selector é€‰æ‹©&lt;/h1&gt;
&lt;p&gt;æŸä¸ªçº¿ç¨‹è°ƒç”¨Â &lt;code&gt;#select()&lt;/code&gt;Â æ–¹æ³•åï¼Œå‘ç”Ÿé˜»å¡äº†ï¼Œå³ä½¿æ²¡æœ‰é€šé“å·²ç»å°±ç»ªï¼Œä¹Ÿæœ‰åŠæ³•è®©å…¶ä»Â &lt;code&gt;#select()&lt;/code&gt;Â æ–¹æ³•è¿”å›ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åªè¦è®©å…¶å®ƒçº¿ç¨‹åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨Â &lt;code&gt;select()&lt;/code&gt;Â æ–¹æ³•çš„é‚£ä¸ª Selector å¯¹è±¡ä¸Šï¼Œè°ƒç”¨è¯¥ Selector çš„Â &lt;code&gt;#wakeup()&lt;/code&gt;Â æ–¹æ³•ï¼Œè¿›è¡Œå”¤é†’è¯¥ Selector å³å¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œé˜»å¡åœ¨Â &lt;code&gt;#select()&lt;/code&gt;æ–¹æ³•ä¸Šçš„çº¿ç¨‹ï¼Œä¼šç«‹é©¬è¿”å›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Selector çš„Â &lt;code&gt;#select(long timeout)&lt;/code&gt;Â æ–¹æ³•ï¼Œè‹¥æœªè¶…æ—¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³ä¸Šè¿°æ–¹å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼Œå¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†Â &lt;code&gt;#wakeup()&lt;/code&gt;Â æ–¹æ³•ï¼Œä½†å½“å‰æ²¡æœ‰çº¿ç¨‹é˜»å¡åœ¨Â &lt;code&gt;#select()&lt;/code&gt;Â æ–¹æ³•ä¸Šï¼Œä¸‹ä¸ªè°ƒç”¨Â &lt;code&gt;#select()&lt;/code&gt;Â æ–¹æ³•çš„çº¿ç¨‹ä¼šç«‹å³è¢«å”¤é†’ã€‚ğŸ˜ˆ æœ‰ç‚¹ç¥å¥‡ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector9-e585b3e997ad-selector-9-å…³é—­-selector9-å…³é—­-selector&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#9-%E5%85%B3%E9%97%AD-Selector&#34;  title=&#34;9. å…³é—­ Selector&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;9. å…³é—­ Selector&lt;/h1&gt;
&lt;p&gt;å½“æˆ‘ä»¬ä¸å†ä½¿ç”¨ Selector æ—¶ï¼Œå¯ä»¥è°ƒç”¨ Selector çš„Â &lt;code&gt;#close()&lt;/code&gt;Â æ–¹æ³•ï¼Œå°†å®ƒè¿›è¡Œå…³é—­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Selector ç›¸å…³çš„æ‰€æœ‰ SelectionKey éƒ½&lt;strong&gt;ä¼šå¤±æ•ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Selector ç›¸å…³çš„æ‰€æœ‰ Channel å¹¶&lt;strong&gt;ä¸ä¼šå…³é—­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„ï¼Œæ­¤æ—¶è‹¥æœ‰çº¿ç¨‹é˜»å¡åœ¨Â &lt;code&gt;#select()&lt;/code&gt;Â æ–¹æ³•ä¸Šï¼Œä¹Ÿä¼šè¢«å”¤é†’è¿”å›ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-4-selector10-e7ae80e58d95-selector-e7a4bae4be8b-10-ç®€å•-selector-ç¤ºä¾‹10-ç®€å•-selector-ç¤ºä¾‹&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#10-%E7%AE%80%E5%8D%95-Selector-%E7%A4%BA%E4%BE%8B&#34;  title=&#34;10. ç®€å• Selector ç¤ºä¾‹&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;10. ç®€å• Selector ç¤ºä¾‹&lt;/h1&gt;
&lt;p&gt;å¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Selector ç¤ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª Selector ï¼Œå¹¶å°†ä¸€ä¸ª Channelæ³¨å†Œåˆ°è¿™ä¸ª Selectorä¸Š( Channel çš„åˆå§‹åŒ–è¿‡ç¨‹ç•¥å» )ï¼Œç„¶åæŒç»­è½®è¯¢è¿™ä¸ª Selector çš„å››ç§äº‹ä»¶( æ¥å—ï¼Œè¿æ¥ï¼Œè¯»ï¼Œå†™ )æ˜¯å¦å°±ç»ªã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è€è‰¿è‰¿ï¼šæœ¬ä»£ç å–è‡ªÂ &lt;a class=&#34;link&#34; href=&#34;http://ifeve.com/selectors/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠJava NIOç³»åˆ—æ•™ç¨‹ï¼ˆå…­ï¼‰ Selectorã€‹&lt;/a&gt;Â æä¾›çš„ç¤ºä¾‹ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸‹å¹¶éè¿™æ ·çš„ä»£ç ã€‚ğŸ™‚ æœ€ä½³çš„å®è·µï¼Œæˆ‘ä»¬å°†åœ¨ Netty ä¸­çœ‹åˆ°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// åˆ›å»º Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Selector selector = Selector.open();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// æ³¨å†Œ Channel åˆ° Selector ä¸­  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;channel.configureBlocking(false);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SelectionKey key = channel.register(selector, SelectionKey.OP_READ);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;while (true) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // é€šè¿‡ Selector é€‰æ‹© Channel   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int readyChannels = selector.select();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (readyChannels == 0) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; continue;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // è·å¾—å¯æ“ä½œçš„ Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; Set selectedKeys = selector.selectedKeys();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // éå† SelectionKey æ•°ç»„  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; Iterator&amp;lt;SelectionKey&amp;gt; keyIterator = selectedKeys.iterator();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; while (keyIterator.hasNext()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; SelectionKey key = keyIterator.next();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (key.isAcceptable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // a connection was accepted by a ServerSocketChannel.  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } else if (key.isConnectable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // a connection was established with a remote server.  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } else if (key.isReadable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // a channel is ready for reading  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } else if (key.isWritable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // a channel is ready for writing  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // ç§»é™¤  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; keyIterator.remove(); // &amp;lt;1&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;, åœ¨æ¯æ¬¡è¿­ä»£æ—¶, æˆ‘ä»¬éƒ½è°ƒç”¨Â &lt;code&gt;keyIterator.remove()&lt;/code&gt;Â ä»£ç å—ï¼Œå°†è¿™ä¸ª key ä»è¿­ä»£å™¨ä¸­åˆ é™¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› ä¸ºÂ &lt;code&gt;#select()&lt;/code&gt;Â æ–¹æ³•ä»…ä»…æ˜¯ç®€å•åœ°å°†å°±ç»ªçš„ Channel å¯¹åº”çš„ SelectionKey æ”¾åˆ° selected keys é›†åˆä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä» selected keys é›†åˆä¸­ï¼Œè·å–åˆ°ä¸€ä¸ª key ï¼Œä½†æ˜¯æ²¡æœ‰å°†å®ƒåˆ é™¤ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡Â &lt;code&gt;#select&lt;/code&gt;Â æ—¶, è¿™ä¸ª SelectionKey è¿˜åœ¨ selectedKeys ä¸­.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>nettyæºç åˆ†æäº”</title>
        <link>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%94/</link>
        <pubDate>Thu, 04 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%BA%94/</guid>
        <description>&lt;p&gt;åœ¨å‰é¢çš„å››ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»å¯¹ NIO çš„æ¦‚å¿µå·²ç»æœ‰äº†ä¸€å®šçš„äº†è§£ã€‚å½“ç„¶ï¼Œèƒ–å‹ä¹Ÿå¯èƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå·²ç»è¢«ä¸€å †æ¦‚å¿µçƒ¦æ­»äº†ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæœ¬æ–‡ï¼Œæˆ‘ä»¬æ’¸èµ·è¢–å­ï¼Œå°±æ˜¯å¹²ä»£ç ï¼Œä¸çæ¯”æ¯”äº†ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œä¸‹é¢æ›´å¤šçš„æ˜¯æä¾›ä¸€ä¸ª NIO ç¤ºä¾‹ã€‚çœŸæ­£ç”Ÿäº§çº§çš„ NIO ä»£ç ï¼Œå»ºè®®èƒ–å‹é‡æ–°å†™ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ Netty ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç ä»“åº“åœ¨Â &lt;a class=&#34;link&#34; href=&#34;https://github.com/YunaiV/netty/tree/f7016330f1483021ef1c38e0923e1c8b7cef0d10/example/src/main/java/io/netty/example/yunai/nio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;example/yunai/nio&lt;/a&gt;Â ç›®å½•ä¸‹ã€‚ä¸€å…± 3 ä¸ªç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;NioServer ï¼šNIO æœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NioClient ï¼šNIO å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CodecUtil ï¼šæ¶ˆæ¯ç¼–è§£ç å·¥å…·ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-5-demo2-e69c8de58aa1e7abaf-2-æœåŠ¡ç«¯2-æœåŠ¡ç«¯&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-%E6%9C%8D%E5%8A%A1%E7%AB%AF&#34;  title=&#34;2. æœåŠ¡ç«¯&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2. æœåŠ¡ç«¯&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;111
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;112
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;113
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;114
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;115
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;116
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;117
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;118
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 1: public class NioServer {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 2:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 3: Â  Â  private ServerSocketChannel serverSocketChannel;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 4: Â  Â  private Selector selector;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 5:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 6: Â  Â  public NioServer() throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 7: Â  Â  Â  Â  // æ‰“å¼€ Server Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 8: Â  Â  Â  Â  serverSocketChannel = ServerSocketChannel.open();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 9: Â  Â  Â  Â  // é…ç½®ä¸ºéé˜»å¡  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 10: Â  Â  Â  Â  serverSocketChannel.configureBlocking(false);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 11: Â  Â  Â  Â  // ç»‘å®š Server port  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 12: Â  Â  Â  Â  serverSocketChannel.socket().bind(new InetSocketAddress(8080));  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 13: Â  Â  Â  Â  // åˆ›å»º Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 14: Â  Â  Â  Â  selector = Selector.open();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 15: Â  Â  Â  Â  // æ³¨å†Œ Server Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 16: Â  Â  Â  Â  serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 17: Â  Â  Â  Â  System.out.println(&amp;#34;Server å¯åŠ¨å®Œæˆ&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 18:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 19: Â  Â  Â  Â  handleKeys();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 20: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 21:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 22: Â  Â  private void handleKeys() throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 23: Â  Â  Â  Â  while (true) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 24: Â  Â  Â  Â  Â  Â  // é€šè¿‡ Selector é€‰æ‹© Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 25: Â  Â  Â  Â  Â  Â  int selectNums = selector.select(30 \* 1000L);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 26: Â  Â  Â  Â  Â  Â  if (selectNums == 0) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 27: Â  Â  Â  Â  Â  Â  Â  Â  continue;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 28: Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 29: Â  Â  Â  Â  Â  Â  System.out.println(&amp;#34;é€‰æ‹© Channel æ•°é‡ï¼š&amp;#34; \+ selectNums);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 30:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 31: Â  Â  Â  Â  Â  Â  // éå†å¯é€‰æ‹©çš„ Channel çš„ SelectionKey é›†åˆ  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 32: Â  Â  Â  Â  Â  Â  Iterator&amp;lt;SelectionKey&amp;gt; iterator = selector.selectedKeys().iterator();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 33: Â  Â  Â  Â  Â  Â  while (iterator.hasNext()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 34: Â  Â  Â  Â  Â  Â  Â  Â  SelectionKey key = iterator.next();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 35: Â  Â  Â  Â  Â  Â  Â  Â  iterator.remove(); // ç§»é™¤ä¸‹é¢è¦å¤„ç†çš„ SelectionKey  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 36: Â  Â  Â  Â  Â  Â  Â  Â  if (!key.isValid()) { // å¿½ç•¥æ— æ•ˆçš„ SelectionKey  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 37: Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continue;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 38: Â  Â  Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 39:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 40: Â  Â  Â  Â  Â  Â  Â  Â  handleKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 41: Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 42: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 43: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 44:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 45: Â  Â  private void handleKey(SelectionKey key) throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 46: Â  Â  Â  Â  // æ¥å—è¿æ¥å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 47: Â  Â  Â  Â  if (key.isAcceptable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 48: Â  Â  Â  Â  Â  Â  handleAcceptableKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 49: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 50: Â  Â  Â  Â  // è¯»å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 51: Â  Â  Â  Â  if (key.isReadable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 52: Â  Â  Â  Â  Â  Â  handleReadableKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 53: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 54: Â  Â  Â  Â  // å†™å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 55: Â  Â  Â  Â  if (key.isWritable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 56: Â  Â  Â  Â  Â  Â  handleWritableKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 57: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 58: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 59:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 60: Â  Â  private void handleAcceptableKey(SelectionKey key) throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 61: Â  Â  Â  Â  // æ¥å— Client Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 62: Â  Â  Â  Â  SocketChannel clientSocketChannel = ((ServerSocketChannel) key.channel()).accept();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 63: Â  Â  Â  Â  // é…ç½®ä¸ºéé˜»å¡  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 64: Â  Â  Â  Â  clientSocketChannel.configureBlocking(false);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 65: Â  Â  Â  Â  // log  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 66: Â  Â  Â  Â  System.out.println(&amp;#34;æ¥å—æ–°çš„ Channel&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 67: Â  Â  Â  Â  // æ³¨å†Œ Client Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 68: Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_READ, new ArrayList&amp;lt;String&amp;gt;());  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 69: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 70:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 71: Â  Â  private void handleReadableKey(SelectionKey key) throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 72: Â  Â  Â  Â  // Client Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 73: Â  Â  Â  Â  SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 74: Â  Â  Â  Â  // è¯»å–æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 75: Â  Â  Â  Â  ByteBuffer readBuffer = CodecUtil.read(clientSocketChannel);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 76: Â  Â  Â  Â  // å¤„ç†è¿æ¥å·²ç»æ–­å¼€çš„æƒ…å†µ  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 77: Â  Â  Â  Â  if (readBuffer == null) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 78: Â  Â  Â  Â  Â  Â  System.out.println(&amp;#34;æ–­å¼€ Channel&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 79: Â  Â  Â  Â  Â  Â  clientSocketChannel.register(selector, 0);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 80: Â  Â  Â  Â  Â  Â  return;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 81: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 82: Â  Â  Â  Â  // æ‰“å°æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 83: Â  Â  Â  Â  if (readBuffer.position() &amp;gt; 0) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 84: Â  Â  Â  Â  Â  Â  String content = CodecUtil.newString(readBuffer);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 85: Â  Â  Â  Â  Â  Â  System.out.println(&amp;#34;è¯»å–æ•°æ®ï¼š&amp;#34; \+ content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 86:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 87: Â  Â  Â  Â  Â  Â  // æ·»åŠ åˆ°å“åº”é˜Ÿåˆ—  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 88: Â  Â  Â  Â  Â  Â  List&amp;lt;String&amp;gt; responseQueue = (ArrayList&amp;lt;String&amp;gt;) key.attachment();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 89: Â  Â  Â  Â  Â  Â  responseQueue.add(&amp;#34;å“åº”ï¼š&amp;#34; \+ content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 90: Â  Â  Â  Â  Â  Â  // æ³¨å†Œ Client Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 91: Â  Â  Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_WRITE, key.attachment());  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 92: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 93: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 94:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 95: Â  Â  @SuppressWarnings(&amp;#34;Duplicates&amp;#34;)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 96: Â  Â  private void handleWritableKey(SelectionKey key) throws ClosedChannelException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 97: Â  Â  Â  Â  // Client Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 98: Â  Â  Â  Â  SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 99:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;100: Â  Â  Â  Â  // éå†å“åº”é˜Ÿåˆ—  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;101: Â  Â  Â  Â  List&amp;lt;String&amp;gt; responseQueue = (ArrayList&amp;lt;String&amp;gt;) key.attachment();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;102: Â  Â  Â  Â  for (String content : responseQueue) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;103: Â  Â  Â  Â  Â  Â  // æ‰“å°æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;104: Â  Â  Â  Â  Â  Â  System.out.println(&amp;#34;å†™å…¥æ•°æ®ï¼š&amp;#34; \+ content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;105: Â  Â  Â  Â  Â  Â  // è¿”å›  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;106: Â  Â  Â  Â  Â  Â  CodecUtil.write(clientSocketChannel, content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;107: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;108: Â  Â  Â  Â  responseQueue.clear();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;109:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;110: Â  Â  Â  Â  // æ³¨å†Œ Client Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;111: Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_READ, responseQueue);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;112: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;113:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;114: Â  Â  public static void main(String\[\] args) throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;115: Â  Â  Â  Â  NioServer server = new NioServer();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;116: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;117:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;118: }  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ•´å—ä»£ç æˆ‘ä»¬å¯ä»¥åˆ†æˆ 3 éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ– NIO æœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;#handleKeys()&lt;/code&gt;Â æ–¹æ³•ï¼šåŸºäº Selector å¤„ç† IO æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;#main(String[] args)&lt;/code&gt;Â æ–¹æ³•ï¼šåˆ›å»º NIO æœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬é€å°èŠ‚æ¥åˆ†äº«ã€‚&lt;/p&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo2-1-e69e84e980a0e696b9e6b395-21-æ„é€ æ–¹æ³•21-æ„é€ æ–¹æ³•&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-1-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95&#34;  title=&#34;2.1 æ„é€ æ–¹æ³•&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.1 æ„é€ æ–¹æ³•&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 3 è‡³ 20 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;serverSocketChannel&lt;/code&gt;Â å±æ€§ï¼ŒæœåŠ¡ç«¯çš„ ServerSocketChannel ï¼Œåœ¨ã€ç¬¬ 7 è‡³ 12 è¡Œã€‘çš„ä»£ç è¿›è¡Œåˆå§‹åŒ–ï¼Œé‡ç‚¹æ˜¯æ­¤å¤„å¯åŠ¨äº†æœåŠ¡ç«¯ï¼Œå¹¶ç›‘å¬æŒ‡å®šç«¯å£( æ­¤å¤„ä¸º 8080 )ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;selector&lt;/code&gt;Â å±æ€§ï¼Œé€‰æ‹©å™¨ï¼Œåœ¨ã€ç¬¬ 14 è‡³ 16 è¡Œã€‘çš„ä»£ç è¿›è¡Œåˆå§‹åŒ–ï¼Œé‡ç‚¹æ˜¯æ­¤å¤„å°†Â &lt;code&gt;serverSocketChannel&lt;/code&gt;Â åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_ACCEPT&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚è¿™æ ·å­ï¼Œåœ¨å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤„ç†è¯¥ IO äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 19 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;#handleKeys()&lt;/code&gt;Â æ–¹æ³•ï¼ŒåŸºäº Selector å¤„ç† IO äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo2-2-handlekeys-22-handlekeys22-handlekeys&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-handleKeys&#34;  title=&#34;2.2 handleKeys&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.2 handleKeys&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 22 è‡³ 43 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 23 è¡Œï¼šæ­»å¾ªç¯ã€‚æœ¬æ–‡çš„ç¤ºä¾‹ï¼Œä¸è€ƒè™‘æœåŠ¡ç«¯å…³é—­çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 24 è‡³ 29 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;Selector#select(long timeout)&lt;/code&gt;Â æ–¹æ³•ï¼Œæ¯ 30 ç§’é˜»å¡ç­‰å¾…æœ‰å°±ç»ªçš„ IO äº‹ä»¶ã€‚æ­¤å¤„çš„ 30 ç§’ä¸ºç¬”è€…éšæ„å†™çš„ï¼Œå®é™…ä¹Ÿå¯ä»¥æ”¹æˆå…¶ä»–è¶…æ—¶æ—¶é—´ï¼Œæˆ–è€…Â &lt;code&gt;Selector#select()&lt;/code&gt;Â æ–¹æ³•ã€‚å½“ä¸å­˜åœ¨å°±ç»ªçš„ IO äº‹ä»¶ï¼Œç›´æ¥Â &lt;code&gt;continue&lt;/code&gt;Â ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡é˜»å¡ç­‰å¾…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 32 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;Selector#selectedKeys()&lt;/code&gt;Â æ–¹æ³•ï¼Œè·å¾—æœ‰å°±ç»ªçš„ IO äº‹ä»¶( ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œé€‰æ‹©çš„â€ ) Channel å¯¹åº”çš„ SelectionKey é›†åˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 33 è¡Œ è‡³ 35 è¡Œï¼šéå†Â &lt;code&gt;iterator&lt;/code&gt;Â ï¼Œè¿›è¡Œé€ä¸ª SelectionKey å¤„ç†ã€‚é‡ç‚¹æ³¨æ„ä¸‹ï¼Œå¤„ç†å®Œéœ€è¦è¿›è¡Œç§»é™¤ï¼Œå…·ä½“åŸå› ï¼Œåœ¨Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-4-selector/#10-%E7%AE%80%E5%8D%95-Selector-%E7%A4%BA%E4%BE%8B&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆå››ï¼‰ä¹‹ Selectorã€‹ã€Œ10. ç®€å• Selector ç¤ºä¾‹ã€&lt;/a&gt;Â æœ‰è¯¦ç»†è§£æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 36 è‡³ 38 è¡Œï¼šåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è¯¥ SelectionKey å·²ç»&lt;strong&gt;å¤±æ•ˆ&lt;/strong&gt;ï¼Œç›´æ¥Â &lt;code&gt;continue&lt;/code&gt;Â ï¼Œä¸è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 40 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;#handleKey()&lt;/code&gt;Â æ–¹æ³•ï¼Œé€ä¸ª SelectionKey å¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo2-2-1-handlekey-221-handlekey221-handlekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-1-handleKey&#34;  title=&#34;2.2.1 handleKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.2.1 handleKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 45 è‡³ 58 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é€šè¿‡è°ƒç”¨ SelectionKey çš„Â &lt;code&gt;#isAcceptable()&lt;/code&gt;ã€&lt;code&gt;#isReadable()&lt;/code&gt;ã€&lt;code&gt;#isWritable()&lt;/code&gt;Â æ–¹æ³•ï¼Œ&lt;strong&gt;åˆ†åˆ«&lt;/strong&gt;åˆ¤æ–­ Channel æ˜¯&lt;strong&gt;æ¥å—è¿æ¥&lt;/strong&gt;å°±ç»ªï¼Œè¿˜æ˜¯&lt;strong&gt;è¯»&lt;/strong&gt;å°±ç»ªï¼Œæˆ–æ˜¯&lt;strong&gt;å†™&lt;/strong&gt;å°±ç»ªï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„Â &lt;code&gt;#handleXXXX(SelectionKey key)&lt;/code&gt;Â æ–¹æ³•ï¼Œå¤„ç†å¯¹åº”çš„ IO äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› ä¸º SelectionKey å¯ä»¥&lt;strong&gt;åŒæ—¶&lt;/strong&gt;å¯¹&lt;strong&gt;ä¸€ä¸ª&lt;/strong&gt;Â Channel çš„&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;äº‹ä»¶æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥æ­¤å¤„çš„ä»£ç éƒ½æ˜¯Â &lt;code&gt;if&lt;/code&gt;Â åˆ¤æ–­ï¼Œè€Œä¸æ˜¯Â &lt;code&gt;if else&lt;/code&gt;Â åˆ¤æ–­ã€‚ğŸ˜ˆ è™½ç„¶ï¼Œè€ƒè™‘åˆ°è®©ç¤ºä¾‹æ›´ç®€å•ï¼Œæœ¬æ–‡çš„å¹¶æœªç¼–å†™åŒæ—¶å¯¹ä¸€ä¸ª Channel çš„å¤šä¸ªäº‹ä»¶æ„Ÿå…´è¶£ï¼Œåç»­æˆ‘ä»¬ä¼šåœ¨ Netty çš„æºç è§£æä¸­çœ‹åˆ°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;SelectionKey.OP_CONNECT&lt;/code&gt;Â ä½¿ç”¨åœ¨&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ä¸­ï¼Œæ‰€ä»¥æ­¤å¤„ä¸éœ€è¦åšç›¸åº”çš„åˆ¤æ–­å’Œå¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo2-2-2-handleacceptablekey-222-handleacceptablekey222-handleacceptablekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-2-handleAcceptableKey&#34;  title=&#34;2.2.2 handleAcceptableKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.2.2 handleAcceptableKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 60 è‡³ 69 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 62 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;ServerSocketChannel#accept()&lt;/code&gt;Â æ–¹æ³•ï¼Œè·å¾—è¿æ¥çš„å®¢æˆ·ç«¯çš„ SocketChannel ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 64 è¡Œï¼šé…ç½®å®¢æˆ·ç«¯çš„ SocketChannel ä¸ºéé˜»å¡ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ Selector ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 66 è¡Œï¼šæ‰“å°æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚å®é™…åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ Logger è€Œä¸è¦ä½¿ç”¨Â &lt;code&gt;System.out&lt;/code&gt;Â è¿›è¡Œè¾“å‡ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 68 è¡Œï¼šæ³¨å†Œå®¢æˆ·ç«¯çš„ SocketChannel åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚è¿™æ ·å­ï¼Œåœ¨å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯( æ•°æ® )åˆ°æœåŠ¡ç«¯æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤„ç†è¯¥ IO äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¸å¯¹Â &lt;code&gt;SelectionKey.OP_WRITE&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªæ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¹Â &lt;code&gt;SelectionKey.OP_WRITE&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»†å¿ƒçš„èƒ–å‹ä¼šå‘ç°ï¼Œ&lt;code&gt;Channel#register(Selector selector, int ops, Object attachment)&lt;/code&gt;Â æ–¹æ³•çš„ç¬¬ 3 ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬æ³¨å†Œäº† SelectionKey çš„Â &lt;code&gt;attachment&lt;/code&gt;Â å±æ€§ä¸ºÂ &lt;code&gt;new ArrayList&amp;lt;String&amp;gt;()&lt;/code&gt;Â ï¼Œè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç»“åˆä¸‹é¢çš„Â &lt;code&gt;#handleReadableKey(Selection key)&lt;/code&gt;Â æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€èµ·è§£æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo2-2-3-handlereadablekey-223-handlereadablekey223-handlereadablekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-3-handleReadableKey&#34;  title=&#34;2.2.3 handleReadableKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.2.3 handleReadableKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 71 è‡³ 93 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 73 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;SelectionKey#channel()&lt;/code&gt;Â æ–¹æ³•ï¼Œè·å¾—è¯¥ SelectionKey å¯¹åº”çš„ SocketChannel ï¼Œå³å®¢æˆ·ç«¯çš„ SocketChannel ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 75 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;CodecUtil#read(SocketChannel channel)&lt;/code&gt;Â æ–¹æ³•ï¼Œè¯»å–æ•°æ®ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// CodecUtil.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static ByteBuffer read(SocketChannel channel) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // æ³¨æ„ï¼Œä¸è€ƒè™‘æ‹†åŒ…çš„å¤„ç†  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ByteBuffer buffer = ByteBuffer.allocate(1024);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; try {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; int count = channel.read(buffer);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; if (count == -1) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return null;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } catch (IOException e) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new RuntimeException(e);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return buffer;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è€ƒè™‘åˆ°ç¤ºä¾‹çš„ç®€å•æ€§ï¼Œæ•°æ®çš„è¯»å–ï¼Œå°±ä¸è€ƒè™‘æ‹†åŒ…çš„å¤„ç†ã€‚ä¸ç†è§£çš„èƒ–å‹ï¼Œå¯ä»¥è‡ªå·± Google ä¸‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨Â &lt;code&gt;SocketChannel#read(ByteBuffer)&lt;/code&gt;Â æ–¹æ³•ï¼Œè¯»å– Channel çš„ç¼“å†²åŒºçš„æ•°æ®åˆ° ByteBuffer ä¸­ã€‚è‹¥è¿”å›çš„ç»“æœ(Â &lt;code&gt;count&lt;/code&gt;Â ) ä¸º -1 ï¼Œæ„å‘³ç€å®¢æˆ·ç«¯è¿æ¥å·²ç»æ–­å¼€ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›Â &lt;code&gt;null&lt;/code&gt;Â ã€‚ä¸ºä»€ä¹ˆæ˜¯è¿”å›Â &lt;code&gt;null&lt;/code&gt;Â å‘¢ï¼Ÿä¸‹é¢ç»§ç»­è§åˆ†æ™“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 76 è‡³ 81 è¡Œï¼šè‹¥è¯»å–æ•°æ®è¿”å›çš„ç»“æœä¸ºÂ &lt;code&gt;null&lt;/code&gt;Â æ—¶ï¼Œæ„å‘³ç€å®¢æˆ·ç«¯çš„è¿æ¥å·²ç»æ–­å¼€ï¼Œå› æ­¤å–æ¶ˆæ³¨å†ŒÂ &lt;code&gt;selector&lt;/code&gt;Â å¯¹è¯¥å®¢æˆ·ç«¯çš„ SocketChannel çš„æ„Ÿå…´è¶£çš„ IO äº‹ä»¶ã€‚é€šè¿‡è°ƒç”¨æ³¨å†Œæ–¹æ³•ï¼Œå¹¶ä¸”ç¬¬ 2 ä¸ªå‚æ•°Â &lt;code&gt;ops&lt;/code&gt;Â ä¸º 0 ï¼Œå¯ä»¥è¾¾åˆ°å–æ¶ˆæ³¨å†Œçš„æ•ˆæœã€‚ğŸ˜ˆ æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥å°†è¿™è¡Œä»£ç è¿›è¡Œæ³¨é‡Šï¼Œæµ‹è¯•ä¸‹æ•ˆæœå°±å¾ˆå®¹æ˜“æ˜ç™½äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 83 è¡Œï¼šé€šè¿‡è°ƒç”¨Â &lt;code&gt;ByteBuffer#position()&lt;/code&gt;Â å¤§äº 0 ï¼Œæ¥åˆ¤æ–­&lt;strong&gt;å®é™…&lt;/strong&gt;è¯»å–åˆ°æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæ­¤å¤„ç¬”è€…åœ¨ç¤ºä¾‹ä¸­ï¼Œå¤„ç†çš„æ–¹å¼ä¸ºæ·»åŠ å“åº”æ•°æ®åˆ°Â &lt;code&gt;responseQueue&lt;/code&gt;Â ä¸­ï¼Œå¹¶åœ¨ã€ç¬¬ 91 è¡Œã€‘çš„ä»£ç ä¸­ï¼Œæ³¨å†Œå®¢æˆ·ç«¯çš„ SocketChannel åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_WRITE&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚è¿™æ ·å­ï¼Œåœ¨ SocketChannelÂ &lt;strong&gt;å†™å°±ç»ª&lt;/strong&gt;æ—¶ï¼Œåœ¨Â &lt;code&gt;#handleWritableKey(SelectionKey key)&lt;/code&gt;Â æ–¹æ³•ä¸­ï¼Œç»Ÿä¸€å¤„ç†å†™æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ç„¶ï¼Œè¿˜æ˜¯å› ä¸ºæ˜¯ç¤ºä¾‹ï¼Œæ‰€ä»¥è¿™æ ·çš„å®ç°æ–¹å¼ä¸æ˜¯æœ€ä¼˜ã€‚åœ¨ Netty ä¸­ï¼Œå…·ä½“çš„å®ç°æ–¹å¼æ˜¯ï¼Œå…ˆå°è¯•è°ƒç”¨Â &lt;code&gt;SocketChannel#write(ByteBuf)&lt;/code&gt;Â æ–¹æ³•ï¼Œå†™æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚è‹¥å†™å…¥å¤±è´¥( æ–¹æ³•è¿”å›ç»“æœä¸º 0 )æ—¶ï¼Œå†è¿›è¡Œç±»ä¼¼ç¬”è€…çš„ä¸Šè¿°å®ç°æ–¹å¼ã€‚ç‰›é€¼ï¼Netty ï¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä¸å¤ªç†è§£åˆ†äº«çš„åŸå› ï¼Œå¯ä»¥å†é˜…è¯»å¦‚ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/V4tEH1j64FHFmB8bReNI7g&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šæ·±å¤œå¯¹è¯ï¼šNIO ä¸­ SelectionKey.OP_WRITE ä½ äº†è§£å¤šå°‘ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/a34140974/article/details/48464845&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠJava.nio ä¸­ socketChannle.write() è¿”å› 0 çš„ç®€æ˜“è§£å†³æ–¹æ¡ˆã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ğŸ˜ˆ å¦‚æœä¸ç†è§£ï¼Œæœ¨æœ‰å…³ç³»ï¼Œåœ¨Â &lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Dubbo/remoting-api-transport/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šç²¾å°½ Dubbo æºç åˆ†æ â€”â€” NIO æœåŠ¡å™¨ï¼ˆäºŒï¼‰ä¹‹ Transport å±‚ã€‹ã€Œ8. Dispacherã€&lt;/a&gt;Â ä¸­ï¼Œæœ‰è¯¦ç»†è§£æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ğŸ™‚ è€ƒè™‘åˆ°ç¤ºä¾‹çš„ç®€æ´æ€§ï¼Œæ‰€ä»¥åœ¨ã€ç¬¬ 88 è‡³ 89 è¡Œã€‘çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›ï¼ˆ&lt;code&gt;&amp;quot;å“åº”ï¼š&amp;quot;&lt;/code&gt;Â + è¯·æ±‚å†…å®¹ï¼‰ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ³¨æ„ï¼Œéœ€è¦è°ƒç”¨Â &lt;code&gt;ByteBuffer#flip()&lt;/code&gt;Â æ–¹æ³•ï¼Œå°† ByteBuffer ä»&lt;strong&gt;å†™&lt;/strong&gt;æ¨¡å¼åˆ‡æ¢åˆ°&lt;strong&gt;è¯»&lt;/strong&gt;æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 84 è‡³ 85 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;CodecUtil#newString(ByteBuffer)&lt;/code&gt;Â æ–¹æ³•ï¼Œæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿›è¡Œæ‰“å°ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// CodecUtil.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static String newString(ByteBuffer buffer) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; buffer.flip();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; byte\[\] bytes = new byte\[buffer.remaining()\];  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; System.arraycopy(buffer.array(), buffer.position(), bytes, 0, buffer.remaining());  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; try {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; return new String(bytes, &amp;#34;UTF-8&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } catch (UnsupportedEncodingException e) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new RuntimeException(e);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 86 è¡Œï¼šä¸€èˆ¬åœ¨æ­¤å¤„ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†çš„ç›¸åº”ç»“æœã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„ Request / Response çš„å¤„ç†ã€‚å½“ç„¶ï¼Œè€ƒè™‘åˆ°æ€§èƒ½ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å°†é€»è¾‘çš„å¤„ç†ï¼Œä¸¢åˆ°é€»è¾‘çº¿ç¨‹æ± ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 88 è¡Œï¼šé€šè¿‡è°ƒç”¨Â &lt;code&gt;SelectionKey#attachment()&lt;/code&gt;Â æ–¹æ³•ï¼Œè·å¾—æˆ‘ä»¬&lt;strong&gt;é™„åŠ &lt;/strong&gt;åœ¨ SelectionKey çš„å“åº”é˜Ÿåˆ—(Â &lt;code&gt;responseQueue&lt;/code&gt;Â )ã€‚å¯èƒ½æœ‰èƒ–å‹ä¼šé—®å•¦ï¼Œä¸ºä»€ä¹ˆä¸è°ƒç”¨Â &lt;code&gt;SocketChannel#write(ByteBuf)&lt;/code&gt;Â æ–¹æ³•ï¼Œç›´æ¥å†™æ•°æ®ç»™å®¢æˆ·ç«¯å‘¢ï¼Ÿè™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒSocketChannel éƒ½æ˜¯&lt;strong&gt;å¯å†™&lt;/strong&gt;çš„ï¼Œä½†æ˜¯å¦‚æœå†™å…¥æ¯”è¾ƒé¢‘ç¹ï¼Œè¶…è¿‡ SocketChannel çš„ç¼“å­˜åŒºå¤§å°ï¼Œå°±ä¼šå¯¼è‡´æ•°æ®â€œ&lt;strong&gt;ä¸¢å¤±&lt;/strong&gt;â€ï¼Œå¹¶æœªå†™ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 91 è¡Œï¼šæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ&lt;code&gt;Channel#register(Selector selector, int ops, Object attachment)&lt;/code&gt;Â æ–¹æ³•çš„ç¬¬ 3 ä¸ªå‚æ•°ï¼Œéœ€è¦ç»§ç»­ä¼ å…¥å“åº”é˜Ÿåˆ—(Â &lt;code&gt;responseQueue&lt;/code&gt;Â )ï¼Œå› ä¸ºæ¯æ¬¡æ³¨å†Œç”Ÿæˆ&lt;strong&gt;æ–°&lt;/strong&gt;çš„ SelectionKey ã€‚è‹¥ä¸ä¼ å…¥ï¼Œä¸‹é¢çš„Â &lt;code&gt;#handleWritableKey(SelectionKey key)&lt;/code&gt;Â æ–¹æ³•ï¼Œä¼šè·å¾—ä¸åˆ°å“åº”é˜Ÿåˆ—(Â &lt;code&gt;responseQueue&lt;/code&gt;Â )ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo2-2-4-handlewritablekey-224-handlewritablekey224-handlewritablekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-2-4-handleWritableKey&#34;  title=&#34;2.2.4 handleWritableKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.2.4 handleWritableKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 96 è‡³ 112 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 98 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;SelectionKey#channel()&lt;/code&gt;Â æ–¹æ³•ï¼Œè·å¾—è¯¥ SelectionKey å¯¹åº”çš„ SocketChannel ï¼Œå³å®¢æˆ·ç«¯çš„ SocketChannel ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 101 è¡Œï¼šé€šè¿‡è°ƒç”¨Â &lt;code&gt;SelectionKey#attachment()&lt;/code&gt;Â æ–¹æ³•ï¼Œè·å¾—æˆ‘ä»¬&lt;strong&gt;é™„åŠ &lt;/strong&gt;åœ¨ SelectionKey çš„å“åº”é˜Ÿåˆ—(Â &lt;code&gt;responseQueue&lt;/code&gt;Â )ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»£ç æ¯”è¾ƒç®€å•ï¼Œ&lt;strong&gt;è¿˜æ˜¯è¦æ³¨æ„&lt;/strong&gt;ï¼Œéœ€è¦è°ƒç”¨Â &lt;code&gt;ByteBuffer#flip()&lt;/code&gt;Â æ–¹æ³•ï¼Œå°† ByteBuffer ä»&lt;strong&gt;å†™&lt;/strong&gt;æ¨¡å¼åˆ‡æ¢åˆ°&lt;strong&gt;è¯»&lt;/strong&gt;æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 102 è¡Œï¼šéå†å“åº”é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 106 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;CodeUtil#write(SocketChannel, content)&lt;/code&gt;Â æ–¹æ³•ï¼Œå†™å…¥å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // CodecUtil.java  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;public static void write(SocketChannel channel, String content) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // å†™å…¥ Buffer  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ByteBuffer buffer = ByteBuffer.allocate(1024);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; try {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; buffer.put(content.getBytes(&amp;#34;UTF-8&amp;#34;));  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } catch (UnsupportedEncodingException e) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new RuntimeException(e);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // å†™å…¥ Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; buffer.flip();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; try {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; // æ³¨æ„ï¼Œä¸è€ƒè™‘å†™å…¥è¶…è¿‡ Channel ç¼“å­˜åŒºä¸Šé™ã€‚  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; channel.write(buffer);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; } catch (IOException e) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; throw new RuntimeException(e);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 111 è¡Œï¼š&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼Œå†ç»“æŸå†™å…¥åï¼Œéœ€è¦&lt;strong&gt;é‡æ–°&lt;/strong&gt;æ³¨å†Œå®¢æˆ·ç«¯çš„ SocketChannel åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå…¶å®è¿˜æ˜¯æˆ‘ä»¬åœ¨ä¸Šæ–‡ä¸­æåˆ°çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒSocketChannelÂ &lt;strong&gt;éƒ½æ˜¯å†™å°±ç»ªçš„&lt;/strong&gt;ï¼Œå¦‚æœä¸å–æ¶ˆæ‰æ³¨å†Œæ‰å¯¹Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ï¼Œå°±ä¼šå¯¼è‡´åå¤è§¦å‘æ— ç”¨çš„å†™äº‹ä»¶å¤„ç†ã€‚ğŸ˜ˆ æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥å°†è¿™è¡Œä»£ç è¿›è¡Œæ³¨é‡Šï¼Œæµ‹è¯•ä¸‹æ•ˆæœå°±å¾ˆå®¹æ˜“æ˜ç™½äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo2-3-main-23-main23-main&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#2-3-main&#34;  title=&#34;2.3 main&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2.3 main&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 114 è‡³ 116 è¡Œã€‘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª NioServer å¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ’¸åˆ°æ­¤å¤„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡Â &lt;code&gt;telnet 127.0.0.1 8080&lt;/code&gt;Â çš„æ–¹å¼ï¼Œè¿æ¥æœåŠ¡ç«¯ï¼Œè¿›è¡Œè¯»å†™æ•°æ®çš„æµ‹è¯•ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-5-demo3-e5aea2e688b7e7abaf-3-å®¢æˆ·ç«¯3-å®¢æˆ·ç«¯&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-%E5%AE%A2%E6%88%B7%E7%AB%AF&#34;  title=&#34;3. å®¢æˆ·ç«¯&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3. å®¢æˆ·ç«¯&lt;/h1&gt;
&lt;p&gt;å®¢æˆ·ç«¯çš„å®ç°ä»£ç ï¼Œç»å¤§æ•°å’ŒæœåŠ¡ç«¯ç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ†æçš„ç›¸å¯¹ä¼šç®€ç•¥ä¸€äº›ã€‚ä¸ç„¶ï¼Œè‡ªå·±éƒ½å«Œå¼ƒè‡ªå·±å¤ªå•°å—¦äº†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;  1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;  9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 79
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 80
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 81
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 82
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 83
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 84
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 85
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 86
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 87
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 88
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 89
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 90
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 91
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 92
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 93
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 94
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 95
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 96
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 97
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 98
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 99
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;100
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;101
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;102
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;103
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;104
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;105
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;106
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;107
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;108
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;109
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;110
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;111
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;112
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;113
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;114
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;115
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;116
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;117
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;118
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;119
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;120
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;121
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;122
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;123
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;124
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;125
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;126
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;127
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;128
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;129
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;130
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;131
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;132
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;133
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;134
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;135
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;136
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;137
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;138
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;139
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;140
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 1: public class NioClient {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 2:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 3: Â  Â  private SocketChannel clientSocketChannel;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 4: Â  Â  private Selector selector;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 5: Â  Â  private final List&amp;lt;String&amp;gt; responseQueue = new ArrayList&amp;lt;String&amp;gt;();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 6:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 7: Â  Â  private CountDownLatch connected = new CountDownLatch(1);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 8:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 9: Â  Â  public NioClient() throws IOException, InterruptedException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 10: Â  Â  Â  Â  // æ‰“å¼€ Client Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 11: Â  Â  Â  Â  clientSocketChannel = SocketChannel.open();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 12: Â  Â  Â  Â  // é…ç½®ä¸ºéé˜»å¡  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 13: Â  Â  Â  Â  clientSocketChannel.configureBlocking(false);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 14: Â  Â  Â  Â  // åˆ›å»º Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 15: Â  Â  Â  Â  selector = Selector.open();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 16: Â  Â  Â  Â  // æ³¨å†Œ Server Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 17: Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_CONNECT);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 18: Â  Â  Â  Â  // è¿æ¥æœåŠ¡å™¨  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 19: Â  Â  Â  Â  clientSocketChannel.connect(new InetSocketAddress(8080));  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 20:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 21: Â  Â  Â  Â  new Thread(new Runnable() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 22: Â  Â  Â  Â  Â  Â  @Override  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 23: Â  Â  Â  Â  Â  Â  public void run() {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 24: Â  Â  Â  Â  Â  Â  Â  Â  try {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 25: Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  handleKeys();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 26: Â  Â  Â  Â  Â  Â  Â  Â  } catch (IOException e) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 27: Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.printStackTrace();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 28: Â  Â  Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 29: Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 30: Â  Â  Â  Â  }).start();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 31:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 32: Â  Â  Â  Â  if (connected.getCount() != 0) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 33: Â  Â  Â  Â  Â  Â  connected.await();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 34: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 35: Â  Â  Â  Â  System.out.println(&amp;#34;Client å¯åŠ¨å®Œæˆ&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 36: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 37:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 38: Â  Â  @SuppressWarnings(&amp;#34;Duplicates&amp;#34;)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 39: Â  Â  private void handleKeys() throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 40: Â  Â  Â  Â  while (true) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 41: Â  Â  Â  Â  Â  Â  // é€šè¿‡ Selector é€‰æ‹© Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 42: Â  Â  Â  Â  Â  Â  int selectNums = selector.select(30 \* 1000L);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 43: Â  Â  Â  Â  Â  Â  if (selectNums == 0) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 44: Â  Â  Â  Â  Â  Â  Â  Â  continue;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 45: Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 46:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 47: Â  Â  Â  Â  Â  Â  // éå†å¯é€‰æ‹©çš„ Channel çš„ SelectionKey é›†åˆ  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 48: Â  Â  Â  Â  Â  Â  Iterator&amp;lt;SelectionKey&amp;gt; iterator = selector.selectedKeys().iterator();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 49: Â  Â  Â  Â  Â  Â  while (iterator.hasNext()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 50: Â  Â  Â  Â  Â  Â  Â  Â  SelectionKey key = iterator.next();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 51: Â  Â  Â  Â  Â  Â  Â  Â  iterator.remove(); // ç§»é™¤ä¸‹é¢è¦å¤„ç†çš„ SelectionKey  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 52: Â  Â  Â  Â  Â  Â  Â  Â  if (!key.isValid()) { // å¿½ç•¥æ— æ•ˆçš„ SelectionKey  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 53: Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  continue;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 54: Â  Â  Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 55:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 56: Â  Â  Â  Â  Â  Â  Â  Â  handleKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 57: Â  Â  Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 58: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 59: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 60:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 61: Â  Â  private synchronized void handleKey(SelectionKey key) throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 62: Â  Â  Â  Â  // æ¥å—è¿æ¥å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 63: Â  Â  Â  Â  if (key.isConnectable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 64: Â  Â  Â  Â  Â  Â  handleConnectableKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 65: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 66: Â  Â  Â  Â  // è¯»å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 67: Â  Â  Â  Â  if (key.isReadable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 68: Â  Â  Â  Â  Â  Â  handleReadableKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 69: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 70: Â  Â  Â  Â  // å†™å°±ç»ª  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 71: Â  Â  Â  Â  if (key.isWritable()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 72: Â  Â  Â  Â  Â  Â  handleWritableKey(key);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 73: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 74: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 75:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 76: Â  Â  private void handleConnectableKey(SelectionKey key) throws IOException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 77: Â  Â  Â  Â  // å®Œæˆè¿æ¥  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 78: Â  Â  Â  Â  if (!clientSocketChannel.isConnectionPending()) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 79: Â  Â  Â  Â  Â  Â  return;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 80: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 81: Â  Â  Â  Â  clientSocketChannel.finishConnect();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 82: Â  Â  Â  Â  // log  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 83: Â  Â  Â  Â  System.out.println(&amp;#34;æ¥å—æ–°çš„ Channel&amp;#34;);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 84: Â  Â  Â  Â  // æ³¨å†Œ Client Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 85: Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_READ, responseQueue);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 86: Â  Â  Â  Â  // æ ‡è®°ä¸ºå·²è¿æ¥  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 87: Â  Â  Â  Â  connected.countDown();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 88: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 89:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 90: Â  Â  @SuppressWarnings(&amp;#34;Duplicates&amp;#34;)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 91: Â  Â  private void handleReadableKey(SelectionKey key) throws ClosedChannelException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 92: Â  Â  Â  Â  // Client Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 93: Â  Â  Â  Â  SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 94: Â  Â  Â  Â  // è¯»å–æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 95: Â  Â  Â  Â  ByteBuffer readBuffer = CodecUtil.read(clientSocketChannel);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 96: Â  Â  Â  Â  // æ‰“å°æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 97: Â  Â  Â  Â  if (readBuffer.position() &amp;gt; 0) { // å†™å…¥æ¨¡å¼ä¸‹ï¼Œ  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 98: Â  Â  Â  Â  Â  Â  String content = CodecUtil.newString(readBuffer);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 99: Â  Â  Â  Â  Â  Â  System.out.println(&amp;#34;è¯»å–æ•°æ®ï¼š&amp;#34; \+ content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;100: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;101: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;102:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;103: Â  Â  @SuppressWarnings(&amp;#34;Duplicates&amp;#34;)  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;104: Â  Â  private void handleWritableKey(SelectionKey key) throws ClosedChannelException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;105: Â  Â  Â  Â  // Client Socket Channel  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;106: Â  Â  Â  Â  SocketChannel clientSocketChannel = (SocketChannel) key.channel();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;107:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;108: Â  Â  Â  Â  // éå†å“åº”é˜Ÿåˆ—  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;109: Â  Â  Â  Â  List&amp;lt;String&amp;gt; responseQueue = (ArrayList&amp;lt;String&amp;gt;) key.attachment();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;110: Â  Â  Â  Â  for (String content : responseQueue) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;111: Â  Â  Â  Â  Â  Â  // æ‰“å°æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;112: Â  Â  Â  Â  Â  Â  System.out.println(&amp;#34;å†™å…¥æ•°æ®ï¼š&amp;#34; \+ content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;113: Â  Â  Â  Â  Â  Â  // è¿”å›  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;114: Â  Â  Â  Â  Â  Â  CodecUtil.write(clientSocketChannel, content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;115: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;116: Â  Â  Â  Â  responseQueue.clear();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;117:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;118: Â  Â  Â  Â  // æ³¨å†Œ Client Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;119: Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_READ, responseQueue);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;120: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;121:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;122: Â  Â  public synchronized void send(String content) throws ClosedChannelException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;123: Â  Â  Â  Â  // æ·»åŠ åˆ°å“åº”é˜Ÿåˆ—  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;124: Â  Â  Â  Â  responseQueue.add(content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;125: Â  Â  Â  Â  // æ‰“å°æ•°æ®  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;126: Â  Â  Â  Â  System.out.println(&amp;#34;å†™å…¥æ•°æ®ï¼š&amp;#34; \+ content);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;127: Â  Â  Â  Â  // æ³¨å†Œ Client Socket Channel åˆ° Selector  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;128: Â  Â  Â  Â  clientSocketChannel.register(selector, SelectionKey.OP_WRITE, responseQueue);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;129: Â  Â  Â  Â  selector.wakeup();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;130: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;131:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;132: Â  Â  public static void main(String\[\] args) throws IOException, InterruptedException {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;133: Â  Â  Â  Â  NioClient client = new NioClient();  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;134: Â  Â  Â  Â  for (int i = 0; i &amp;lt; 30; i++) {  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;135: Â  Â  Â  Â  Â  Â  client.send(&amp;#34;nihao: &amp;#34; \+ i);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;136: Â  Â  Â  Â  Â  Â  Thread.sleep(1000L);  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;137: Â  Â  Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;138: Â  Â  }  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;139:   
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;140: }  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ•´å—ä»£ç æˆ‘ä»¬å¯ä»¥åˆ†æˆ 3 éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ„é€ æ–¹æ³•ï¼šåˆå§‹åŒ– NIO å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;#handleKeys()&lt;/code&gt;Â æ–¹æ³•ï¼šåŸºäº Selector å¤„ç† IO æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;#main(String[] args)&lt;/code&gt;Â æ–¹æ³•ï¼šåˆ›å»º NIO å®¢æˆ·ç«¯ï¼Œå¹¶å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬é€å°èŠ‚æ¥åˆ†äº«ã€‚&lt;/p&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo3-1-e69e84e980a0e696b9e6b395-31-æ„é€ æ–¹æ³•31-æ„é€ æ–¹æ³•&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-1-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95&#34;  title=&#34;3.1 æ„é€ æ–¹æ³•&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.1 æ„é€ æ–¹æ³•&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 3 è‡³ 36 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;clientSocketChannel&lt;/code&gt;Â å±æ€§ï¼Œå®¢æˆ·ç«¯çš„ SocketChannel ï¼Œåœ¨ã€ç¬¬ 9 è‡³ 13 è¡Œã€‘å’Œã€ç¬¬ 19 è¡Œã€‘çš„ä»£ç è¿›è¡Œåˆå§‹åŒ–ï¼Œé‡ç‚¹æ˜¯æ­¤å¤„è¿æ¥äº†æŒ‡å®šæœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;selector&lt;/code&gt;Â å±æ€§ï¼Œé€‰æ‹©å™¨ï¼Œåœ¨ã€ç¬¬ 14 è‡³ 17 è¡Œã€‘çš„ä»£ç è¿›è¡Œåˆå§‹åŒ–ï¼Œé‡ç‚¹æ˜¯æ­¤å¤„å°†Â &lt;code&gt;clientSocketChannel&lt;/code&gt;Â åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_CONNECT&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚è¿™æ ·å­ï¼Œåœ¨å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯&lt;strong&gt;æˆåŠŸ&lt;/strong&gt;æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤„ç†è¯¥ IO äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;responseQueue&lt;/code&gt;Â å±æ€§ï¼Œç›´æ¥å£°æ˜ä¸º NioClient çš„æˆå‘˜å˜é‡ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿Â &lt;code&gt;#send(String content)&lt;/code&gt;Â æ–¹æ³•çš„å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 21 è‡³ 30 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;#handleKeys()&lt;/code&gt;Â æ–¹æ³•ï¼ŒåŸºäº Selector å¤„ç† IO äº‹ä»¶ã€‚æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯ï¼Œæˆ‘ä»¬æ˜¯å¯åŠ¨äº†ä¸€ä¸ª&lt;strong&gt;çº¿ç¨‹&lt;/strong&gt;è¿›è¡Œå¤„ç†ã€‚å› ä¸ºåœ¨åç»­çš„Â &lt;code&gt;#main()&lt;/code&gt;Â æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å‘é€è¯·æ±‚æ•°æ®çš„æ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥åœ¨&lt;strong&gt;ä¸»çº¿ç¨‹&lt;/strong&gt;ï¼Œè½®è¯¢å¤„ç† IO äº‹ä»¶ã€‚ğŸ˜ˆ æœºæ™ºçš„èƒ–å‹ï¼Œå¯èƒ½å·²ç»å‘ç°ï¼ŒNioServer ä¸¥æ ¼æ¥è¯´ï¼Œä¹Ÿæ˜¯åº”è¯¥è¿™æ ·å¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 32 è‡³ 34 è¡Œï¼šé€šè¿‡ CountDownLatch æ¥å®ç°é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯æˆåŠŸè¿æ¥ä¸ŠæœåŠ¡ç«¯ã€‚å…·ä½“çš„Â &lt;code&gt;CountDownLatch#countDown()&lt;/code&gt;Â æ–¹æ³•ï¼Œåœ¨Â &lt;code&gt;#handleConnectableKey(SelectionKey key)&lt;/code&gt;Â æ–¹æ³•ä¸­è°ƒç”¨ã€‚å½“ç„¶ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨ CountDownLatch æ¥å®ç°é˜»å¡ç­‰å¾…ï¼Œè¿˜å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼:&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Object çš„ wait å’Œ notify çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Lock çš„ await å’Œ notify çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Queue çš„é˜»å¡ç­‰å¾…æ–¹å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ğŸ˜ˆ å¼€å¿ƒå°±å¥½ï¼Œçš®ä¸€ä¸‹å¾ˆå¼€å¿ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo3-2-handlekeys-32-handlekeys32-handlekeys&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-2-handleKeys&#34;  title=&#34;3.2 handleKeys&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.2 handleKeys&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 38 è‡³ 59 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;å®Œå…¨&lt;/strong&gt;å’Œ NioServer ä¸­çš„è¯¥æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œçœç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo3-2-1-handlekey-321-handlekey321-handlekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-2-1-handleKey&#34;  title=&#34;3.2.1 handleKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.2.1 handleKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 61 è‡³ 74 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¤§ä½“&lt;/strong&gt;é€»è¾‘å’Œ NioServer ä¸­çš„è¯¥æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œå·®åˆ«å°†å¯¹Â &lt;code&gt;SelectionKey.OP_WRITE&lt;/code&gt;Â äº‹ä»¶çš„å¤„ç†æ”¹æˆå¯¹Â &lt;code&gt;SelectionKey.OP_CONNECT&lt;/code&gt;Â äº‹ä»¶çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo3-3-2-handleconnectablekey-332-handleconnectablekey332-handleconnectablekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-2-handleConnectableKey&#34;  title=&#34;3.3.2 handleConnectableKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.3.2 handleConnectableKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 76 è‡³ 88 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 77 è‡³ 81 è¡Œï¼šåˆ¤æ–­å®¢æˆ·ç«¯çš„ SocketChannel ä¸Šæ˜¯å¦&lt;strong&gt;æ­£åœ¨è¿›è¡Œè¿æ¥&lt;/strong&gt;çš„æ“ä½œï¼Œè‹¥æ˜¯ï¼Œåˆ™å®Œæˆè¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 83 è¡Œï¼šæ‰“å°æ—¥å¿—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 85 è¡Œï¼šæ³¨å†Œå®¢æˆ·ç«¯çš„ SocketChannel åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_READ&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚è¿™æ ·å­ï¼Œåœ¨å®¢æˆ·ç«¯æ¥æ”¶åˆ°åˆ°æœåŠ¡ç«¯çš„æ¶ˆæ¯( æ•°æ® )æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤„ç†è¯¥ IO äº‹ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 87 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;CountDownLatch#countDown()&lt;/code&gt;Â æ–¹æ³•ï¼Œç»“æŸ NioClient æ„é€ æ–¹æ³•ä¸­çš„ã€ç¬¬ 32 è‡³ 34 è¡Œã€‘çš„é˜»å¡ç­‰å¾…è¿æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo3-3-3-handlereadablekey-333-handlereadablekey333-handlereadablekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-3-handleReadableKey&#34;  title=&#34;3.3.3 handleReadableKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.3.3 handleReadableKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 91 è‡³ 101 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¤§ä½“&lt;/strong&gt;é€»è¾‘å’Œ NioServer ä¸­çš„è¯¥æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œ&lt;strong&gt;å»æ‰å“åº”è¯·æ±‚çš„ç›¸å…³é€»è¾‘&lt;/strong&gt;ã€‚ğŸ˜ˆ å¦‚æœä¸å»æ‰ï¼Œå°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’å‘æ¶ˆæ¯çš„â€œæ­»å¾ªç¯â€äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;httpsvipiocodercnnettynio-5-demo3-3-4-handlewritablekey-334-handlewritablekey334-handlewritablekey&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-4-handleWritableKey&#34;  title=&#34;3.3.4 handleWritableKey&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.3.4 handleWritableKey&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 103 è‡³ 120 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;å®Œå…¨&lt;/strong&gt;å’Œ NioServer ä¸­çš„è¯¥æ–¹æ³•ä¸€æ¨¡ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo3-3-send-33-send33-send&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-3-send&#34;  title=&#34;3.3 send&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.3 send&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 122 è‡³ 130 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ¶ˆæ¯ç»™æœåŠ¡ç«¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 124 è¡Œï¼šæ·»åŠ åˆ°å“åº”é˜Ÿåˆ—(Â &lt;code&gt;responseQueue&lt;/code&gt;Â ) ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 126 è¡Œï¼šæ‰“å°æ—¥å¿—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 128 è¡Œï¼šæ³¨å†Œå®¢æˆ·ç«¯çš„ SocketChannel åˆ°Â &lt;code&gt;selector&lt;/code&gt;Â ä¸­ï¼Œå¹¶å¯¹Â &lt;code&gt;SelectionKey.OP_WRITE&lt;/code&gt;Â äº‹ä»¶æ„Ÿå…´è¶£ã€‚å…·ä½“çš„åŸå› ï¼Œå’Œ NioServer çš„Â &lt;code&gt;#handleReadableKey(SelectionKey key)&lt;/code&gt;Â æ–¹æ³•çš„ã€ç¬¬ 88 è¡Œã€‘ä¸€æ ·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 129 è¡Œï¼šè°ƒç”¨Â &lt;code&gt;Selector#wakeup()&lt;/code&gt;Â æ–¹æ³•ï¼Œå”¤é†’Â &lt;code&gt;#handleKeys()&lt;/code&gt;Â æ–¹æ³•ä¸­ï¼Œ&lt;code&gt;Selector#select(long timeout)&lt;/code&gt;Â æ–¹æ³•çš„é˜»å¡ç­‰å¾…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å› ä¸ºï¼Œåœ¨Â &lt;code&gt;Selector#select(long timeout)&lt;/code&gt;Â æ–¹æ³•çš„å®ç°ä¸­ï¼Œæ˜¯ä»¥è°ƒç”¨&lt;strong&gt;å½“æ—¶&lt;/strong&gt;ï¼Œå¯¹ SocketChannel çš„æ„Ÿå…´è¶£çš„äº‹ä»¶ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œåœ¨ã€ç¬¬ 128 è¡Œã€‘çš„ä»£ç ä¸­ï¼Œå³ä½¿ä¿®æ”¹äº†å¯¹ SocketChannel çš„æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œä¹Ÿä¸ä¼šç»“æŸÂ &lt;code&gt;Selector#select(long timeout)&lt;/code&gt;Â æ–¹æ³•çš„é˜»å¡ç­‰å¾…ã€‚å› æ­¤ï¼Œéœ€è¦è¿›è¡Œå”¤é†’æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ğŸ˜ˆ æ„Ÿå…´è¶£çš„èƒ–å‹ï¼Œå¯ä»¥å°†è¿™è¡Œä»£ç è¿›è¡Œæ³¨é‡Šï¼Œæµ‹è¯•ä¸‹æ•ˆæœå°±å¾ˆå®¹æ˜“æ˜ç™½äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-5-demo3-4-main-34-main34-main&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-5-demo/#3-4-main&#34;  title=&#34;3.4 main&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.4 main&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹åº”ã€ç¬¬ 132 è‡³ 137 è¡Œã€‘çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 133 è¡Œï¼šåˆ›å»ºä¸€ä¸ª NioClient å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ 134 è‡³ 137 è¡Œï¼šæ¯ç§’å‘é€ä¸€æ¬¡è¯·æ±‚ã€‚è€ƒè™‘åˆ°ä»£ç æ²¡æœ‰å¤„ç†æ‹†åŒ…çš„é€»è¾‘ï¼Œæ‰€ä»¥å¢åŠ äº†é—´éš” 1 ç§’çš„ sleep ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>nettyæºç åˆ†æä¸€</title>
        <link>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%80/</link>
        <pubDate>Thu, 04 May 2023 00:00:00 +0000</pubDate>
        
        <guid>https://tauzi.github.io/myblog/p/netty%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B8%80/</guid>
        <description>&lt;h1 id=&#34;ç²¾å°½-netty-æºç åˆ†æ--nio-åŸºç¡€ä¸€ä¹‹ç®€ä»‹&#34;&gt;ç²¾å°½ Netty æºç åˆ†æ â€”â€” NIO åŸºç¡€ï¼ˆä¸€ï¼‰ä¹‹ç®€ä»‹&lt;/h1&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-1-intro1-e6a682e8bfb0-1-æ¦‚è¿°1-æ¦‚è¿°&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#1-%E6%A6%82%E8%BF%B0&#34;  title=&#34;1. æ¦‚è¿°&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;1. æ¦‚è¿°&lt;/h1&gt;
&lt;p&gt;Java NIO( New IO æˆ–è€… Non Blocking IO ) ï¼Œä» Java 1.4 ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„&lt;strong&gt;éé˜»å¡&lt;/strong&gt;Â IO ï¼Œç”¨äºæ›¿æ¢&lt;strong&gt;æ ‡å‡†&lt;/strong&gt;( æœ‰äº›æ–‡ç« ä¹Ÿç§°ä¸º&lt;strong&gt;ä¼ ç»Ÿ&lt;/strong&gt;ï¼Œæˆ–è€… Blocking IO ã€‚ä¸‹æ–‡ç»Ÿç§°ä¸º BIO ) Java IO API çš„ IO API ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è€è‰¿è‰¿ï¼šåœ¨ä¸€äº›æ–‡ç« ä¸­ï¼Œä¼šå°† Java NIO æè¿°æˆ&lt;strong&gt;å¼‚æ­¥&lt;/strong&gt;Â IO ï¼Œå®é™…æ˜¯ä¸å¤ªæ­£ç¡®çš„ï¼š Java NIO æ˜¯&lt;strong&gt;åŒæ­¥&lt;/strong&gt;Â IO ï¼ŒJava AIO ( ä¹Ÿç§°ä¸º NIO 2 )æ˜¯&lt;strong&gt;å¼‚æ­¥&lt;/strong&gt;Â IOã€‚å…·ä½“åŸå› ï¼Œæ¨èé˜…è¯»æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/matthew_zhang/article/details/71328697&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€Šå¼‚æ­¥å’Œéé˜»å¡ä¸€æ ·å—? (å†…å®¹æ¶‰åŠ BIO, NIO, AIO, Netty)ã€‹&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/skiof007/article/details/52873421&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠBIOä¸NIOã€AIOçš„åŒºåˆ«(è¿™ä¸ªå®¹æ˜“ç†è§£)ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»ç»“æ¥è¯´ï¼Œåœ¨Â &lt;strong&gt;Unix IO æ¨¡å‹&lt;/strong&gt;çš„è¯­å¢ƒä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼šæ•°æ®æ‹·è´é˜¶æ®µæ˜¯å¦éœ€è¦å®Œå…¨ç”±æ“ä½œç³»ç»Ÿå¤„ç†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é˜»å¡å’Œéé˜»å¡æ“ä½œï¼šæ˜¯é’ˆå¯¹å‘èµ· IO è¯·æ±‚æ“ä½œåï¼Œæ˜¯å¦æœ‰ç«‹åˆ»è¿”å›ä¸€ä¸ªæ ‡å¿—ä¿¡æ¯è€Œä¸è®©è¯·æ±‚çº¿ç¨‹ç­‰å¾…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼ŒJava NIO æ˜¯&lt;strong&gt;åŒæ­¥&lt;/strong&gt;ä¸”éé˜»å¡çš„ IO ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-1-intro2-e6a0b8e5bf83e7bb84e4bbb6-2-æ ¸å¿ƒç»„ä»¶2-æ ¸å¿ƒç»„ä»¶&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#2-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6&#34;  title=&#34;2. æ ¸å¿ƒç»„ä»¶&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;2. æ ¸å¿ƒç»„ä»¶&lt;/h1&gt;
&lt;p&gt;Java NIO ç”±å¦‚ä¸‹&lt;strong&gt;ä¸‰ä¸ª&lt;/strong&gt;æ ¸å¿ƒç»„ä»¶ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Channel&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Buffer&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Selector&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åç»­çš„æ¯ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šåˆ†äº«å¯¹åº”çš„ä¸€ä¸ªç»„ä»¶ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-1-intro3-nio-e5928c-bio-e79a84e5afb9e6af94-3-nio-å’Œ-bio-çš„å¯¹æ¯”3-nio-å’Œ-bio-çš„å¯¹æ¯”&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#3-NIO-%E5%92%8C-BIO-%E7%9A%84%E5%AF%B9%E6%AF%94&#34;  title=&#34;3. NIO å’Œ BIO çš„å¯¹æ¯”&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3. NIO å’Œ BIO çš„å¯¹æ¯”&lt;/h1&gt;
&lt;p&gt;NIO å’Œ BIO çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;p&gt;NIO&lt;/p&gt;
&lt;p&gt;BIO&lt;/p&gt;
&lt;p&gt;åŸºäºç¼“å†²åŒº( Buffer )&lt;/p&gt;
&lt;p&gt;åŸºäºæµ( Stream )&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é&lt;/strong&gt;é˜»å¡ IO&lt;/p&gt;
&lt;p&gt;é˜»å¡ IO&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å™¨( Selector )&lt;/p&gt;
&lt;p&gt;æ— &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¶ä¸­ï¼Œé€‰æ‹©å™¨( Selector )æ˜¯ NIO èƒ½å®ç°&lt;strong&gt;é&lt;/strong&gt;é˜»å¡çš„åŸºç¡€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-1-intro3-1-e59fbae4ba8e-buffer-e4b88ee59fbae4ba8e-stream-31-åŸºäº-buffer-ä¸åŸºäº-stream31-åŸºäº-buffer-ä¸åŸºäº-stream&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#3-1-%E5%9F%BA%E4%BA%8E-Buffer-%E4%B8%8E%E5%9F%BA%E4%BA%8E-Stream&#34;  title=&#34;3.1 åŸºäº Buffer ä¸åŸºäº Stream&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.1 åŸºäº Buffer ä¸åŸºäº Stream&lt;/h2&gt;
&lt;p&gt;BIO æ˜¯é¢å‘å­—èŠ‚æµæˆ–è€…å­—ç¬¦æµçš„ï¼Œè€Œåœ¨ NIO ä¸­ï¼Œå®ƒæ‘’å¼ƒäº†ä¼ ç»Ÿçš„ IO æµï¼Œè€Œæ˜¯å¼•å…¥ Channel å’Œ Buffer çš„æ¦‚å¿µï¼šä» Channel ä¸­è¯»å–æ•°æ®åˆ° Buffer ä¸­ï¼Œæˆ–è€…å°†æ•°æ®ä» Buffer ä¸­å†™åˆ° Channel ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;â‘  é‚£ä¹ˆä»€ä¹ˆæ˜¯&lt;strong&gt;åŸºäº Stream&lt;/strong&gt;å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€èˆ¬çš„ Java IO æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä»¥&lt;strong&gt;æµå¼&lt;/strong&gt;çš„æ–¹å¼ï¼Œ&lt;strong&gt;é¡ºåº&lt;/strong&gt;çš„ä»ä¸€ä¸ª Stream ä¸­è¯»å–ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—èŠ‚ï¼Œç›´è‡³è¯»å–æ‰€æœ‰å­—èŠ‚ã€‚å› ä¸ºå®ƒæ²¡æœ‰ç¼“å­˜åŒºï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸èƒ½éšæ„æ”¹å˜è¯»å–æŒ‡é’ˆçš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;â‘¡ é‚£ä¹ˆä»€ä¹ˆæ˜¯&lt;strong&gt;åŸºäº Buffer&lt;/strong&gt;Â å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åŸºäº Buffer å°±æ˜¾å¾—æœ‰ç‚¹ä¸åŒäº†ã€‚æˆ‘ä»¬åœ¨ä» Channel ä¸­è¯»å–æ•°æ®åˆ° Buffer ä¸­ï¼Œè¿™æ · Buffer ä¸­å°±æœ‰äº†æ•°æ®åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™äº›æ•°æ®è¿›è¡Œæ“ä½œäº†ã€‚å¹¶ä¸”ä¸åŒäºä¸€èˆ¬çš„ Java IO æ“ä½œé‚£æ ·æ˜¯&lt;strong&gt;é¡ºåº&lt;/strong&gt;æ“ä½œï¼ŒNIO ä¸­æˆ‘ä»¬å¯ä»¥éšæ„çš„è¯»å–ä»»æ„ä½ç½®çš„æ•°æ®ï¼Œè¿™æ ·å¤§å¤§å¢åŠ äº†å¤„ç†è¿‡ç¨‹ä¸­çš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è€è‰¿è‰¿ï¼š&lt;strong&gt;å†™å…¥&lt;/strong&gt;æ“ä½œï¼Œä¹Ÿç¬¦åˆä¸Šè¿°&lt;strong&gt;è¯»å–&lt;/strong&gt;æ“ä½œçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-1-intro3-2-e998bbe5a19ee4b88ee99d9ee998bbe5a19e-io-32-é˜»å¡ä¸éé˜»å¡-io32-é˜»å¡ä¸éé˜»å¡-io&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#3-2-%E9%98%BB%E5%A1%9E%E4%B8%8E%E9%9D%9E%E9%98%BB%E5%A1%9E-IO&#34;  title=&#34;3.2 é˜»å¡ä¸éé˜»å¡ IO&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.2 é˜»å¡ä¸éé˜»å¡ IO&lt;/h2&gt;
&lt;p&gt;Java IO çš„å„ç§æµæ˜¯&lt;strong&gt;é˜»å¡&lt;/strong&gt;çš„ IO æ“ä½œã€‚è¿™å°±æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¯»æˆ–å†™ IO æ“ä½œæ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šè¢«&lt;strong&gt;é˜»å¡&lt;/strong&gt;ï¼Œç›´åˆ°æœ‰ä¸€äº›æ•°æ®è¢«è¯»å–ï¼Œæˆ–è€…æ•°æ®å®Œå…¨å†™å…¥ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Java NIO å¯ä»¥è®©æˆ‘ä»¬&lt;strong&gt;éé˜»å¡&lt;/strong&gt;çš„ä½¿ç”¨ IO æ“ä½œã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä» Channel æ‰§è¡Œè¯»å– IO æ“ä½œæ—¶ï¼Œå½“æ­¤æ—¶æœ‰æ•°æ®ï¼Œåˆ™è¯»å–æ•°æ®å¹¶è¿”å›ï¼›å½“æ­¤æ—¶æ— æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›&lt;strong&gt;è€Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå‘ Channel æ‰§è¡Œå†™å…¥ IO æ“ä½œæ—¶ï¼Œ&lt;strong&gt;ä¸éœ€è¦é˜»å¡ç­‰å¾…å®ƒå®Œå…¨å†™å…¥&lt;/strong&gt;ï¼Œè¿™ä¸ªçº¿ç¨‹åŒæ—¶å¯ä»¥åšåˆ«çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹å¯ä»¥å°†éé˜»å¡ IO çš„ç©ºé—²æ—¶é—´ç”¨äºåœ¨å…¶ä»– Channel ä¸Šæ‰§è¡Œ IO æ“ä½œã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ï¼Œå¯ä»¥ç®¡ç†å¤šä¸ª Channel çš„è¯»å–å’Œå†™å…¥ IO æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;httpsvipiocodercnnettynio-1-intro3-3-selector-33-selector33-selector&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#3-3-Selector&#34;  title=&#34;3.3 Selector&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;3.3 Selector&lt;/h2&gt;
&lt;p&gt;Java NIO å¼•å…¥ Selector ( é€‰æ‹©å™¨ )çš„æ¦‚å¿µï¼Œå®ƒæ˜¯ Java NIO å¾—ä»¥å®ç°éé˜»å¡ IO æ“ä½œçš„&lt;strong&gt;æœ€æœ€æœ€å…³é”®&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ³¨å†Œ&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;Â Channel åˆ°&lt;strong&gt;ä¸€ä¸ª&lt;/strong&gt;Â Selector ä¸­ã€‚è€Œ Selector å†…éƒ¨çš„æœºåˆ¶ï¼Œå°±å¯ä»¥è‡ªåŠ¨çš„ä¸ºæˆ‘ä»¬ä¸æ–­çš„æ‰§è¡ŒæŸ¥è¯¢( select )æ“ä½œï¼Œåˆ¤æ–­è¿™äº›æ³¨å†Œçš„ Channel æ˜¯å¦æœ‰&lt;strong&gt;å·²å°±ç»ªçš„ IO äº‹ä»¶( ä¾‹å¦‚å¯è¯»ï¼Œå¯å†™ï¼Œç½‘ç»œè¿æ¥å·²å®Œæˆ )&lt;/strong&gt;ã€‚&lt;br&gt;
é€šè¿‡è¿™æ ·çš„æœºåˆ¶ï¼Œ&lt;strong&gt;ä¸€ä¸ª&lt;/strong&gt;çº¿ç¨‹é€šè¿‡ä½¿ç”¨&lt;strong&gt;ä¸€ä¸ª&lt;/strong&gt;Â Selector ï¼Œå°±å¯ä»¥éå¸¸ç®€å•ä¸”é«˜æ•ˆçš„æ¥ç®¡ç†&lt;strong&gt;å¤šä¸ª&lt;/strong&gt;Â Channel äº†ã€‚&lt;/p&gt;
&lt;h1 id=&#34;httpsvipiocodercnnettynio-1-intro4-nio-e5928c-aio-e79a84e5afb9e6af94-4-nio-å’Œ-aio-çš„å¯¹æ¯”4-nio-å’Œ-aio-çš„å¯¹æ¯”&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;http://svip.iocoder.cn/Netty/nio-1-intro/#4-NIO-%E5%92%8C-AIO-%E7%9A%84%E5%AF%B9%E6%AF%94&#34;  title=&#34;4. NIO å’Œ AIO çš„å¯¹æ¯”&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;&lt;/a&gt;4. NIO å’Œ AIO çš„å¯¹æ¯”&lt;/h1&gt;
&lt;p&gt;è€ƒè™‘åˆ° Netty 4.1.X ç‰ˆæœ¬å®é™…å¹¶æœªåŸºäº Java AIO å®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±çœç•¥æ‰è¿™å—å†…å®¹ã€‚é‚£ä¹ˆï¼Œæ„Ÿå…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥è‡ªå·± Google ä¸‹ Java NIO å’Œ Java AIO çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“ä¸ºä»€ä¹ˆ Netty 4.1.X ç‰ˆæœ¬ä¸æ”¯æŒ Java AIO çš„åŸå› ï¼Œå¯å‚è§Â &lt;a class=&#34;link&#34; href=&#34;https://juejin.im/entry/5a8ed33b6fb9a0634c26801c&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ã€ŠNettyï¼ˆäºŒï¼‰ï¼šNetty ä¸ºå•¥å»æ‰æ”¯æŒ AIO ?ã€‹&lt;/a&gt;Â æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå› æ­¤ï¼ŒNetty 4.1.X ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„æ˜¯&lt;strong&gt;åŒæ­¥éé˜»å¡çš„ NIO æ¨¡å‹&lt;/strong&gt;ã€‚å½“ç„¶ï¼Œå¦‚æœçœŸçš„æœ‰å¿…è¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨&lt;strong&gt;åŒæ­¥é˜»å¡çš„ BIO æ¨¡å‹&lt;/strong&gt;ã€‚&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
